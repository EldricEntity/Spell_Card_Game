{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aaron\\\\DND_Spell_Cards\\\\Spell_Card_Game\\\\DND_Spell_Cards_online\\\\Online_DM_additions\\\\frontend - Copy\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// dnd-spell-cards-app/frontend/src/App.js\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { v4 as uuidv4 } from 'uuid'; // Import uuid for unique keys for deck card instances\n\n// IMPORTANT: Update this to your VM's Public IP address (or domain name if configured)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://193.122.147.91:5000/api';\n\n// Inline CSS for self-contained component\nconst AppStyles = `\n    /* Import Google Fonts for a D&D feel */\n    @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Merriweather:wght@400;700&display=swap');\n\n    body {\n        background-color: #3b2f2f; /* Dark brown background, like a closed grimoire */\n        font-family: 'Merriweather', serif; /* Readable serif for body text */\n        color: #5a4b4b; /* Darker, faded text */\n        margin: 0;\n        padding: 0;\n        line-height: 1.6;\n    }\n\n    .App {\n        display: flex;\n        flex-direction: column;\n        min-height: 100vh;\n        align-items: center;\n        padding: 1.5rem; /* Increased padding */\n        box-sizing: border-box;\n        /* --- NEW WOODEN FLOOR TEXTURE --- */\n        background-image: url('/images/wooden-floor.jpg');\n        background-size: cover;\n        background-position: center; /* Center the background image */\n        background-attachment: fixed;\n        border: 10px solid #4a3e3c; /* Thick, dark border for the \"book\" effect */\n        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); /* Deep shadow for depth */\n        margin: 1rem; /* Margin to show body background */\n        border-radius: 1rem; /* Slightly rounded edges for the book */\n    }\n\n    .app-title {\n        font-family: 'Cinzel', serif; /* Ornate font for title */\n        color: #8c6e4e; /* Gold/parchment color */\n        text-align: center;\n        margin-bottom: 2rem;\n        font-size: 3.2rem; /* Larger title */\n        font-weight: 700;\n        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6); /* Text shadow for depth */\n    }\n\n    .login-container, .stats-container, .dm-section-panel {\n        background: #6a5d5a; /* Muted stone/dark wood color */\n        color: #f5f5dc; /* Off-white for readability */\n        padding: 1.8rem; /* More padding */\n        margin-bottom: 2rem;\n        border-radius: 0.8rem;\n        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4), 0 4px 15px rgba(0, 0, 0, 0.3); /* Inset shadow for carved look */\n        display: flex;\n        gap: 1.2rem;\n        align-items: center;\n        justify-content: center;\n        flex-wrap: wrap;\n        width: 100%;\n        max-width: 1000px; /* Slightly narrower */\n        border: 2px solid #4a3e3c; /* Matching dark border */\n    }\n\n    .login-container input, .dm-section-panel input {\n        padding: 0.8rem 1rem;\n        border-radius: 0.5rem;\n        border: 1px solid #8c6e4e; /* Goldish border */\n        background: #e9dcc9; /* Parchment background */\n        color: #3b2f2f; /* Dark text */\n        font-family: 'Merriweather', serif;\n        font-size: 1.1rem;\n        flex-grow: 1;\n        max-width: 200px;\n    }\n\n    .login-container button, .use-button, .reset-button, .remove-button, .select-button, .booster-button, .dm-section-panel button {\n        background-color: #8c6e4e; /* Gold/bronze button */\n        color: #f5f5dc; /* Off-white text */\n        padding: 0.8rem 1.5rem;\n        border: 2px solid #5a4b4b; /* Darker edge */\n        border-radius: 0.5rem;\n        cursor: pointer;\n        font-weight: bold;\n        transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;\n        white-space: nowrap;\n        font-family: 'Cinzel', serif; /* Thematic button font */\n        text-transform: uppercase;\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);\n    }\n\n    .login-container button:hover, .select-button:hover:not(:disabled), .booster-button:hover:not(:disabled), .dm-section-panel button:hover:not(:disabled) {\n        background-color: #a38b6d; /* Lighter gold on hover */\n        transform: translateY(-3px); /* More pronounced lift */\n        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);\n    }\n\n    .select-button:disabled, .use-button:disabled, .booster-button:disabled, .dm-section-panel button:disabled {\n        background-color: #5a4b4b; /* Muted disabled color */\n        color: #a0a0a0;\n        cursor: not-allowed;\n        transform: none;\n        box-shadow: none;\n    }\n\n    .stats-container {\n        background: #5a4b4b; /* Darker tone for stats */\n        color: #f5f5dc;\n        padding: 1.8rem;\n    }\n\n    .stats-container label {\n        display: flex;\n        align-items: center;\n        gap: 0.6rem;\n        font-weight: 700;\n        font-family: 'Cinzel', serif;\n    }\n\n    .stats-container input {\n        width: 5rem; /* Wider input */\n        padding: 0.4rem;\n        border-radius: 0.4rem;\n        border: 1px solid #8c6e4e;\n        background: #e9dcc9;\n        color: #3b2f2f;\n        text-align: center;\n        font-family: 'Merriweather', serif;\n    }\n\n    .stats-container p {\n        margin: 0;\n        padding: 0;\n        font-size: 1.1rem;\n        font-weight: 700;\n    }\n\n    .message-box {\n        position: fixed;\n        top: 2rem; /* Lowered position */\n        left: 50%;\n        transform: translateX(-50%);\n        padding: 0.9rem 1.8rem;\n        border-radius: 0.6rem;\n        font-weight: bold;\n        z-index: 1000;\n        animation: fadein 0.5s, fadeout 0.5s 4.5s; /* Longer display */\n        text-align: center;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);\n        font-family: 'Cinzel', serif;\n        text-transform: uppercase;\n    }\n\n    .message-box.success {\n        background-color: #488c5d; /* Darker green */\n        color: white;\n    }\n\n    .message-box.error {\n        background-color: #a33b3b; /* Darker red */\n        color: white;\n    }\n\n    .message-box.info {\n        background-color: #6a5d5a;\n        color: #f5f5dc;\n    }\n\n    @keyframes fadein {\n        from { opacity: 0; transform: translateX(-50%) translateY(-20px); }\n        to   { opacity: 1; transform: translateX(-50%) translateY(0); }\n    }\n\n    @keyframes fadeout {\n        from { opacity: 1; transform: translateX(-50%) translateY(0); }\n        to   { opacity: 0; transform: translateX(-50%) translateY(-20px); }\n    }\n\n    .tab-navigation {\n        display: flex;\n        justify-content: center;\n        width: 100%;\n        max-width: 1000px;\n        margin-bottom: 2rem;\n        background-color: #5a4b4b; /* Darker tab background */\n        border-radius: 0.8rem;\n        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4);\n        overflow: hidden;\n        border: 2px solid #4a3e3c;\n    }\n\n    .tab-item {\n        flex: 1;\n        text-align: center;\n        padding: 1.2rem 1.8rem; /* More generous padding */\n        cursor: pointer;\n        font-weight: bold;\n        color: #e9dcc9; /* Parchment text */\n        background-color: #5a4b4b;\n        transition: background-color 0.3s ease, color 0.3s ease;\n        border-bottom: 4px solid transparent; /* Thicker active indicator */\n        font-family: 'Cinzel', serif;\n        text-transform: uppercase;\n    }\n\n    .tab-item:hover:not(.active) {\n        background-color: #6a5d5a; /* Slightly lighter on hover */\n    }\n\n    .tab-item.active {\n        background-color: #8c6e4e; /* Gold active tab */\n        color: white;\n        border-bottom-color: #a38b6d; /* Lighter gold accent */\n    }\n\n    .main-content {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 2rem; /* Increased gap */\n        width: 100%;\n        max-width: 1000px;\n        flex: 1;\n    }\n\n    .card-collection-panel, .built-deck-panel {\n        background: #e9dcc9; /* Parchment background for panels */\n        border-radius: 0.8rem;\n        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\n        padding: 2rem; /* More padding */\n        flex: 1;\n        min-width: 320px; /* Slightly larger min-width */\n        display: flex;\n        flex-direction: column;\n        border: 2px solid #8c6e4e; /* Gold border */\n    }\n\n    .panel-title {\n        font-family: 'Cinzel', serif;\n        text-align: center;\n        color: #3b2f2f; /* Dark text for title */\n        margin-top: 0;\n        margin-bottom: 2rem;\n        font-size: 2.2rem; /* Larger panel title */\n        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);\n    }\n\n    .card-list, .deck-list {\n        display: grid;\n        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); /* Larger cards */\n        gap: 1.5rem; /* Increased gap */\n        flex-grow: 1;\n    }\n\n    .card-item {\n        background: #fdf6e6; /* Lighter parchment for individual cards */\n        border: 1px solid #d3c4a2; /* Faded parchment border */\n        border-radius: 0.6rem;\n        padding: 1.2rem;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n        transition: transform 0.2s ease, box-shadow 0.2s ease;\n        display: flex;\n        flex-direction: column;\n        text-align: center;\n        font-family: 'Merriweather', serif;\n    }\n\n    .card-item:hover.available-card {\n        transform: translateY(-7px); /* More dramatic lift */\n        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.25);\n        cursor: pointer;\n    }\n\n    .card-item.deck-card {\n        background: #e9dcc9; /* Muted parchment for deck cards */\n        border: 1px solid #8c6e4e; /* Goldish border for deck cards */\n    }\n\n    .card-image {\n        max-width: 100%;\n        height: auto;\n        border-radius: 0.4rem;\n        margin-bottom: 1rem;\n        border: 1px solid #8c6e4e; /* Gold frame for image */\n    }\n    \n    .card-backlash {\n        font-family: 'Merriweather', serif;\n        font-size: 0.85rem;\n        color: #a33b3b; /* Red color for backlash effect */\n        margin-bottom: 0.5rem;\n        font-weight: bold;\n        text-transform: uppercase;\n    }\n\n    .card-name {\n        font-family: 'Cinzel', serif;\n        font-weight: 700;\n        font-size: 1.25rem;\n        color: #3b2f2f;\n        margin-bottom: 0.6rem;\n    }\n\n    .card-type {\n        font-style: italic;\n        color: #5a4b4b;\n        margin-bottom: 0.7rem;\n        font-size: 0.95rem;\n    }\n\n    .card-description {\n        font-size: 0.9rem;\n        color: #4a3e3c;\n        flex-grow: 1;\n        margin-bottom: 0.7rem; /* Adjusted margin */\n    }\n\n    .card-effect {\n        font-size: 0.9rem;\n        color: #4a6d8c; /* Blue color for effect */\n        margin-bottom: 0.7rem; /* Adjusted margin */\n        font-style: italic;\n    }\n\n    .card-meta, .card-uses {\n        font-size: 0.85rem;\n        color: #5a4b4b;\n        margin-bottom: 0.6rem;\n    }\n    \n    .card-meta span {\n        font-weight: bold;\n        color: #3b2f2f;\n    }\n\n    .card-actions {\n        margin-top: 1rem;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 0.6rem;\n        justify-content: center;\n    }\n\n    .use-button {\n        background-color: #4a6d8c; /* Muted blue for use */\n        color: white;\n    }\n    .use-button:hover:not(:disabled) {\n        background-color: #3a5c78;\n        transform: translateY(-2px);\n    }\n\n    .reset-button {\n        background-color: #5a8c4a; /* Muted green for reset */\n        color: white;\n    }\n    .reset-button:hover {\n        background-color: #4a783a;\n        transform: translateY(-2px);\n    }\n\n    .remove-button {\n        background-color: #8c4a4a; /* Muted red for remove */\n        color: white;\n    }\n    .remove-button:hover {\n        background-color: #783a3a;\n        transform: translateY(-2px);\n    }\n\n    .empty-message, .pre-login-message {\n        text-align: center;\n        padding: 2.5rem;\n        background: #d3c4a2; /* Lighter parchment */\n        border-radius: 0.8rem;\n        color: #5a4b4b;\n        font-style: italic;\n        margin: 1.5rem;\n        border: 1px solid #8c6e4e;\n        box-shadow: inset 0 1px 5px rgba(0, 0, 0, 0.2);\n    }\n\n    .error-message {\n        color: #a33b3b;\n        background-color: #fce2e2;\n        border: 1px solid #a33b3b;\n        padding: 0.8rem;\n        border-radius: 0.6rem;\n        text-align: center;\n        margin-top: 1.5rem;\n        font-weight: bold;\n        font-family: 'Merriweather', serif;\n    }\n\n    .highlight {\n        color: #4a6d8c; /* Muted blue highlight */\n        font-weight: bold;\n    }\n\n    .booster-pack-section {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        margin-top: 2rem;\n        padding-top: 2rem;\n        border-top: 1px dashed #8c6e4e; /* Dashed gold separator */\n        width: 100%;\n    }\n\n    .booster-pack-section button {\n        margin-top: 1.5rem;\n    }\n\n    .new-cards-display {\n        margin-top: 1.5rem;\n        padding: 1.5rem;\n        background: #d3c4a2;\n        border-radius: 0.6rem;\n        text-align: center;\n        width: 100%;\n        max-width: 450px;\n        border: 1px solid #8c6e4e;\n        box-shadow: inset 0 1px 5px rgba(0, 0, 0, 0.2);\n        font-family: 'Merriweather', serif;\n    }\n    .new-cards-display h4 {\n        font-family: 'Cinzel', serif;\n        color: #3b2f2f;\n        margin-bottom: 0.8rem;\n        font-size: 1.2rem;\n    }\n    .new-cards-display ul {\n        list-style-type: none;\n        padding: 0;\n        margin: 0;\n    }\n    .new-cards-display li {\n        margin-bottom: 0.3rem;\n        color: #4a3e3c;\n        font-size: 0.95rem;\n    }\n\n    /* DM Screen Specific Styles */\n    .dm-screen-container {\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        max-width: 1000px;\n        gap: 1.5rem;\n    }\n\n    .dm-sub-nav {\n        display: flex;\n        justify-content: center;\n        background-color: #5a4b4b;\n        border-radius: 0.8rem;\n        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4);\n        overflow: hidden;\n        border: 2px solid #4a3e3c;\n    }\n\n    .dm-sub-nav-item {\n        flex: 1;\n        text-align: center;\n        padding: 1rem 1.5rem;\n        cursor: pointer;\n        font-weight: bold;\n        color: #e9dcc9;\n        background-color: #5a4b4b;\n        transition: background-color 0.3s ease, color 0.3s ease;\n        border-bottom: 3px solid transparent;\n        font-family: 'Cinzel', serif;\n        text-transform: uppercase;\n        font-size: 0.95rem;\n    }\n\n    .dm-sub-nav-item:hover:not(.active) {\n        background-color: #6a5d5a;\n    }\n\n    .dm-sub-nav-item.active {\n        background-color: #8c6e4e;\n        color: white;\n        border-bottom-color: #a38b6d;\n    }\n\n    .dm-section-panel {\n        flex-direction: column;\n        align-items: stretch;\n        gap: 1.5rem;\n        max-width: none; /* Override max-width for full panel use */\n    }\n\n    .dm-session-list ul, .dm-player-list ul {\n        list-style-type: none;\n        padding: 0;\n        margin: 0;\n    }\n\n    .dm-session-list li, .dm-player-list li {\n        background: #d3c4a2;\n        padding: 0.8rem 1.2rem;\n        margin-bottom: 0.5rem;\n        border-radius: 0.4rem;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        font-family: 'Merriweather', serif;\n        color: #3b2f2f;\n        box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n        cursor: pointer;\n        transition: background-color 0.2s ease;\n    }\n\n    .dm-session-list li:hover, .dm-player-list li:hover:not(.no-hover) {\n        background-color: #c9bda5;\n    }\n\n    .dm-player-id {\n        font-weight: bold;\n        color: #4a6d8c;\n    }\n\n    .dm-player-view-details {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 2rem;\n        margin-top: 1.5rem;\n    }\n\n    .dm-player-stats-panel, .dm-player-deck-panel {\n        flex: 1;\n        min-width: 300px;\n        background: #fdf6e6;\n        border-radius: 0.6rem;\n        padding: 1.5rem;\n        box-shadow: inset 0 1px 5px rgba(0,0,0,0.2);\n        border: 1px solid #8c6e4e;\n        color: #3b2f2f;\n    }\n    .dm-player-stats-panel h4, .dm-player-deck-panel h4 {\n        font-family: 'Cinzel', serif;\n        font-size: 1.3rem;\n        margin-top: 0;\n        margin-bottom: 1rem;\n        color: #3b2f2f;\n        text-align: center;\n    }\n    .dm-player-stats-panel p {\n        margin-bottom: 0.5rem;\n    }\n    .dm-player-stats-panel span {\n        font-weight: bold;\n        color: #4a6d8c;\n    }\n    \n    .dm-player-deck-panel .card-list {\n        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); /* Smaller cards for DM view */\n    }\n\n    /* Responsive Adjustments (ensure DM screen is also responsive) */\n    @media (max-width: 768px) {\n        .dm-sub-nav {\n            flex-direction: column;\n        }\n        .dm-sub-nav-item {\n            border-bottom: none;\n            border-right: 3px solid transparent;\n        }\n        .dm-sub-nav-item.active {\n            border-bottom-color: transparent;\n            border-right-color: #a38b6d;\n        }\n        .dm-player-view-details {\n            flex-direction: column;\n        }\n    }\n    @media (max-width: 480px) {\n        .dm-sub-nav-item {\n            padding: 0.8rem 1rem;\n            font-size: 0.85rem;\n        }\n    }\n`;\nfunction App() {\n  _s();\n  // --- State Variables ---\n  const [allCards, setAllCards] = useState([]); // All cards fetched from the backend (master list)\n  const [characterLevel, setCharacterLevel] = useState(1);\n  const [wisMod, setWisMod] = useState(0);\n  const [intMod, setIntMod] = useState(0);\n  const [chaMod, setChaMod] = useState(0);\n  const [maxDeckSize, setMaxDeckSize] = useState(0);\n  const [activeDeckInstances, setActiveDeckInstances] = useState([]); // Cards currently in the player's ACTIVE deck (persistent instances)\n  const [unlockedCollectionIds, setUnlockedCollectionIds] = useState([]); // IDs of all UNIQUE card types the player HAS UNLOCKED (owned pool)\n  const [error, setError] = useState(''); // General error messages for UI\n\n  // New states for login/auth\n  const [playerId, setPlayerId] = useState('');\n  const [password, setPassword] = useState('');\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [message, setMessage] = useState({\n    text: '',\n    type: ''\n  });\n  const [loading, setLoading] = useState(true); // Loading state for initial data fetch of allCards\n\n  // New state for tab management\n  const [activeTab, setActiveTab] = useState('available'); // 'available', 'deck', or 'dm_screen'\n\n  // State for newly acquired cards from booster packs\n  const [newlyAcquiredCards, setNewlyAcquiredCards] = useState([]);\n  const [lastOpenedPackType, setLastOpenedPackType] = useState('');\n  const [prePackUnlockedIds, setPrePackUnlockedIds] = useState([]); // Store state before opening pack for duplicate check\n\n  // --- NEW DM/SESSION STATES ---\n  const [isDMMode, setIsDMMode] = useState(false); // Can be toggled if player_id is DM\n  const [sessionNameInput, setSessionNameInput] = useState('');\n  const [sessionCodeInput, setSessionCodeInput] = useState('');\n  const [dmSessions, setDmSessions] = useState([]); // Sessions created by THIS DM\n  const [selectedDmSession, setSelectedDmSession] = useState(null); // The session the DM is currently viewing\n  const [playersInSelectedDmSession, setPlayersInSelectedDmSession] = useState([]); // Players in the selected DM session\n  const [selectedPlayerForDMView, setSelectedPlayerForDMView] = useState(null); // The specific player DM is inspecting\n  const [selectedPlayerDMData, setSelectedPlayerDMData] = useState(null); // Full card data for the inspected player\n  const [activeDmTab, setActiveDmTab] = useState('my_sessions'); // 'create_session', 'my_sessions', 'view_player'\n\n  // --- Helper function to display messages ---\n  const showMessage = useCallback((text, type) => {\n    setMessage({\n      text,\n      type\n    });\n    // Clear message after 5 seconds for info, 3 seconds for others\n    const duration = type === 'info' ? 5000 : 3000;\n    setTimeout(() => setMessage({\n      text: '',\n      type: ''\n    }), duration);\n  }, []);\n\n  // --- API Call: Create Account ---\n  const handleCreateAccount = async () => {\n    if (!playerId || !password) {\n      showMessage('Player ID and password are required to create an account.', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/deck/create`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to create account.');\n      }\n      showMessage('Account created successfully! You can now log in.', 'success');\n    } catch (err) {\n      console.error('Error creating account:', err);\n      showMessage(`Failed to create account: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- API Call: Login and Load Deck ---\n  const handleLoginAndLoadDeck = async () => {\n    if (!playerId || !password) {\n      showMessage('Player ID and password are required to log in.', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/deck/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Authentication failed.');\n      }\n\n      // Load data from backend upon successful login\n      setActiveDeckInstances(data.active_deck_instances || []); // Load active deck instances\n      setUnlockedCollectionIds(data.unlocked_collection_ids || []); // Load unlocked card IDs (now includes duplicates)\n      setCharacterLevel(data.character_level !== undefined ? data.character_level : 1);\n      setWisMod(data.wis_mod !== undefined ? data.wis_mod : 0);\n      setIntMod(data.int_mod !== undefined ? data.int_mod : 0);\n      setChaMod(data.cha_mod !== undefined ? data.cha_mod : 0);\n      setIsAuthenticated(true);\n      setActiveTab('deck'); // Automatically switch to the deck tab after login\n      setIsDMMode(false); // Ensure DM mode is off by default after login\n\n      showMessage('Login successful! Deck and unlocked cards loaded.', 'success');\n    } catch (err) {\n      setIsAuthenticated(false);\n      console.error('Error logging in:', err);\n      showMessage(`Failed to load deck: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- API Call: Save Deck ---\n  const handleSaveDeck = async () => {\n    if (!isAuthenticated) {\n      showMessage('You must be logged in to save your deck.', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/deck/save`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password: password,\n          // Send password for re-validation on backend\n          active_deck_instances: activeDeckInstances,\n          // Save active deck instances\n          unlocked_collection_ids: unlockedCollectionIds,\n          // Save unlocked card IDs (now includes duplicates)\n          character_level: characterLevel,\n          wis_mod: wisMod,\n          int_mod: intMod,\n          cha_mod: chaMod\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to save deck.');\n      }\n      showMessage('Deck and unlocked cards saved successfully!', 'success');\n    } catch (err) {\n      console.error('Error saving deck:', err);\n      showMessage(`Failed to save deck: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- Effect to Fetch All Cards on Component Mount ---\n  useEffect(() => {\n    const fetchAllCards = async () => {\n      setLoading(true);\n      try {\n        const cardsResponse = await fetch(`${API_BASE_URL}/cards`);\n        if (!cardsResponse.ok) {\n          throw new Error(`HTTP error fetching cards! status: ${cardsResponse.status}`);\n        }\n        const cardsData = await cardsResponse.json();\n        setAllCards(cardsData);\n      } catch (err) {\n        console.error('Error fetching initial data:', err);\n        showMessage('Failed to fetch initial data: ' + err.message, 'error');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAllCards();\n  }, [showMessage]); // Empty dependency array, this effect runs only once on mount\n\n  // --- Effect to Calculate Max Deck Size when Character Stats Change ---\n  useEffect(() => {\n    const calculateDeckSize = async () => {\n      setError(''); // Clear previous errors related to deck size\n      try {\n        const response = await fetch(`${API_BASE_URL}/calculate_deck_size`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            character_level: characterLevel,\n            wis_mod: wisMod,\n            int_mod: intMod,\n            cha_mod: chaMod\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        setMaxDeckSize(data.max_deck_size);\n      } catch (err) {\n        setError('Failed to calculate deck size: ' + err.message);\n        console.error('Error calculating deck size:', err);\n      }\n    };\n    if (!isNaN(characterLevel) && !isNaN(wisMod) && !isNaN(intMod) && !isNaN(chaMod)) {\n      calculateDeckSize();\n    }\n  }, [characterLevel, wisMod, intMod, chaMod]);\n\n  // --- Booster Pack Logic: Open a new pack ---\n  const handleOpenBoosterPack = async () => {\n    if (!isAuthenticated) {\n      showMessage(\"You must be logged in to open booster packs.\", \"error\");\n      return;\n    }\n    setLoading(true); // Indicate loading while opening pack\n    setNewlyAcquiredCards([]); // Clear previous new cards display\n    setLastOpenedPackType('');\n    setPrePackUnlockedIds(unlockedCollectionIds); // Store current collection for duplicate check\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/deck/open_booster`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password: password\n        }) // Backend determines pack size\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to open booster pack.');\n      }\n      setLastOpenedPackType(data.pack_type);\n      if (data.new_cards && data.new_cards.length > 0) {\n        // Update the unlockedCollectionIds state with the new IDs (now including duplicates)\n        setUnlockedCollectionIds(data.updated_unlocked_collection_ids || []);\n        setNewlyAcquiredCards(data.new_cards); // Store new cards for display\n        showMessage(`You opened a ${data.pack_type} and acquired ${data.new_cards.length} cards!`, 'success');\n      } else {\n        showMessage(data.message || \"No new cards were found in the booster pack.\", 'info');\n      }\n    } catch (err) {\n      console.error('Error opening booster pack:', err);\n      showMessage(`Failed to open booster pack: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- Deck Building Logic: Add Card ---\n  const handleAddCardToDeck = useCallback(card => {\n    if (!isAuthenticated) {\n      showMessage(\"You must be logged in to build a deck.\", \"error\");\n      return;\n    }\n    if (activeDeckInstances.length >= maxDeckSize) {\n      showMessage('Deck is full! Remove cards to add new ones.', 'error');\n      return;\n    }\n    const ownedCopiesOfThisCard = unlockedCollectionIds.filter(id => id === card.id).length;\n    const copiesInActiveDeck = activeDeckInstances.filter(c => c.id === card.id).length;\n    if (copiesInActiveDeck >= ownedCopiesOfThisCard) {\n      showMessage(`You have already added all owned copies of ${card.name} to your deck. Open more booster packs to get more!`, 'error');\n      return;\n    }\n    const cantripCountInDeck = activeDeckInstances.filter(c => c.type === 'Cantrip').length;\n    if (card.type !== 'Cantrip' && cantripCountInDeck === 0 && activeDeckInstances.length === 0) {\n      showMessage('Your deck must contain at least one Cantrip! Add a Cantrip first.', 'error');\n      return;\n    }\n\n    // Add a new instance of the card to the active deck\n    setActiveDeckInstances(prev => [...prev, {\n      ...card,\n      instance_id: uuidv4(),\n      // Assign a unique ID for this specific copy in the active deck\n      current_uses: card.default_uses_per_rest\n    }]);\n    showMessage('Card added to your deck!', 'success');\n  }, [isAuthenticated, maxDeckSize, activeDeckInstances, unlockedCollectionIds, showMessage]);\n\n  // --- Deck Building Logic: Remove Card ---\n  const handleRemoveCardFromDeck = useCallback(instance_id => {\n    const updatedDeck = activeDeckInstances.filter(card => card.instance_id !== instance_id);\n    const cantripCount = updatedDeck.filter(c => c.type === 'Cantrip').length;\n    if (cantripCount === 0 && updatedDeck.length > 0) {\n      showMessage('Your deck must contain at least one Cantrip! You cannot remove the last one.', 'error');\n      return;\n    }\n    setActiveDeckInstances(updatedDeck);\n    showMessage('Card removed from deck.', 'success');\n  }, [activeDeckInstances, showMessage]);\n\n  // --- Card Usage Logic: Mark Card as Used ---\n  const handleMarkCardUsed = useCallback(async instance_id => {\n    const cardToUse = activeDeckInstances.find(card => card.instance_id === instance_id);\n    if (!cardToUse) return;\n    if (cardToUse.current_uses > 0) {\n      setActiveDeckInstances(prev => prev.map(card => card.instance_id === instance_id ? {\n        ...card,\n        current_uses: card.current_uses - 1\n      } : card));\n\n      // Notify backend about the card usage for logging purposes.\n      try {\n        const response = await fetch(`${API_BASE_URL}/card_used`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            name: cardToUse.name,\n            // Use 'name' to match backend's 'card_name' expectation\n            type: cardToUse.type,\n            // Use 'type' to match backend's 'card_type' expectation\n            deck_card_id: cardToUse.instance_id\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log('Backend notification:', data.message);\n        console.log('Simulated System Log Entry from Backend:', data.log_entry);\n      } catch (err) {\n        showMessage('Failed to notify backend of card usage for logging: ' + err.message, 'error');\n        console.error('Error sending card used notification:', err);\n      }\n    } else {\n      showMessage(`\"${cardToUse.name}\" has no uses left! It needs a long rest.`, 'error');\n    }\n  }, [activeDeckInstances, showMessage]);\n\n  // --- Card Usage Logic: Reset Card Uses (Long Rest) ---\n  const handleResetCardUses = useCallback(instance_id => {\n    setActiveDeckInstances(prev => prev.map(card => card.instance_id === instance_id ? {\n      ...card,\n      current_uses: card.default_uses_per_rest\n    } : card));\n    showMessage('Card uses reset!', 'success');\n  }, [showMessage]);\n\n  // Filter available cards based on what the player has unlocked\n  // And also count how many copies of each unique card ID the player owns\n  const filteredAvailableCardsWithCounts = allCards.filter(card => unlockedCollectionIds.includes(card.id)) // Only show cards of types user has unlocked\n  .reduce((acc, card) => {\n    // Group by card ID and count occurrences\n    if (!acc[card.id]) {\n      const count = unlockedCollectionIds.filter(id => id === card.id).length;\n      acc[card.id] = {\n        ...card,\n        owned_copies: count\n      };\n    }\n    return acc;\n  }, {});\n  const uniqueUnlockedCards = Object.values(filteredAvailableCardsWithCounts);\n\n  // --- DM/Session Functions ---\n\n  // Effect to fetch DM sessions whenever DM mode is active and player ID is set\n  useEffect(() => {\n    if (isAuthenticated && isDMMode && playerId && activeDmTab === 'my_sessions') {\n      fetchMyDMSessions();\n    }\n  }, [isAuthenticated, isDMMode, playerId, activeDmTab]); // Dependency on activeDmTab to refetch when switching to 'my_sessions'\n\n  const handleCreateSession = async () => {\n    if (!playerId || !password) {\n      showMessage('You must be logged in to create a session.', 'error');\n      return;\n    }\n    if (!sessionNameInput) {\n      showMessage('Session name is required.', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/dm/create_session`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password: password,\n          session_name: sessionNameInput\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to create session.');\n      }\n      showMessage(`Session \"${data.session_name}\" created with code: ${data.session_code}`, 'success');\n      setSessionNameInput(''); // Clear input\n      fetchMyDMSessions(); // Refresh DM's session list\n    } catch (err) {\n      console.error('Error creating session:', err);\n      showMessage(`Failed to create session: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleJoinSession = async () => {\n    if (!playerId || !password) {\n      showMessage('You must be logged in to join a session.', 'error');\n      return;\n    }\n    if (!sessionCodeInput) {\n      showMessage('Session code is required.', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/player/join_session`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password: password,\n          session_code: sessionCodeInput\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to join session.');\n      }\n      showMessage(data.message, 'success');\n      setSessionCodeInput(''); // Clear input\n      // Player might need to refresh their own view if we implement a \"my joined sessions\" for players\n    } catch (err) {\n      console.error('Error joining session:', err);\n      showMessage(`Failed to join session: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchMyDMSessions = useCallback(async () => {\n    if (!isAuthenticated || !playerId || !password) return;\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/dm/my_sessions`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password: password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to fetch your sessions.');\n      }\n      setDmSessions(data.sessions || []);\n    } catch (err) {\n      console.error('Error fetching DM sessions:', err);\n      showMessage(`Failed to fetch DM sessions: ${err.message}`, 'error');\n      setDmSessions([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [isAuthenticated, playerId, password, showMessage]);\n  const fetchPlayersInSession = useCallback(async sessionId => {\n    if (!isAuthenticated || !playerId || !password || !sessionId) return;\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/dm/sessions/${sessionId}/players`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password: password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to fetch players for this session.');\n      }\n      setPlayersInSelectedDmSession(data.players || []);\n    } catch (err) {\n      console.error('Error fetching players in session:', err);\n      showMessage(`Failed to fetch players: ${err.message}`, 'error');\n      setPlayersInSelectedDmSession([]);\n    } finally {\n      setLoading(false);\n    }\n  }, [isAuthenticated, playerId, password, showMessage]);\n  const handleSelectDmSession = session => {\n    setSelectedDmSession(session);\n    fetchPlayersInSession(session.session_id);\n    setSelectedPlayerForDMView(null); // Clear any previously selected player\n    setSelectedPlayerDMData(null);\n    setActiveDmTab('my_sessions'); // Stay on my sessions tab, but show players for selected session\n  };\n  const handleViewPlayerCards = player_id_to_view => {\n    const player = playersInSelectedDmSession.find(p => p.player_id === player_id_to_view);\n    if (player) {\n      setSelectedPlayerForDMView(player.player_id);\n      setSelectedPlayerDMData(player.data); // This is the full player data including deck/collection\n      setActiveDmTab('view_player'); // Switch to a sub-tab to view player details\n    } else {\n      showMessage(\"Could not find player data for viewing.\", \"error\");\n    }\n  };\n\n  // Helper to map card IDs from player data back to full card objects from allCards\n  const getFullCardDetails = cardId => {\n    return allCards.find(card => card.id === cardId);\n  };\n\n  // --- Main Component Render ---\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: AppStyles\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1092,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"app-title\",\n        children: \"Spell Trading Cards Manager\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1094,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Player ID\",\n          value: playerId,\n          onChange: e => setPlayerId(e.target.value),\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1098,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLoginAndLoadDeck,\n          disabled: loading,\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCreateAccount,\n          disabled: loading,\n          children: \"Create Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1113,\n          columnNumber: 21\n        }, this), isAuthenticated && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSaveDeck,\n          disabled: loading,\n          children: \"Save Deck\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1114,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1097,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stats-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Level: \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: characterLevel,\n            onChange: e => setCharacterLevel(Math.max(1, parseInt(e.target.value) || 1)),\n            min: \"1\",\n            max: \"20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1119,\n            columnNumber: 35\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"WIS Mod: \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: wisMod,\n            onChange: e => setWisMod(parseInt(e.target.value) || 0)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1120,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"INT Mod: \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: intMod,\n            onChange: e => setIntMod(parseInt(e.target.value) || 0)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1121,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"CHA Mod: \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: chaMod,\n            onChange: e => setChaMod(parseInt(e.target.value) || 0)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1122,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Max Deck Size: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"highlight\",\n            children: maxDeckSize\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1123,\n            columnNumber: 39\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1123,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1118,\n        columnNumber: 17\n      }, this), message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message-box ${message.type}`,\n        children: message.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1127,\n        columnNumber: 34\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-navigation\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `tab-item ${activeTab === 'available' ? 'active' : ''}`,\n          onClick: () => setActiveTab('available'),\n          children: [\"Available Spells (\", uniqueUnlockedCards.length, \" Types / \", unlockedCollectionIds.length, \" Total Owned)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `tab-item ${activeTab === 'deck' ? 'active' : ''}`,\n          onClick: () => setActiveTab('deck'),\n          children: [\"Your Deck (\", activeDeckInstances.length, \"/\", maxDeckSize, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1137,\n          columnNumber: 21\n        }, this), isAuthenticated && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `tab-item ${activeTab === 'dm_screen' ? 'active' : ''}`,\n          onClick: () => {\n            setActiveTab('dm_screen');\n            setSelectedDmSession(null);\n            setSelectedPlayerForDMView(null);\n            setSelectedPlayerDMData(null);\n            setActiveDmTab('my_sessions');\n          },\n          children: \"DM Screen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1144,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content\",\n        children: [activeTab === 'available' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-collection-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"panel-title\",\n            children: \"Available Spells\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1158,\n            columnNumber: 29\n          }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"empty-message\",\n            children: \"Loading cards...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1159,\n            columnNumber: 41\n          }, this), !isAuthenticated && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pre-login-message\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Log in to see your available spells.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1162,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1161,\n            columnNumber: 33\n          }, this), isAuthenticated && !loading && uniqueUnlockedCards.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-list\",\n            children: uniqueUnlockedCards.map(card => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-item available-card\",\n              onClick: () => handleAddCardToDeck(card),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: `https://placehold.co/100x150/a8dadc/ffffff?text=${card.name.split('.')[0].replace('_', '%20')}`,\n                alt: card.name,\n                className: \"card-image\",\n                onError: e => {\n                  e.target.onerror = null;\n                  e.target.src = \"https://placehold.co/100x150/cccccc/333333?text=Image%20Error\";\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1169,\n                columnNumber: 45\n              }, this), card.backlash_effect && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-backlash\",\n                children: [\"Backlash: \", card.backlash_effect]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1176,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"card-name\",\n                children: [card.name, \" (\", card.type, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1178,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-description\",\n                children: card.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1179,\n                columnNumber: 45\n              }, this), card.effect && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-effect\",\n                children: [\"Effect: \", card.effect]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1181,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-meta\",\n                children: [\"Rarity: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: card.rarity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1183,\n                  columnNumber: 78\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1183,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-meta\",\n                children: [\"Owned Copies: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: card.owned_copies\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1184,\n                  columnNumber: 84\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1184,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => {\n                  e.stopPropagation();\n                  handleAddCardToDeck(card);\n                } // Stop propagation to prevent parent onClick\n                // Disable button if deck is full OR if all owned copies are already in the deck\n                ,\n                disabled: activeDeckInstances.length >= maxDeckSize || activeDeckInstances.filter(c => c.id === card.id).length >= card.owned_copies,\n                className: \"select-button\",\n                children: \"Add to Deck\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1185,\n                columnNumber: 45\n              }, this)]\n            }, card.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1168,\n              columnNumber: 41\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1166,\n            columnNumber: 33\n          }, this), isAuthenticated && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"booster-pack-section\",\n            children: [uniqueUnlockedCards.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"empty-message\",\n              children: \"You haven't unlocked any unique spell types yet! Open a booster pack to get started.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1202,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleOpenBoosterPack,\n              disabled: loading,\n              className: \"booster-button\",\n              children: \"Open Booster Pack\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1204,\n              columnNumber: 37\n            }, this), newlyAcquiredCards.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"new-cards-display\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [\"Newly Acquired Cards from \", lastOpenedPackType, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1213,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: newlyAcquiredCards.map((card, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: [\" \", card.name, \" (\", card.type, \", \", card.rarity, \")\", prePackUnlockedIds.includes(card.id) && /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \" (Duplicate)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1218,\n                    columnNumber: 98\n                  }, this)]\n                }, card.id + \"-new-\" + index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1216,\n                  columnNumber: 53\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1214,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1212,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1200,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1157,\n          columnNumber: 25\n        }, this), activeTab === 'deck' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"built-deck-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"panel-title\",\n            children: [\"Your Deck (\", activeDeckInstances.length, \"/\", maxDeckSize, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1232,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"deck-list\",\n            children: isAuthenticated ? activeDeckInstances.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"empty-message\",\n              children: \"Select cards from the \\\"Available Spells\\\" tab to build your deck!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1236,\n              columnNumber: 41\n            }, this) : activeDeckInstances.map(card => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-item deck-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: `https://placehold.co/100x150/a8dadc/ffffff?text=${card.name.split('.')[0].replace('_', '%20')}`,\n                alt: card.name,\n                className: \"card-image\",\n                onError: e => {\n                  e.target.onerror = null;\n                  e.target.src = \"https://placehold.co/100x150/cccccc/333333?text=Image%20Error\";\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1240,\n                columnNumber: 49\n              }, this), card.backlash_effect && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-backlash\",\n                children: [\"Backlash: \", card.backlash_effect]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1247,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"card-name\",\n                children: [card.name, \" (\", card.type, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1249,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-description\",\n                children: card.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1250,\n                columnNumber: 49\n              }, this), card.effect && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-effect\",\n                children: [\"Effect: \", card.effect]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1252,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-meta\",\n                children: [\"Rarity: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: card.rarity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1254,\n                  columnNumber: 82\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1254,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-uses\",\n                children: [\"Uses Left: \", card.current_uses, \"/\", card.default_uses_per_rest]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1255,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleMarkCardUsed(card.instance_id),\n                  disabled: card.current_uses <= 0,\n                  className: \"use-button\",\n                  children: \"Use\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1257,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleResetCardUses(card.instance_id),\n                  className: \"reset-button\",\n                  children: \"Reset Uses\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1264,\n                  columnNumber: 53\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleRemoveCardFromDeck(card.instance_id),\n                  className: \"remove-button\",\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1270,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1256,\n                columnNumber: 49\n              }, this)]\n            }, card.instance_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1239,\n              columnNumber: 45\n            }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pre-login-message\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Please log in to load your character and spell deck.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1282,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Once logged in, your deck and stats will appear here.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1283,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1281,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1233,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1231,\n          columnNumber: 25\n        }, this), isAuthenticated && activeTab === 'dm_screen' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dm-screen-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"panel-title\",\n            children: \"DM Screen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1293,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dm-sub-nav\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `dm-sub-nav-item ${activeDmTab === 'create_session' ? 'active' : ''}`,\n              onClick: () => {\n                setActiveDmTab('create_session');\n                setSelectedDmSession(null);\n                setSelectedPlayerForDMView(null);\n              },\n              children: \"Create Session\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1296,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `dm-sub-nav-item ${activeDmTab === 'my_sessions' ? 'active' : ''}`,\n              onClick: () => {\n                setActiveDmTab('my_sessions');\n                setSelectedPlayerForDMView(null);\n              },\n              children: \"My Sessions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1302,\n              columnNumber: 33\n            }, this), selectedPlayerForDMView && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `dm-sub-nav-item ${activeDmTab === 'view_player' ? 'active' : ''}`,\n              onClick: () => setActiveDmTab('view_player'),\n              children: [\"Viewing: \", selectedPlayerForDMView]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1309,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1295,\n            columnNumber: 29\n          }, this), activeDmTab === 'create_session' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dm-section-panel\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Create New Game Session\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1321,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Session Name (e.g., 'Dragon's Breath Campaign')\",\n              value: sessionNameInput,\n              onChange: e => setSessionNameInput(e.target.value),\n              disabled: loading,\n              style: {\n                maxWidth: '400px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1322,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleCreateSession,\n              disabled: loading,\n              children: \"Generate Session Code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1330,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"empty-message\",\n              children: \"Once created, share the 6-character session code with your players!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1333,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1320,\n            columnNumber: 33\n          }, this), activeDmTab === 'my_sessions' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dm-section-panel\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Your Game Sessions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1342,\n              columnNumber: 37\n            }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"empty-message\",\n              children: \"Loading sessions...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1344,\n              columnNumber: 41\n            }, this) : dmSessions.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"empty-message\",\n              children: \"You haven't created any sessions yet.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1346,\n              columnNumber: 41\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dm-session-list\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: dmSessions.map(session => /*#__PURE__*/_jsxDEV(\"li\", {\n                  onClick: () => handleSelectDmSession(session),\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: session.session_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1353,\n                      columnNumber: 61\n                    }, this), \" (Code: \", session.session_code, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1352,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Players: \", playersInSelectedDmSession.filter(p => p.session_id === session.session_id).length]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1355,\n                    columnNumber: 57\n                  }, this), \" \"]\n                }, session.session_id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1351,\n                  columnNumber: 53\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1349,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1348,\n              columnNumber: 41\n            }, this), selectedDmSession && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  marginTop: '2rem'\n                },\n                children: [\"Players in \\\"\", selectedDmSession.session_name, \"\\\"\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1364,\n                columnNumber: 45\n              }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"empty-message\",\n                children: \"Loading players...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1366,\n                columnNumber: 49\n              }, this) : playersInSelectedDmSession.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"empty-message\",\n                children: \"No players have joined this session yet.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1368,\n                columnNumber: 49\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dm-player-list\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  children: playersInSelectedDmSession.map(player => /*#__PURE__*/_jsxDEV(\"li\", {\n                    onClick: () => handleViewPlayerCards(player.player_id),\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"dm-player-id\",\n                      children: player.player_id\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1374,\n                      columnNumber: 65\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"select-button\",\n                      children: \"View Cards\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1375,\n                      columnNumber: 65\n                    }, this)]\n                  }, player.player_id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1373,\n                    columnNumber: 61\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1371,\n                  columnNumber: 53\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1370,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1341,\n            columnNumber: 33\n          }, this), activeDmTab === 'view_player' && selectedPlayerDMData && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dm-section-panel\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"Viewing Player: \", selectedPlayerForDMView]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1389,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveDmTab('my_sessions'),\n              className: \"select-button\",\n              style: {\n                marginBottom: '1rem'\n              },\n              children: \"Back to Session Players\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1390,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dm-player-view-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dm-player-stats-panel\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Player Stats\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1396,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Level: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: selectedPlayerDMData.character_level\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1397,\n                    columnNumber: 55\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1397,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"WIS Mod: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: selectedPlayerDMData.wis_mod\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1398,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1398,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"INT Mod: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: selectedPlayerDMData.int_mod\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1399,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1399,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"CHA Mod: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: selectedPlayerDMData.cha_mod\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1400,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1400,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1395,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dm-player-deck-panel\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: [\"Active Deck (\", selectedPlayerDMData.active_deck_instances.length, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1404,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-list\",\n                  children: selectedPlayerDMData.active_deck_instances.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"empty-message no-hover\",\n                    children: \"No cards in active deck.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1407,\n                    columnNumber: 53\n                  }, this) : selectedPlayerDMData.active_deck_instances.map(card => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card-item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: `https://placehold.co/100x150/a8dadc/ffffff?text=${card.name.split('.')[0].replace('_', '%20')}`,\n                      alt: card.name,\n                      className: \"card-image\",\n                      onError: e => {\n                        e.target.onerror = null;\n                        e.target.src = \"https://placehold.co/100x150/cccccc/333333?text=Image%20Error\";\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1411,\n                      columnNumber: 62\n                    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                      className: \"card-name\",\n                      children: card.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1417,\n                      columnNumber: 61\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"card-uses\",\n                      children: [\"Uses: \", card.current_uses, \"/\", card.default_uses_per_rest]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1418,\n                      columnNumber: 61\n                    }, this)]\n                  }, card.instance_id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1410,\n                    columnNumber: 57\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1405,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1403,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dm-player-deck-panel\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: [\"Owned Collection (\", selectedPlayerDMData.unlocked_collection_ids.length, \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1426,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-list\",\n                  children: selectedPlayerDMData.unlocked_collection_ids.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"empty-message no-hover\",\n                    children: \"No cards owned.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1429,\n                    columnNumber: 53\n                  }, this) :\n                  // Display unique cards from collection, with count\n                  Object.entries(selectedPlayerDMData.unlocked_collection_ids.reduce((acc, cardId) => {\n                    acc[cardId] = (acc[cardId] || 0) + 1;\n                    return acc;\n                  }, {})).map(([cardId, count]) => {\n                    const fullCard = getFullCardDetails(cardId);\n                    return fullCard ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"card-item\",\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: `https://placehold.co/100x150/a8dadc/ffffff?text=${fullCard.name.split('.')[0].replace('_', '%20')}`,\n                        alt: fullCard.name,\n                        className: \"card-image\",\n                        onError: e => {\n                          e.target.onerror = null;\n                          e.target.src = \"https://placehold.co/100x150/cccccc/333333?text=Image%20Error\";\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1439,\n                        columnNumber: 66\n                      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                        className: \"card-name\",\n                        children: fullCard.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1445,\n                        columnNumber: 65\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"card-meta\",\n                        children: [\"Owned: \", count]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1446,\n                        columnNumber: 65\n                      }, this)]\n                    }, cardId, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1438,\n                      columnNumber: 61\n                    }, this) : null;\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1427,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1425,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1394,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1388,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1292,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1154,\n        columnNumber: 17\n      }, this), isAuthenticated && activeTab !== 'dm_screen' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dm-section-panel\",\n        style: {\n          marginTop: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Join a Game Session\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1463,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter Session Code\",\n          value: sessionCodeInput,\n          onChange: e => setSessionCodeInput(e.target.value),\n          disabled: loading,\n          style: {\n            maxWidth: '250px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1464,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleJoinSession,\n          disabled: loading,\n          children: \"Join Session\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1472,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1462,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1093,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"+9Dtmks7+IGhPugxpjBHCCPvVBQ=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","v4","uuidv4","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","AppStyles","App","_s","allCards","setAllCards","characterLevel","setCharacterLevel","wisMod","setWisMod","intMod","setIntMod","chaMod","setChaMod","maxDeckSize","setMaxDeckSize","activeDeckInstances","setActiveDeckInstances","unlockedCollectionIds","setUnlockedCollectionIds","error","setError","playerId","setPlayerId","password","setPassword","isAuthenticated","setIsAuthenticated","message","setMessage","text","type","loading","setLoading","activeTab","setActiveTab","newlyAcquiredCards","setNewlyAcquiredCards","lastOpenedPackType","setLastOpenedPackType","prePackUnlockedIds","setPrePackUnlockedIds","isDMMode","setIsDMMode","sessionNameInput","setSessionNameInput","sessionCodeInput","setSessionCodeInput","dmSessions","setDmSessions","selectedDmSession","setSelectedDmSession","playersInSelectedDmSession","setPlayersInSelectedDmSession","selectedPlayerForDMView","setSelectedPlayerForDMView","selectedPlayerDMData","setSelectedPlayerDMData","activeDmTab","setActiveDmTab","showMessage","duration","setTimeout","handleCreateAccount","response","fetch","method","headers","body","JSON","stringify","player_id","data","json","ok","Error","err","console","handleLoginAndLoadDeck","active_deck_instances","unlocked_collection_ids","character_level","undefined","wis_mod","int_mod","cha_mod","handleSaveDeck","fetchAllCards","cardsResponse","status","cardsData","calculateDeckSize","max_deck_size","isNaN","handleOpenBoosterPack","pack_type","new_cards","length","updated_unlocked_collection_ids","handleAddCardToDeck","card","ownedCopiesOfThisCard","filter","id","copiesInActiveDeck","c","name","cantripCountInDeck","prev","instance_id","current_uses","default_uses_per_rest","handleRemoveCardFromDeck","updatedDeck","cantripCount","handleMarkCardUsed","cardToUse","find","map","deck_card_id","log","log_entry","handleResetCardUses","filteredAvailableCardsWithCounts","includes","reduce","acc","count","owned_copies","uniqueUnlockedCards","Object","values","fetchMyDMSessions","handleCreateSession","session_name","session_code","handleJoinSession","sessions","fetchPlayersInSession","sessionId","players","handleSelectDmSession","session","session_id","handleViewPlayerCards","player_id_to_view","player","p","getFullCardDetails","cardId","children","fileName","_jsxFileName","lineNumber","columnNumber","className","placeholder","value","onChange","e","target","disabled","onClick","Math","max","parseInt","min","src","split","replace","alt","onError","onerror","backlash_effect","description","effect","rarity","stopPropagation","index","style","maxWidth","marginTop","marginBottom","entries","fullCard","_c","$RefreshReg$"],"sources":["C:/Users/aaron/DND_Spell_Cards/Spell_Card_Game/DND_Spell_Cards_online/Online_DM_additions/frontend - Copy/src/App.js"],"sourcesContent":["// dnd-spell-cards-app/frontend/src/App.js\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { v4 as uuidv4 } from 'uuid'; // Import uuid for unique keys for deck card instances\r\n\r\n// IMPORTANT: Update this to your VM's Public IP address (or domain name if configured)\r\nconst API_BASE_URL = 'http://193.122.147.91:5000/api';\r\n\r\n// Inline CSS for self-contained component\r\nconst AppStyles = `\r\n    /* Import Google Fonts for a D&D feel */\r\n    @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Merriweather:wght@400;700&display=swap');\r\n\r\n    body {\r\n        background-color: #3b2f2f; /* Dark brown background, like a closed grimoire */\r\n        font-family: 'Merriweather', serif; /* Readable serif for body text */\r\n        color: #5a4b4b; /* Darker, faded text */\r\n        margin: 0;\r\n        padding: 0;\r\n        line-height: 1.6;\r\n    }\r\n\r\n    .App {\r\n        display: flex;\r\n        flex-direction: column;\r\n        min-height: 100vh;\r\n        align-items: center;\r\n        padding: 1.5rem; /* Increased padding */\r\n        box-sizing: border-box;\r\n        /* --- NEW WOODEN FLOOR TEXTURE --- */\r\n        background-image: url('/images/wooden-floor.jpg');\r\n        background-size: cover;\r\n        background-position: center; /* Center the background image */\r\n        background-attachment: fixed;\r\n        border: 10px solid #4a3e3c; /* Thick, dark border for the \"book\" effect */\r\n        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); /* Deep shadow for depth */\r\n        margin: 1rem; /* Margin to show body background */\r\n        border-radius: 1rem; /* Slightly rounded edges for the book */\r\n    }\r\n\r\n    .app-title {\r\n        font-family: 'Cinzel', serif; /* Ornate font for title */\r\n        color: #8c6e4e; /* Gold/parchment color */\r\n        text-align: center;\r\n        margin-bottom: 2rem;\r\n        font-size: 3.2rem; /* Larger title */\r\n        font-weight: 700;\r\n        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6); /* Text shadow for depth */\r\n    }\r\n\r\n    .login-container, .stats-container, .dm-section-panel {\r\n        background: #6a5d5a; /* Muted stone/dark wood color */\r\n        color: #f5f5dc; /* Off-white for readability */\r\n        padding: 1.8rem; /* More padding */\r\n        margin-bottom: 2rem;\r\n        border-radius: 0.8rem;\r\n        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4), 0 4px 15px rgba(0, 0, 0, 0.3); /* Inset shadow for carved look */\r\n        display: flex;\r\n        gap: 1.2rem;\r\n        align-items: center;\r\n        justify-content: center;\r\n        flex-wrap: wrap;\r\n        width: 100%;\r\n        max-width: 1000px; /* Slightly narrower */\r\n        border: 2px solid #4a3e3c; /* Matching dark border */\r\n    }\r\n\r\n    .login-container input, .dm-section-panel input {\r\n        padding: 0.8rem 1rem;\r\n        border-radius: 0.5rem;\r\n        border: 1px solid #8c6e4e; /* Goldish border */\r\n        background: #e9dcc9; /* Parchment background */\r\n        color: #3b2f2f; /* Dark text */\r\n        font-family: 'Merriweather', serif;\r\n        font-size: 1.1rem;\r\n        flex-grow: 1;\r\n        max-width: 200px;\r\n    }\r\n\r\n    .login-container button, .use-button, .reset-button, .remove-button, .select-button, .booster-button, .dm-section-panel button {\r\n        background-color: #8c6e4e; /* Gold/bronze button */\r\n        color: #f5f5dc; /* Off-white text */\r\n        padding: 0.8rem 1.5rem;\r\n        border: 2px solid #5a4b4b; /* Darker edge */\r\n        border-radius: 0.5rem;\r\n        cursor: pointer;\r\n        font-weight: bold;\r\n        transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;\r\n        white-space: nowrap;\r\n        font-family: 'Cinzel', serif; /* Thematic button font */\r\n        text-transform: uppercase;\r\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);\r\n    }\r\n\r\n    .login-container button:hover, .select-button:hover:not(:disabled), .booster-button:hover:not(:disabled), .dm-section-panel button:hover:not(:disabled) {\r\n        background-color: #a38b6d; /* Lighter gold on hover */\r\n        transform: translateY(-3px); /* More pronounced lift */\r\n        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);\r\n    }\r\n\r\n    .select-button:disabled, .use-button:disabled, .booster-button:disabled, .dm-section-panel button:disabled {\r\n        background-color: #5a4b4b; /* Muted disabled color */\r\n        color: #a0a0a0;\r\n        cursor: not-allowed;\r\n        transform: none;\r\n        box-shadow: none;\r\n    }\r\n\r\n    .stats-container {\r\n        background: #5a4b4b; /* Darker tone for stats */\r\n        color: #f5f5dc;\r\n        padding: 1.8rem;\r\n    }\r\n\r\n    .stats-container label {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 0.6rem;\r\n        font-weight: 700;\r\n        font-family: 'Cinzel', serif;\r\n    }\r\n\r\n    .stats-container input {\r\n        width: 5rem; /* Wider input */\r\n        padding: 0.4rem;\r\n        border-radius: 0.4rem;\r\n        border: 1px solid #8c6e4e;\r\n        background: #e9dcc9;\r\n        color: #3b2f2f;\r\n        text-align: center;\r\n        font-family: 'Merriweather', serif;\r\n    }\r\n\r\n    .stats-container p {\r\n        margin: 0;\r\n        padding: 0;\r\n        font-size: 1.1rem;\r\n        font-weight: 700;\r\n    }\r\n\r\n    .message-box {\r\n        position: fixed;\r\n        top: 2rem; /* Lowered position */\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n        padding: 0.9rem 1.8rem;\r\n        border-radius: 0.6rem;\r\n        font-weight: bold;\r\n        z-index: 1000;\r\n        animation: fadein 0.5s, fadeout 0.5s 4.5s; /* Longer display */\r\n        text-align: center;\r\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);\r\n        font-family: 'Cinzel', serif;\r\n        text-transform: uppercase;\r\n    }\r\n\r\n    .message-box.success {\r\n        background-color: #488c5d; /* Darker green */\r\n        color: white;\r\n    }\r\n\r\n    .message-box.error {\r\n        background-color: #a33b3b; /* Darker red */\r\n        color: white;\r\n    }\r\n\r\n    .message-box.info {\r\n        background-color: #6a5d5a;\r\n        color: #f5f5dc;\r\n    }\r\n\r\n    @keyframes fadein {\r\n        from { opacity: 0; transform: translateX(-50%) translateY(-20px); }\r\n        to   { opacity: 1; transform: translateX(-50%) translateY(0); }\r\n    }\r\n\r\n    @keyframes fadeout {\r\n        from { opacity: 1; transform: translateX(-50%) translateY(0); }\r\n        to   { opacity: 0; transform: translateX(-50%) translateY(-20px); }\r\n    }\r\n\r\n    .tab-navigation {\r\n        display: flex;\r\n        justify-content: center;\r\n        width: 100%;\r\n        max-width: 1000px;\r\n        margin-bottom: 2rem;\r\n        background-color: #5a4b4b; /* Darker tab background */\r\n        border-radius: 0.8rem;\r\n        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4);\r\n        overflow: hidden;\r\n        border: 2px solid #4a3e3c;\r\n    }\r\n\r\n    .tab-item {\r\n        flex: 1;\r\n        text-align: center;\r\n        padding: 1.2rem 1.8rem; /* More generous padding */\r\n        cursor: pointer;\r\n        font-weight: bold;\r\n        color: #e9dcc9; /* Parchment text */\r\n        background-color: #5a4b4b;\r\n        transition: background-color 0.3s ease, color 0.3s ease;\r\n        border-bottom: 4px solid transparent; /* Thicker active indicator */\r\n        font-family: 'Cinzel', serif;\r\n        text-transform: uppercase;\r\n    }\r\n\r\n    .tab-item:hover:not(.active) {\r\n        background-color: #6a5d5a; /* Slightly lighter on hover */\r\n    }\r\n\r\n    .tab-item.active {\r\n        background-color: #8c6e4e; /* Gold active tab */\r\n        color: white;\r\n        border-bottom-color: #a38b6d; /* Lighter gold accent */\r\n    }\r\n\r\n    .main-content {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        gap: 2rem; /* Increased gap */\r\n        width: 100%;\r\n        max-width: 1000px;\r\n        flex: 1;\r\n    }\r\n\r\n    .card-collection-panel, .built-deck-panel {\r\n        background: #e9dcc9; /* Parchment background for panels */\r\n        border-radius: 0.8rem;\r\n        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\r\n        padding: 2rem; /* More padding */\r\n        flex: 1;\r\n        min-width: 320px; /* Slightly larger min-width */\r\n        display: flex;\r\n        flex-direction: column;\r\n        border: 2px solid #8c6e4e; /* Gold border */\r\n    }\r\n\r\n    .panel-title {\r\n        font-family: 'Cinzel', serif;\r\n        text-align: center;\r\n        color: #3b2f2f; /* Dark text for title */\r\n        margin-top: 0;\r\n        margin-bottom: 2rem;\r\n        font-size: 2.2rem; /* Larger panel title */\r\n        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);\r\n    }\r\n\r\n    .card-list, .deck-list {\r\n        display: grid;\r\n        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); /* Larger cards */\r\n        gap: 1.5rem; /* Increased gap */\r\n        flex-grow: 1;\r\n    }\r\n\r\n    .card-item {\r\n        background: #fdf6e6; /* Lighter parchment for individual cards */\r\n        border: 1px solid #d3c4a2; /* Faded parchment border */\r\n        border-radius: 0.6rem;\r\n        padding: 1.2rem;\r\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\r\n        transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n        display: flex;\r\n        flex-direction: column;\r\n        text-align: center;\r\n        font-family: 'Merriweather', serif;\r\n    }\r\n\r\n    .card-item:hover.available-card {\r\n        transform: translateY(-7px); /* More dramatic lift */\r\n        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.25);\r\n        cursor: pointer;\r\n    }\r\n\r\n    .card-item.deck-card {\r\n        background: #e9dcc9; /* Muted parchment for deck cards */\r\n        border: 1px solid #8c6e4e; /* Goldish border for deck cards */\r\n    }\r\n\r\n    .card-image {\r\n        max-width: 100%;\r\n        height: auto;\r\n        border-radius: 0.4rem;\r\n        margin-bottom: 1rem;\r\n        border: 1px solid #8c6e4e; /* Gold frame for image */\r\n    }\r\n    \r\n    .card-backlash {\r\n        font-family: 'Merriweather', serif;\r\n        font-size: 0.85rem;\r\n        color: #a33b3b; /* Red color for backlash effect */\r\n        margin-bottom: 0.5rem;\r\n        font-weight: bold;\r\n        text-transform: uppercase;\r\n    }\r\n\r\n    .card-name {\r\n        font-family: 'Cinzel', serif;\r\n        font-weight: 700;\r\n        font-size: 1.25rem;\r\n        color: #3b2f2f;\r\n        margin-bottom: 0.6rem;\r\n    }\r\n\r\n    .card-type {\r\n        font-style: italic;\r\n        color: #5a4b4b;\r\n        margin-bottom: 0.7rem;\r\n        font-size: 0.95rem;\r\n    }\r\n\r\n    .card-description {\r\n        font-size: 0.9rem;\r\n        color: #4a3e3c;\r\n        flex-grow: 1;\r\n        margin-bottom: 0.7rem; /* Adjusted margin */\r\n    }\r\n\r\n    .card-effect {\r\n        font-size: 0.9rem;\r\n        color: #4a6d8c; /* Blue color for effect */\r\n        margin-bottom: 0.7rem; /* Adjusted margin */\r\n        font-style: italic;\r\n    }\r\n\r\n    .card-meta, .card-uses {\r\n        font-size: 0.85rem;\r\n        color: #5a4b4b;\r\n        margin-bottom: 0.6rem;\r\n    }\r\n    \r\n    .card-meta span {\r\n        font-weight: bold;\r\n        color: #3b2f2f;\r\n    }\r\n\r\n    .card-actions {\r\n        margin-top: 1rem;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        gap: 0.6rem;\r\n        justify-content: center;\r\n    }\r\n\r\n    .use-button {\r\n        background-color: #4a6d8c; /* Muted blue for use */\r\n        color: white;\r\n    }\r\n    .use-button:hover:not(:disabled) {\r\n        background-color: #3a5c78;\r\n        transform: translateY(-2px);\r\n    }\r\n\r\n    .reset-button {\r\n        background-color: #5a8c4a; /* Muted green for reset */\r\n        color: white;\r\n    }\r\n    .reset-button:hover {\r\n        background-color: #4a783a;\r\n        transform: translateY(-2px);\r\n    }\r\n\r\n    .remove-button {\r\n        background-color: #8c4a4a; /* Muted red for remove */\r\n        color: white;\r\n    }\r\n    .remove-button:hover {\r\n        background-color: #783a3a;\r\n        transform: translateY(-2px);\r\n    }\r\n\r\n    .empty-message, .pre-login-message {\r\n        text-align: center;\r\n        padding: 2.5rem;\r\n        background: #d3c4a2; /* Lighter parchment */\r\n        border-radius: 0.8rem;\r\n        color: #5a4b4b;\r\n        font-style: italic;\r\n        margin: 1.5rem;\r\n        border: 1px solid #8c6e4e;\r\n        box-shadow: inset 0 1px 5px rgba(0, 0, 0, 0.2);\r\n    }\r\n\r\n    .error-message {\r\n        color: #a33b3b;\r\n        background-color: #fce2e2;\r\n        border: 1px solid #a33b3b;\r\n        padding: 0.8rem;\r\n        border-radius: 0.6rem;\r\n        text-align: center;\r\n        margin-top: 1.5rem;\r\n        font-weight: bold;\r\n        font-family: 'Merriweather', serif;\r\n    }\r\n\r\n    .highlight {\r\n        color: #4a6d8c; /* Muted blue highlight */\r\n        font-weight: bold;\r\n    }\r\n\r\n    .booster-pack-section {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        margin-top: 2rem;\r\n        padding-top: 2rem;\r\n        border-top: 1px dashed #8c6e4e; /* Dashed gold separator */\r\n        width: 100%;\r\n    }\r\n\r\n    .booster-pack-section button {\r\n        margin-top: 1.5rem;\r\n    }\r\n\r\n    .new-cards-display {\r\n        margin-top: 1.5rem;\r\n        padding: 1.5rem;\r\n        background: #d3c4a2;\r\n        border-radius: 0.6rem;\r\n        text-align: center;\r\n        width: 100%;\r\n        max-width: 450px;\r\n        border: 1px solid #8c6e4e;\r\n        box-shadow: inset 0 1px 5px rgba(0, 0, 0, 0.2);\r\n        font-family: 'Merriweather', serif;\r\n    }\r\n    .new-cards-display h4 {\r\n        font-family: 'Cinzel', serif;\r\n        color: #3b2f2f;\r\n        margin-bottom: 0.8rem;\r\n        font-size: 1.2rem;\r\n    }\r\n    .new-cards-display ul {\r\n        list-style-type: none;\r\n        padding: 0;\r\n        margin: 0;\r\n    }\r\n    .new-cards-display li {\r\n        margin-bottom: 0.3rem;\r\n        color: #4a3e3c;\r\n        font-size: 0.95rem;\r\n    }\r\n\r\n    /* DM Screen Specific Styles */\r\n    .dm-screen-container {\r\n        display: flex;\r\n        flex-direction: column;\r\n        width: 100%;\r\n        max-width: 1000px;\r\n        gap: 1.5rem;\r\n    }\r\n\r\n    .dm-sub-nav {\r\n        display: flex;\r\n        justify-content: center;\r\n        background-color: #5a4b4b;\r\n        border-radius: 0.8rem;\r\n        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4);\r\n        overflow: hidden;\r\n        border: 2px solid #4a3e3c;\r\n    }\r\n\r\n    .dm-sub-nav-item {\r\n        flex: 1;\r\n        text-align: center;\r\n        padding: 1rem 1.5rem;\r\n        cursor: pointer;\r\n        font-weight: bold;\r\n        color: #e9dcc9;\r\n        background-color: #5a4b4b;\r\n        transition: background-color 0.3s ease, color 0.3s ease;\r\n        border-bottom: 3px solid transparent;\r\n        font-family: 'Cinzel', serif;\r\n        text-transform: uppercase;\r\n        font-size: 0.95rem;\r\n    }\r\n\r\n    .dm-sub-nav-item:hover:not(.active) {\r\n        background-color: #6a5d5a;\r\n    }\r\n\r\n    .dm-sub-nav-item.active {\r\n        background-color: #8c6e4e;\r\n        color: white;\r\n        border-bottom-color: #a38b6d;\r\n    }\r\n\r\n    .dm-section-panel {\r\n        flex-direction: column;\r\n        align-items: stretch;\r\n        gap: 1.5rem;\r\n        max-width: none; /* Override max-width for full panel use */\r\n    }\r\n\r\n    .dm-session-list ul, .dm-player-list ul {\r\n        list-style-type: none;\r\n        padding: 0;\r\n        margin: 0;\r\n    }\r\n\r\n    .dm-session-list li, .dm-player-list li {\r\n        background: #d3c4a2;\r\n        padding: 0.8rem 1.2rem;\r\n        margin-bottom: 0.5rem;\r\n        border-radius: 0.4rem;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        font-family: 'Merriweather', serif;\r\n        color: #3b2f2f;\r\n        box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n        cursor: pointer;\r\n        transition: background-color 0.2s ease;\r\n    }\r\n\r\n    .dm-session-list li:hover, .dm-player-list li:hover:not(.no-hover) {\r\n        background-color: #c9bda5;\r\n    }\r\n\r\n    .dm-player-id {\r\n        font-weight: bold;\r\n        color: #4a6d8c;\r\n    }\r\n\r\n    .dm-player-view-details {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        gap: 2rem;\r\n        margin-top: 1.5rem;\r\n    }\r\n\r\n    .dm-player-stats-panel, .dm-player-deck-panel {\r\n        flex: 1;\r\n        min-width: 300px;\r\n        background: #fdf6e6;\r\n        border-radius: 0.6rem;\r\n        padding: 1.5rem;\r\n        box-shadow: inset 0 1px 5px rgba(0,0,0,0.2);\r\n        border: 1px solid #8c6e4e;\r\n        color: #3b2f2f;\r\n    }\r\n    .dm-player-stats-panel h4, .dm-player-deck-panel h4 {\r\n        font-family: 'Cinzel', serif;\r\n        font-size: 1.3rem;\r\n        margin-top: 0;\r\n        margin-bottom: 1rem;\r\n        color: #3b2f2f;\r\n        text-align: center;\r\n    }\r\n    .dm-player-stats-panel p {\r\n        margin-bottom: 0.5rem;\r\n    }\r\n    .dm-player-stats-panel span {\r\n        font-weight: bold;\r\n        color: #4a6d8c;\r\n    }\r\n    \r\n    .dm-player-deck-panel .card-list {\r\n        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); /* Smaller cards for DM view */\r\n    }\r\n\r\n    /* Responsive Adjustments (ensure DM screen is also responsive) */\r\n    @media (max-width: 768px) {\r\n        .dm-sub-nav {\r\n            flex-direction: column;\r\n        }\r\n        .dm-sub-nav-item {\r\n            border-bottom: none;\r\n            border-right: 3px solid transparent;\r\n        }\r\n        .dm-sub-nav-item.active {\r\n            border-bottom-color: transparent;\r\n            border-right-color: #a38b6d;\r\n        }\r\n        .dm-player-view-details {\r\n            flex-direction: column;\r\n        }\r\n    }\r\n    @media (max-width: 480px) {\r\n        .dm-sub-nav-item {\r\n            padding: 0.8rem 1rem;\r\n            font-size: 0.85rem;\r\n        }\r\n    }\r\n`;\r\n\r\nfunction App() {\r\n    // --- State Variables ---\r\n    const [allCards, setAllCards] = useState([]); // All cards fetched from the backend (master list)\r\n    const [characterLevel, setCharacterLevel] = useState(1);\r\n    const [wisMod, setWisMod] = useState(0);\r\n    const [intMod, setIntMod] = useState(0);\r\n    const [chaMod, setChaMod] = useState(0);\r\n    const [maxDeckSize, setMaxDeckSize] = useState(0);\r\n    const [activeDeckInstances, setActiveDeckInstances] = useState([]); // Cards currently in the player's ACTIVE deck (persistent instances)\r\n    const [unlockedCollectionIds, setUnlockedCollectionIds] = useState([]); // IDs of all UNIQUE card types the player HAS UNLOCKED (owned pool)\r\n    const [error, setError] = useState(''); // General error messages for UI\r\n\r\n    // New states for login/auth\r\n    const [playerId, setPlayerId] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    const [message, setMessage] = useState({ text: '', type: '' });\r\n    const [loading, setLoading] = useState(true); // Loading state for initial data fetch of allCards\r\n\r\n    // New state for tab management\r\n    const [activeTab, setActiveTab] = useState('available'); // 'available', 'deck', or 'dm_screen'\r\n\r\n    // State for newly acquired cards from booster packs\r\n    const [newlyAcquiredCards, setNewlyAcquiredCards] = useState([]);\r\n    const [lastOpenedPackType, setLastOpenedPackType] = useState('');\r\n    const [prePackUnlockedIds, setPrePackUnlockedIds] = useState([]); // Store state before opening pack for duplicate check\r\n\r\n    // --- NEW DM/SESSION STATES ---\r\n    const [isDMMode, setIsDMMode] = useState(false); // Can be toggled if player_id is DM\r\n    const [sessionNameInput, setSessionNameInput] = useState('');\r\n    const [sessionCodeInput, setSessionCodeInput] = useState('');\r\n    const [dmSessions, setDmSessions] = useState([]); // Sessions created by THIS DM\r\n    const [selectedDmSession, setSelectedDmSession] = useState(null); // The session the DM is currently viewing\r\n    const [playersInSelectedDmSession, setPlayersInSelectedDmSession] = useState([]); // Players in the selected DM session\r\n    const [selectedPlayerForDMView, setSelectedPlayerForDMView] = useState(null); // The specific player DM is inspecting\r\n    const [selectedPlayerDMData, setSelectedPlayerDMData] = useState(null); // Full card data for the inspected player\r\n    const [activeDmTab, setActiveDmTab] = useState('my_sessions'); // 'create_session', 'my_sessions', 'view_player'\r\n\r\n\r\n    // --- Helper function to display messages ---\r\n    const showMessage = useCallback((text, type) => {\r\n        setMessage({ text, type });\r\n        // Clear message after 5 seconds for info, 3 seconds for others\r\n        const duration = type === 'info' ? 5000 : 3000;\r\n        setTimeout(() => setMessage({ text: '', type: '' }), duration);\r\n    }, []);\r\n\r\n    // --- API Call: Create Account ---\r\n    const handleCreateAccount = async () => {\r\n        if (!playerId || !password) {\r\n            showMessage('Player ID and password are required to create an account.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/deck/create`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n            \r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to create account.');\r\n            }\r\n            \r\n            showMessage('Account created successfully! You can now log in.', 'success');\r\n        } catch (err) {\r\n            console.error('Error creating account:', err);\r\n            showMessage(`Failed to create account: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- API Call: Login and Load Deck ---\r\n    const handleLoginAndLoadDeck = async () => {\r\n        if (!playerId || !password) {\r\n            showMessage('Player ID and password are required to log in.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/deck/login`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Authentication failed.');\r\n            }\r\n\r\n            // Load data from backend upon successful login\r\n            setActiveDeckInstances(data.active_deck_instances || []); // Load active deck instances\r\n            setUnlockedCollectionIds(data.unlocked_collection_ids || []); // Load unlocked card IDs (now includes duplicates)\r\n            setCharacterLevel(data.character_level !== undefined ? data.character_level : 1);\r\n            setWisMod(data.wis_mod !== undefined ? data.wis_mod : 0);\r\n            setIntMod(data.int_mod !== undefined ? data.int_mod : 0);\r\n            setChaMod(data.cha_mod !== undefined ? data.cha_mod : 0);\r\n            setIsAuthenticated(true);\r\n            setActiveTab('deck'); // Automatically switch to the deck tab after login\r\n            setIsDMMode(false); // Ensure DM mode is off by default after login\r\n\r\n            showMessage('Login successful! Deck and unlocked cards loaded.', 'success');\r\n        } catch (err) {\r\n            setIsAuthenticated(false);\r\n            console.error('Error logging in:', err);\r\n            showMessage(`Failed to load deck: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- API Call: Save Deck ---\r\n    const handleSaveDeck = async () => {\r\n        if (!isAuthenticated) {\r\n            showMessage('You must be logged in to save your deck.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/deck/save`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    player_id: playerId,\r\n                    password: password, // Send password for re-validation on backend\r\n                    active_deck_instances: activeDeckInstances, // Save active deck instances\r\n                    unlocked_collection_ids: unlockedCollectionIds, // Save unlocked card IDs (now includes duplicates)\r\n                    character_level: characterLevel,\r\n                    wis_mod: wisMod,\r\n                    int_mod: intMod,\r\n                    cha_mod: chaMod,\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to save deck.');\r\n            }\r\n\r\n            showMessage('Deck and unlocked cards saved successfully!', 'success');\r\n        } catch (err) {\r\n            console.error('Error saving deck:', err);\r\n            showMessage(`Failed to save deck: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- Effect to Fetch All Cards on Component Mount ---\r\n    useEffect(() => {\r\n        const fetchAllCards = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const cardsResponse = await fetch(`${API_BASE_URL}/cards`);\r\n                if (!cardsResponse.ok) {\r\n                    throw new Error(`HTTP error fetching cards! status: ${cardsResponse.status}`);\r\n                }\r\n                const cardsData = await cardsResponse.json();\r\n                setAllCards(cardsData);\r\n            } catch (err) {\r\n                console.error('Error fetching initial data:', err);\r\n                showMessage('Failed to fetch initial data: ' + err.message, 'error');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchAllCards();\r\n    }, [showMessage]); // Empty dependency array, this effect runs only once on mount\r\n\r\n    // --- Effect to Calculate Max Deck Size when Character Stats Change ---\r\n    useEffect(() => {\r\n        const calculateDeckSize = async () => {\r\n            setError(''); // Clear previous errors related to deck size\r\n            try {\r\n                const response = await fetch(`${API_BASE_URL}/calculate_deck_size`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        character_level: characterLevel,\r\n                        wis_mod: wisMod,\r\n                        int_mod: intMod,\r\n                        cha_mod: chaMod,\r\n                    }),\r\n                });\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const data = await response.json();\r\n                setMaxDeckSize(data.max_deck_size);\r\n            } catch (err) {\r\n                setError('Failed to calculate deck size: ' + err.message);\r\n                console.error('Error calculating deck size:', err);\r\n            }\r\n        };\r\n\r\n        if (!isNaN(characterLevel) && !isNaN(wisMod) && !isNaN(intMod) && !isNaN(chaMod)) {\r\n            calculateDeckSize();\r\n        }\r\n    }, [characterLevel, wisMod, intMod, chaMod]);\r\n\r\n    // --- Booster Pack Logic: Open a new pack ---\r\n    const handleOpenBoosterPack = async () => {\r\n        if (!isAuthenticated) {\r\n            showMessage(\"You must be logged in to open booster packs.\", \"error\");\r\n            return;\r\n        }\r\n        setLoading(true); // Indicate loading while opening pack\r\n        setNewlyAcquiredCards([]); // Clear previous new cards display\r\n        setLastOpenedPackType('');\r\n        setPrePackUnlockedIds(unlockedCollectionIds); // Store current collection for duplicate check\r\n\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/deck/open_booster`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password: password }), // Backend determines pack size\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to open booster pack.');\r\n            }\r\n\r\n            setLastOpenedPackType(data.pack_type);\r\n\r\n            if (data.new_cards && data.new_cards.length > 0) {\r\n                // Update the unlockedCollectionIds state with the new IDs (now including duplicates)\r\n                setUnlockedCollectionIds(data.updated_unlocked_collection_ids || []);\r\n                setNewlyAcquiredCards(data.new_cards); // Store new cards for display\r\n                showMessage(`You opened a ${data.pack_type} and acquired ${data.new_cards.length} cards!`, 'success');\r\n            } else {\r\n                showMessage(data.message || \"No new cards were found in the booster pack.\", 'info');\r\n            }\r\n        } catch (err) {\r\n            console.error('Error opening booster pack:', err);\r\n            showMessage(`Failed to open booster pack: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n    // --- Deck Building Logic: Add Card ---\r\n    const handleAddCardToDeck = useCallback((card) => {\r\n        if (!isAuthenticated) {\r\n            showMessage(\"You must be logged in to build a deck.\", \"error\");\r\n            return;\r\n        }\r\n        if (activeDeckInstances.length >= maxDeckSize) {\r\n            showMessage('Deck is full! Remove cards to add new ones.', 'error');\r\n            return;\r\n        }\r\n        \r\n        const ownedCopiesOfThisCard = unlockedCollectionIds.filter(id => id === card.id).length;\r\n        const copiesInActiveDeck = activeDeckInstances.filter(c => c.id === card.id).length;\r\n\r\n        if (copiesInActiveDeck >= ownedCopiesOfThisCard) {\r\n            showMessage(`You have already added all owned copies of ${card.name} to your deck. Open more booster packs to get more!`, 'error');\r\n            return;\r\n        }\r\n\r\n        const cantripCountInDeck = activeDeckInstances.filter(c => c.type === 'Cantrip').length;\r\n        if (card.type !== 'Cantrip' && cantripCountInDeck === 0 && activeDeckInstances.length === 0) {\r\n             showMessage('Your deck must contain at least one Cantrip! Add a Cantrip first.', 'error');\r\n             return;\r\n        }\r\n\r\n        // Add a new instance of the card to the active deck\r\n        setActiveDeckInstances(prev => [...prev, {\r\n            ...card,\r\n            instance_id: uuidv4(), // Assign a unique ID for this specific copy in the active deck\r\n            current_uses: card.default_uses_per_rest\r\n        }]);\r\n        showMessage('Card added to your deck!', 'success');\r\n    }, [isAuthenticated, maxDeckSize, activeDeckInstances, unlockedCollectionIds, showMessage]);\r\n\r\n    // --- Deck Building Logic: Remove Card ---\r\n    const handleRemoveCardFromDeck = useCallback((instance_id) => {\r\n        const updatedDeck = activeDeckInstances.filter(card => card.instance_id !== instance_id);\r\n        const cantripCount = updatedDeck.filter(c => c.type === 'Cantrip').length;\r\n\r\n        if (cantripCount === 0 && updatedDeck.length > 0) {\r\n            showMessage('Your deck must contain at least one Cantrip! You cannot remove the last one.', 'error');\r\n            return;\r\n        }\r\n        setActiveDeckInstances(updatedDeck);\r\n        showMessage('Card removed from deck.', 'success');\r\n    }, [activeDeckInstances, showMessage]);\r\n\r\n    // --- Card Usage Logic: Mark Card as Used ---\r\n    const handleMarkCardUsed = useCallback(async (instance_id) => {\r\n        const cardToUse = activeDeckInstances.find(card => card.instance_id === instance_id);\r\n        if (!cardToUse) return;\r\n\r\n        if (cardToUse.current_uses > 0) {\r\n            setActiveDeckInstances(prev =>\r\n                prev.map(card =>\r\n                    card.instance_id === instance_id ? { ...card, current_uses: card.current_uses - 1 } : card\r\n                )\r\n            );\r\n\r\n            // Notify backend about the card usage for logging purposes.\r\n            try {\r\n                const response = await fetch(`${API_BASE_URL}/card_used`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        name: cardToUse.name, // Use 'name' to match backend's 'card_name' expectation\r\n                        type: cardToUse.type, // Use 'type' to match backend's 'card_type' expectation\r\n                        deck_card_id: cardToUse.instance_id\r\n                    }),\r\n                });\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const data = await response.json();\r\n                console.log('Backend notification:', data.message);\r\n                console.log('Simulated System Log Entry from Backend:', data.log_entry);\r\n            } catch (err) {\r\n                showMessage('Failed to notify backend of card usage for logging: ' + err.message, 'error');\r\n                console.error('Error sending card used notification:', err);\r\n            }\r\n        } else {\r\n            showMessage(`\"${cardToUse.name}\" has no uses left! It needs a long rest.`, 'error');\r\n        }\r\n    }, [activeDeckInstances, showMessage]);\r\n\r\n    // --- Card Usage Logic: Reset Card Uses (Long Rest) ---\r\n    const handleResetCardUses = useCallback((instance_id) => {\r\n        setActiveDeckInstances(prev =>\r\n            prev.map(card =>\r\n                card.instance_id === instance_id ? { ...card, current_uses: card.default_uses_per_rest } : card\r\n            )\r\n        );\r\n        showMessage('Card uses reset!', 'success');\r\n    }, [showMessage]);\r\n\r\n    // Filter available cards based on what the player has unlocked\r\n    // And also count how many copies of each unique card ID the player owns\r\n    const filteredAvailableCardsWithCounts = allCards\r\n        .filter(card => unlockedCollectionIds.includes(card.id)) // Only show cards of types user has unlocked\r\n        .reduce((acc, card) => {\r\n            // Group by card ID and count occurrences\r\n            if (!acc[card.id]) {\r\n                const count = unlockedCollectionIds.filter(id => id === card.id).length;\r\n                acc[card.id] = { ...card, owned_copies: count };\r\n            }\r\n            return acc;\r\n        }, {});\r\n    \r\n    const uniqueUnlockedCards = Object.values(filteredAvailableCardsWithCounts);\r\n\r\n    // --- DM/Session Functions ---\r\n\r\n    // Effect to fetch DM sessions whenever DM mode is active and player ID is set\r\n    useEffect(() => {\r\n        if (isAuthenticated && isDMMode && playerId && activeDmTab === 'my_sessions') {\r\n            fetchMyDMSessions();\r\n        }\r\n    }, [isAuthenticated, isDMMode, playerId, activeDmTab]); // Dependency on activeDmTab to refetch when switching to 'my_sessions'\r\n\r\n    const handleCreateSession = async () => {\r\n        if (!playerId || !password) {\r\n            showMessage('You must be logged in to create a session.', 'error');\r\n            return;\r\n        }\r\n        if (!sessionNameInput) {\r\n            showMessage('Session name is required.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/dm/create_session`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password: password, session_name: sessionNameInput }),\r\n            });\r\n            const data = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to create session.');\r\n            }\r\n            showMessage(`Session \"${data.session_name}\" created with code: ${data.session_code}`, 'success');\r\n            setSessionNameInput(''); // Clear input\r\n            fetchMyDMSessions(); // Refresh DM's session list\r\n        } catch (err) {\r\n            console.error('Error creating session:', err);\r\n            showMessage(`Failed to create session: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleJoinSession = async () => {\r\n        if (!playerId || !password) {\r\n            showMessage('You must be logged in to join a session.', 'error');\r\n            return;\r\n        }\r\n        if (!sessionCodeInput) {\r\n            showMessage('Session code is required.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/player/join_session`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password: password, session_code: sessionCodeInput }),\r\n            });\r\n            const data = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to join session.');\r\n            }\r\n            showMessage(data.message, 'success');\r\n            setSessionCodeInput(''); // Clear input\r\n            // Player might need to refresh their own view if we implement a \"my joined sessions\" for players\r\n        } catch (err) {\r\n            console.error('Error joining session:', err);\r\n            showMessage(`Failed to join session: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchMyDMSessions = useCallback(async () => {\r\n        if (!isAuthenticated || !playerId || !password) return;\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/dm/my_sessions`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password: password }),\r\n            });\r\n            const data = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to fetch your sessions.');\r\n            }\r\n            setDmSessions(data.sessions || []);\r\n        } catch (err) {\r\n            console.error('Error fetching DM sessions:', err);\r\n            showMessage(`Failed to fetch DM sessions: ${err.message}`, 'error');\r\n            setDmSessions([]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [isAuthenticated, playerId, password, showMessage]);\r\n\r\n    const fetchPlayersInSession = useCallback(async (sessionId) => {\r\n        if (!isAuthenticated || !playerId || !password || !sessionId) return;\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/dm/sessions/${sessionId}/players`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password: password }),\r\n            });\r\n            const data = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to fetch players for this session.');\r\n            }\r\n            setPlayersInSelectedDmSession(data.players || []);\r\n        } catch (err) {\r\n            console.error('Error fetching players in session:', err);\r\n            showMessage(`Failed to fetch players: ${err.message}`, 'error');\r\n            setPlayersInSelectedDmSession([]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [isAuthenticated, playerId, password, showMessage]);\r\n\r\n    const handleSelectDmSession = (session) => {\r\n        setSelectedDmSession(session);\r\n        fetchPlayersInSession(session.session_id);\r\n        setSelectedPlayerForDMView(null); // Clear any previously selected player\r\n        setSelectedPlayerDMData(null);\r\n        setActiveDmTab('my_sessions'); // Stay on my sessions tab, but show players for selected session\r\n    };\r\n\r\n    const handleViewPlayerCards = (player_id_to_view) => {\r\n        const player = playersInSelectedDmSession.find(p => p.player_id === player_id_to_view);\r\n        if (player) {\r\n            setSelectedPlayerForDMView(player.player_id);\r\n            setSelectedPlayerDMData(player.data); // This is the full player data including deck/collection\r\n            setActiveDmTab('view_player'); // Switch to a sub-tab to view player details\r\n        } else {\r\n            showMessage(\"Could not find player data for viewing.\", \"error\");\r\n        }\r\n    };\r\n\r\n    // Helper to map card IDs from player data back to full card objects from allCards\r\n    const getFullCardDetails = (cardId) => {\r\n        return allCards.find(card => card.id === cardId);\r\n    };\r\n\r\n    // --- Main Component Render ---\r\n    return (\r\n        <>\r\n            <style>{AppStyles}</style>\r\n            <div className=\"App\">\r\n                <h1 className=\"app-title\">Spell Trading Cards Manager</h1>\r\n\r\n                {/* Login/Auth Section */}\r\n                <div className=\"login-container\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Player ID\"\r\n                        value={playerId}\r\n                        onChange={(e) => setPlayerId(e.target.value)}\r\n                        disabled={loading}\r\n                    />\r\n                    <input\r\n                        type=\"password\"\r\n                        placeholder=\"Password\"\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        disabled={loading}\r\n                    />\r\n                    <button onClick={handleLoginAndLoadDeck} disabled={loading}>Log In</button>\r\n                    <button onClick={handleCreateAccount} disabled={loading}>Create Account</button>\r\n                    {isAuthenticated && <button onClick={handleSaveDeck} disabled={loading}>Save Deck</button>}\r\n                </div>\r\n\r\n                {/* Character Stats Input Panel */}\r\n                <div className=\"stats-container\">\r\n                    <label>Level: <input type=\"number\" value={characterLevel} onChange={(e) => setCharacterLevel(Math.max(1, parseInt(e.target.value) || 1))} min=\"1\" max=\"20\" /></label>\r\n                    <label>WIS Mod: <input type=\"number\" value={wisMod} onChange={(e) => setWisMod(parseInt(e.target.value) || 0)} /></label>\r\n                    <label>INT Mod: <input type=\"number\" value={intMod} onChange={(e) => setIntMod(parseInt(e.target.value) || 0)} /></label>\r\n                    <label>CHA Mod: <input type=\"number\" value={chaMod} onChange={(e) => setChaMod(parseInt(e.target.value) || 0)} /></label>\r\n                    <p>Max Deck Size: <span className=\"highlight\">{maxDeckSize}</span></p>\r\n                </div>\r\n\r\n                {/* Message Box */}\r\n                {message.text && <div className={`message-box ${message.type}`}>{message.text}</div>}\r\n\r\n                {/* Tab Navigation */}\r\n                <div className=\"tab-navigation\">\r\n                    <div \r\n                        className={`tab-item ${activeTab === 'available' ? 'active' : ''}`} \r\n                        onClick={() => setActiveTab('available')}\r\n                    >\r\n                        Available Spells ({uniqueUnlockedCards.length} Types / {unlockedCollectionIds.length} Total Owned)\r\n                    </div>\r\n                    <div \r\n                        className={`tab-item ${activeTab === 'deck' ? 'active' : ''}`} \r\n                        onClick={() => setActiveTab('deck')}\r\n                    >\r\n                        Your Deck ({activeDeckInstances.length}/{maxDeckSize})\r\n                    </div>\r\n                     {isAuthenticated && (\r\n                        <div \r\n                            className={`tab-item ${activeTab === 'dm_screen' ? 'active' : ''}`} \r\n                            onClick={() => { setActiveTab('dm_screen'); setSelectedDmSession(null); setSelectedPlayerForDMView(null); setSelectedPlayerDMData(null); setActiveDmTab('my_sessions'); }}\r\n                        >\r\n                            DM Screen\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Main Content Area - Conditional Rendering based on activeTab */}\r\n                <div className=\"main-content\">\r\n                    {/* Available Cards Section */}\r\n                    {activeTab === 'available' && (\r\n                        <div className=\"card-collection-panel\">\r\n                            <h2 className=\"panel-title\">Available Spells</h2>\r\n                            {loading && <p className=\"empty-message\">Loading cards...</p>}\r\n                            {!isAuthenticated && !loading && (\r\n                                <div className=\"pre-login-message\">\r\n                                    <h3>Log in to see your available spells.</h3>\r\n                                </div>\r\n                            )}\r\n                            {isAuthenticated && !loading && uniqueUnlockedCards.length > 0 && (\r\n                                <div className=\"card-list\">\r\n                                    {uniqueUnlockedCards.map((card) => (\r\n                                        <div key={card.id} className=\"card-item available-card\" onClick={() => handleAddCardToDeck(card)}>\r\n                                            <img\r\n                                                src={`https://placehold.co/100x150/a8dadc/ffffff?text=${card.name.split('.')[0].replace('_', '%20')}`}\r\n                                                alt={card.name}\r\n                                                className=\"card-image\"\r\n                                                onError={(e) => { e.target.onerror = null; e.target.src = \"https://placehold.co/100x150/cccccc/333333?text=Image%20Error\"; }}\r\n                                            />\r\n                                            {card.backlash_effect && (\r\n                                                <p className=\"card-backlash\">Backlash: {card.backlash_effect}</p>\r\n                                            )}\r\n                                            <h3 className=\"card-name\">{card.name} ({card.type})</h3>\r\n                                            <p className=\"card-description\">{card.description}</p>\r\n                                            {card.effect && (\r\n                                                <p className=\"card-effect\">Effect: {card.effect}</p>\r\n                                            )}\r\n                                            <p className=\"card-meta\">Rarity: <span>{card.rarity}</span></p>\r\n                                            <p className=\"card-meta\">Owned Copies: <span>{card.owned_copies}</span></p>\r\n                                            <button\r\n                                                onClick={(e) => { e.stopPropagation(); handleAddCardToDeck(card); }} // Stop propagation to prevent parent onClick\r\n                                                // Disable button if deck is full OR if all owned copies are already in the deck\r\n                                                disabled={activeDeckInstances.length >= maxDeckSize || \r\n                                                            activeDeckInstances.filter(c => c.id === card.id).length >= card.owned_copies}\r\n                                                className=\"select-button\"\r\n                                            >\r\n                                                Add to Deck\r\n                                            </button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n\r\n                            {isAuthenticated && !loading && (\r\n                                <div className=\"booster-pack-section\">\r\n                                    {uniqueUnlockedCards.length === 0 && (\r\n                                        <p className=\"empty-message\">You haven't unlocked any unique spell types yet! Open a booster pack to get started.</p>\r\n                                    )}\r\n                                    <button \r\n                                        onClick={handleOpenBoosterPack} \r\n                                        disabled={loading}\r\n                                        className=\"booster-button\"\r\n                                    >\r\n                                        Open Booster Pack\r\n                                    </button>\r\n                                    {newlyAcquiredCards.length > 0 && (\r\n                                        <div className=\"new-cards-display\">\r\n                                            <h4>Newly Acquired Cards from {lastOpenedPackType}:</h4>\r\n                                            <ul>\r\n                                                {newlyAcquiredCards.map((card, index) => (\r\n                                                    <li key={card.id + \"-new-\" + index}> {/* Use unique key for each new card */}\r\n                                                        {card.name} ({card.type}, {card.rarity})\r\n                                                        {prePackUnlockedIds.includes(card.id) && <span> (Duplicate)</span>}\r\n                                                    </li>\r\n                                                ))}\r\n                                            </ul>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Built Deck Section */}\r\n                    {activeTab === 'deck' && (\r\n                        <div className=\"built-deck-panel\">\r\n                            <h2 className=\"panel-title\">Your Deck ({activeDeckInstances.length}/{maxDeckSize})</h2>\r\n                            <div className=\"deck-list\">\r\n                                {isAuthenticated ? (\r\n                                    activeDeckInstances.length === 0 ? (\r\n                                        <p className=\"empty-message\">Select cards from the \"Available Spells\" tab to build your deck!</p>\r\n                                    ) : (\r\n                                        activeDeckInstances.map((card) => (\r\n                                            <div key={card.instance_id} className=\"card-item deck-card\">\r\n                                                <img\r\n                                                    src={`https://placehold.co/100x150/a8dadc/ffffff?text=${card.name.split('.')[0].replace('_', '%20')}`}\r\n                                                    alt={card.name}\r\n                                                    className=\"card-image\"\r\n                                                    onError={(e) => { e.target.onerror = null; e.target.src = \"https://placehold.co/100x150/cccccc/333333?text=Image%20Error\"; }}\r\n                                                />\r\n                                                {card.backlash_effect && (\r\n                                                    <p className=\"card-backlash\">Backlash: {card.backlash_effect}</p>\r\n                                                )}\r\n                                                <h3 className=\"card-name\">{card.name} ({card.type})</h3>\r\n                                                <p className=\"card-description\">{card.description}</p>\r\n                                                {card.effect && (\r\n                                                    <p className=\"card-effect\">Effect: {card.effect}</p>\r\n                                                )}\r\n                                                <p className=\"card-meta\">Rarity: <span>{card.rarity}</span></p>\r\n                                                <p className=\"card-uses\">Uses Left: {card.current_uses}/{card.default_uses_per_rest}</p>\r\n                                                <div className=\"card-actions\">\r\n                                                    <button\r\n                                                        onClick={() => handleMarkCardUsed(card.instance_id)}\r\n                                                        disabled={card.current_uses <= 0}\r\n                                                        className=\"use-button\"\r\n                                                    >\r\n                                                        Use\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => handleResetCardUses(card.instance_id)}\r\n                                                        className=\"reset-button\"\r\n                                                    >\r\n                                                        Reset Uses\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => handleRemoveCardFromDeck(card.instance_id)}\r\n                                                        className=\"remove-button\"\r\n                                                    >\r\n                                                        Remove\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))\r\n                                    )\r\n                                ) : (\r\n                                    <div className=\"pre-login-message\">\r\n                                        <h3>Please log in to load your character and spell deck.</h3>\r\n                                        <p>Once logged in, your deck and stats will appear here.</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* DM Screen Section */}\r\n                    {isAuthenticated && activeTab === 'dm_screen' && (\r\n                        <div className=\"dm-screen-container\">\r\n                            <h2 className=\"panel-title\">DM Screen</h2>\r\n\r\n                            <div className=\"dm-sub-nav\">\r\n                                <div \r\n                                    className={`dm-sub-nav-item ${activeDmTab === 'create_session' ? 'active' : ''}`} \r\n                                    onClick={() => { setActiveDmTab('create_session'); setSelectedDmSession(null); setSelectedPlayerForDMView(null); }}\r\n                                >\r\n                                    Create Session\r\n                                </div>\r\n                                <div \r\n                                    className={`dm-sub-nav-item ${activeDmTab === 'my_sessions' ? 'active' : ''}`} \r\n                                    onClick={() => { setActiveDmTab('my_sessions'); setSelectedPlayerForDMView(null); }}\r\n                                >\r\n                                    My Sessions\r\n                                </div>\r\n                                {selectedPlayerForDMView && (\r\n                                    <div \r\n                                        className={`dm-sub-nav-item ${activeDmTab === 'view_player' ? 'active' : ''}`} \r\n                                        onClick={() => setActiveDmTab('view_player')}\r\n                                    >\r\n                                        Viewing: {selectedPlayerForDMView}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* DM Create Session View */}\r\n                            {activeDmTab === 'create_session' && (\r\n                                <div className=\"dm-section-panel\">\r\n                                    <h3>Create New Game Session</h3>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Session Name (e.g., 'Dragon's Breath Campaign')\"\r\n                                        value={sessionNameInput}\r\n                                        onChange={(e) => setSessionNameInput(e.target.value)}\r\n                                        disabled={loading}\r\n                                        style={{ maxWidth: '400px' }}\r\n                                    />\r\n                                    <button onClick={handleCreateSession} disabled={loading}>\r\n                                        Generate Session Code\r\n                                    </button>\r\n                                    <p className=\"empty-message\">\r\n                                        Once created, share the 6-character session code with your players!\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* DM My Sessions & View Players View */}\r\n                            {activeDmTab === 'my_sessions' && (\r\n                                <div className=\"dm-section-panel\">\r\n                                    <h3>Your Game Sessions</h3>\r\n                                    {loading ? (\r\n                                        <p className=\"empty-message\">Loading sessions...</p>\r\n                                    ) : dmSessions.length === 0 ? (\r\n                                        <p className=\"empty-message\">You haven't created any sessions yet.</p>\r\n                                    ) : (\r\n                                        <div className=\"dm-session-list\">\r\n                                            <ul>\r\n                                                {dmSessions.map(session => (\r\n                                                    <li key={session.session_id} onClick={() => handleSelectDmSession(session)}>\r\n                                                        <span>\r\n                                                            <strong>{session.session_name}</strong> (Code: {session.session_code})\r\n                                                        </span>\r\n                                                        <span>Players: {playersInSelectedDmSession.filter(p => p.session_id === session.session_id).length}</span> {/* Placeholder count */}\r\n                                                    </li>\r\n                                                ))}\r\n                                            </ul>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {selectedDmSession && (\r\n                                        <>\r\n                                            <h3 style={{ marginTop: '2rem' }}>Players in \"{selectedDmSession.session_name}\"</h3>\r\n                                            {loading ? (\r\n                                                <p className=\"empty-message\">Loading players...</p>\r\n                                            ) : playersInSelectedDmSession.length === 0 ? (\r\n                                                <p className=\"empty-message\">No players have joined this session yet.</p>\r\n                                            ) : (\r\n                                                <div className=\"dm-player-list\">\r\n                                                    <ul>\r\n                                                        {playersInSelectedDmSession.map(player => (\r\n                                                            <li key={player.player_id} onClick={() => handleViewPlayerCards(player.player_id)}>\r\n                                                                <span className=\"dm-player-id\">{player.player_id}</span>\r\n                                                                <button className=\"select-button\">View Cards</button>\r\n                                                            </li>\r\n                                                        ))}\r\n                                                    </ul>\r\n                                                </div>\r\n                                            )}\r\n                                        </>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                             {/* DM Player View (when a DM selects a specific player) */}\r\n                            {activeDmTab === 'view_player' && selectedPlayerDMData && (\r\n                                <div className=\"dm-section-panel\">\r\n                                    <h3>Viewing Player: {selectedPlayerForDMView}</h3>\r\n                                    <button onClick={() => setActiveDmTab('my_sessions')} className=\"select-button\" style={{ marginBottom: '1rem' }}>\r\n                                        Back to Session Players\r\n                                    </button>\r\n\r\n                                    <div className=\"dm-player-view-details\">\r\n                                        <div className=\"dm-player-stats-panel\">\r\n                                            <h4>Player Stats</h4>\r\n                                            <p>Level: <span>{selectedPlayerDMData.character_level}</span></p>\r\n                                            <p>WIS Mod: <span>{selectedPlayerDMData.wis_mod}</span></p>\r\n                                            <p>INT Mod: <span>{selectedPlayerDMData.int_mod}</span></p>\r\n                                            <p>CHA Mod: <span>{selectedPlayerDMData.cha_mod}</span></p>\r\n                                        </div>\r\n\r\n                                        <div className=\"dm-player-deck-panel\">\r\n                                            <h4>Active Deck ({selectedPlayerDMData.active_deck_instances.length})</h4>\r\n                                            <div className=\"card-list\">\r\n                                                {selectedPlayerDMData.active_deck_instances.length === 0 ? (\r\n                                                    <p className=\"empty-message no-hover\">No cards in active deck.</p>\r\n                                                ) : (\r\n                                                    selectedPlayerDMData.active_deck_instances.map(card => (\r\n                                                        <div key={card.instance_id} className=\"card-item\">\r\n                                                             <img\r\n                                                                src={`https://placehold.co/100x150/a8dadc/ffffff?text=${card.name.split('.')[0].replace('_', '%20')}`}\r\n                                                                alt={card.name}\r\n                                                                className=\"card-image\"\r\n                                                                onError={(e) => { e.target.onerror = null; e.target.src = \"https://placehold.co/100x150/cccccc/333333?text=Image%20Error\"; }}\r\n                                                            />\r\n                                                            <h4 className=\"card-name\">{card.name}</h4>\r\n                                                            <p className=\"card-uses\">Uses: {card.current_uses}/{card.default_uses_per_rest}</p>\r\n                                                        </div>\r\n                                                    ))\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"dm-player-deck-panel\">\r\n                                            <h4>Owned Collection ({selectedPlayerDMData.unlocked_collection_ids.length})</h4>\r\n                                            <div className=\"card-list\">\r\n                                                {selectedPlayerDMData.unlocked_collection_ids.length === 0 ? (\r\n                                                    <p className=\"empty-message no-hover\">No cards owned.</p>\r\n                                                ) : (\r\n                                                    // Display unique cards from collection, with count\r\n                                                    Object.entries(selectedPlayerDMData.unlocked_collection_ids.reduce((acc, cardId) => {\r\n                                                        acc[cardId] = (acc[cardId] || 0) + 1;\r\n                                                        return acc;\r\n                                                    }, {})).map(([cardId, count]) => {\r\n                                                        const fullCard = getFullCardDetails(cardId);\r\n                                                        return fullCard ? (\r\n                                                            <div key={cardId} className=\"card-item\">\r\n                                                                 <img\r\n                                                                    src={`https://placehold.co/100x150/a8dadc/ffffff?text=${fullCard.name.split('.')[0].replace('_', '%20')}`}\r\n                                                                    alt={fullCard.name}\r\n                                                                    className=\"card-image\"\r\n                                                                    onError={(e) => { e.target.onerror = null; e.target.src = \"https://placehold.co/100x150/cccccc/333333?text=Image%20Error\"; }}\r\n                                                                />\r\n                                                                <h4 className=\"card-name\">{fullCard.name}</h4>\r\n                                                                <p className=\"card-meta\">Owned: {count}</p>\r\n                                                            </div>\r\n                                                        ) : null;\r\n                                                    })\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Player Join Session Input (always visible when authenticated and not DM mode) */}\r\n                {isAuthenticated && activeTab !== 'dm_screen' && (\r\n                    <div className=\"dm-section-panel\" style={{ marginTop: '2rem' }}>\r\n                        <h3>Join a Game Session</h3>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Enter Session Code\"\r\n                            value={sessionCodeInput}\r\n                            onChange={(e) => setSessionCodeInput(e.target.value)}\r\n                            disabled={loading}\r\n                            style={{ maxWidth: '250px' }}\r\n                        />\r\n                        <button onClick={handleJoinSession} disabled={loading}>\r\n                            Join Session\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":";;AAAA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,EAAE,IAAIC,MAAM,QAAQ,MAAM,CAAC,CAAC;;AAErC;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,YAAY,GAAG,gCAAgC;;AAErD;AACA,MAAMC,SAAS,GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACX;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC9C,MAAM,CAACe,cAAc,EAAEC,iBAAiB,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC;EACvD,MAAM,CAACiB,MAAM,EAAEC,SAAS,CAAC,GAAGlB,QAAQ,CAAC,CAAC,CAAC;EACvC,MAAM,CAACmB,MAAM,EAAEC,SAAS,CAAC,GAAGpB,QAAQ,CAAC,CAAC,CAAC;EACvC,MAAM,CAACqB,MAAM,EAAEC,SAAS,CAAC,GAAGtB,QAAQ,CAAC,CAAC,CAAC;EACvC,MAAM,CAACuB,WAAW,EAAEC,cAAc,CAAC,GAAGxB,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACyB,mBAAmB,EAAEC,sBAAsB,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACpE,MAAM,CAAC2B,qBAAqB,EAAEC,wBAAwB,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACxE,MAAM,CAAC6B,KAAK,EAAEC,QAAQ,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAExC;EACA,MAAM,CAAC+B,QAAQ,EAAEC,WAAW,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACiC,QAAQ,EAAEC,WAAW,CAAC,GAAGlC,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACmC,eAAe,EAAEC,kBAAkB,CAAC,GAAGpC,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACqC,OAAO,EAAEC,UAAU,CAAC,GAAGtC,QAAQ,CAAC;IAAEuC,IAAI,EAAE,EAAE;IAAEC,IAAI,EAAE;EAAG,CAAC,CAAC;EAC9D,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAG1C,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAE9C;EACA,MAAM,CAAC2C,SAAS,EAAEC,YAAY,CAAC,GAAG5C,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;;EAEzD;EACA,MAAM,CAAC6C,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG9C,QAAQ,CAAC,EAAE,CAAC;EAChE,MAAM,CAAC+C,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGhD,QAAQ,CAAC,EAAE,CAAC;EAChE,MAAM,CAACiD,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGlD,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAElE;EACA,MAAM,CAACmD,QAAQ,EAAEC,WAAW,CAAC,GAAGpD,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EACjD,MAAM,CAACqD,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGtD,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACuD,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGxD,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACyD,UAAU,EAAEC,aAAa,CAAC,GAAG1D,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAClD,MAAM,CAAC2D,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG5D,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAClE,MAAM,CAAC6D,0BAA0B,EAAEC,6BAA6B,CAAC,GAAG9D,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAClF,MAAM,CAAC+D,uBAAuB,EAAEC,0BAA0B,CAAC,GAAGhE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAC9E,MAAM,CAACiE,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGlE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EACxE,MAAM,CAACmE,WAAW,EAAEC,cAAc,CAAC,GAAGpE,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;;EAG/D;EACA,MAAMqE,WAAW,GAAGnE,WAAW,CAAC,CAACqC,IAAI,EAAEC,IAAI,KAAK;IAC5CF,UAAU,CAAC;MAAEC,IAAI;MAAEC;IAAK,CAAC,CAAC;IAC1B;IACA,MAAM8B,QAAQ,GAAG9B,IAAI,KAAK,MAAM,GAAG,IAAI,GAAG,IAAI;IAC9C+B,UAAU,CAAC,MAAMjC,UAAU,CAAC;MAAEC,IAAI,EAAE,EAAE;MAAEC,IAAI,EAAE;IAAG,CAAC,CAAC,EAAE8B,QAAQ,CAAC;EAClE,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAME,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI,CAACzC,QAAQ,IAAI,CAACE,QAAQ,EAAE;MACxBoC,WAAW,CAAC,2DAA2D,EAAE,OAAO,CAAC;MACjF;IACJ;IACA3B,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACA,MAAM+B,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGjE,YAAY,cAAc,EAAE;QACxDkE,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,SAAS,EAAEjD,QAAQ;UAAEE;QAAS,CAAC;MAC1D,CAAC,CAAC;MAEF,MAAMgD,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAElC,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACpD,KAAK,IAAI,2BAA2B,CAAC;MAC9D;MAEAwC,WAAW,CAAC,mDAAmD,EAAE,SAAS,CAAC;IAC/E,CAAC,CAAC,OAAOgB,GAAG,EAAE;MACVC,OAAO,CAACzD,KAAK,CAAC,yBAAyB,EAAEwD,GAAG,CAAC;MAC7ChB,WAAW,CAAC,6BAA6BgB,GAAG,CAAChD,OAAO,EAAE,EAAE,OAAO,CAAC;IACpE,CAAC,SAAS;MACNK,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;;EAED;EACA,MAAM6C,sBAAsB,GAAG,MAAAA,CAAA,KAAY;IACvC,IAAI,CAACxD,QAAQ,IAAI,CAACE,QAAQ,EAAE;MACxBoC,WAAW,CAAC,gDAAgD,EAAE,OAAO,CAAC;MACtE;IACJ;IACA3B,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACA,MAAM+B,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGjE,YAAY,aAAa,EAAE;QACvDkE,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,SAAS,EAAEjD,QAAQ;UAAEE;QAAS,CAAC;MAC1D,CAAC,CAAC;MAEF,MAAMgD,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAElC,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACpD,KAAK,IAAI,wBAAwB,CAAC;MAC3D;;MAEA;MACAH,sBAAsB,CAACuD,IAAI,CAACO,qBAAqB,IAAI,EAAE,CAAC,CAAC,CAAC;MAC1D5D,wBAAwB,CAACqD,IAAI,CAACQ,uBAAuB,IAAI,EAAE,CAAC,CAAC,CAAC;MAC9DzE,iBAAiB,CAACiE,IAAI,CAACS,eAAe,KAAKC,SAAS,GAAGV,IAAI,CAACS,eAAe,GAAG,CAAC,CAAC;MAChFxE,SAAS,CAAC+D,IAAI,CAACW,OAAO,KAAKD,SAAS,GAAGV,IAAI,CAACW,OAAO,GAAG,CAAC,CAAC;MACxDxE,SAAS,CAAC6D,IAAI,CAACY,OAAO,KAAKF,SAAS,GAAGV,IAAI,CAACY,OAAO,GAAG,CAAC,CAAC;MACxDvE,SAAS,CAAC2D,IAAI,CAACa,OAAO,KAAKH,SAAS,GAAGV,IAAI,CAACa,OAAO,GAAG,CAAC,CAAC;MACxD1D,kBAAkB,CAAC,IAAI,CAAC;MACxBQ,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;MACtBQ,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;;MAEpBiB,WAAW,CAAC,mDAAmD,EAAE,SAAS,CAAC;IAC/E,CAAC,CAAC,OAAOgB,GAAG,EAAE;MACVjD,kBAAkB,CAAC,KAAK,CAAC;MACzBkD,OAAO,CAACzD,KAAK,CAAC,mBAAmB,EAAEwD,GAAG,CAAC;MACvChB,WAAW,CAAC,wBAAwBgB,GAAG,CAAChD,OAAO,EAAE,EAAE,OAAO,CAAC;IAC/D,CAAC,SAAS;MACNK,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;;EAED;EACA,MAAMqD,cAAc,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAAC5D,eAAe,EAAE;MAClBkC,WAAW,CAAC,0CAA0C,EAAE,OAAO,CAAC;MAChE;IACJ;IACA3B,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACA,MAAM+B,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGjE,YAAY,YAAY,EAAE;QACtDkE,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACjBC,SAAS,EAAEjD,QAAQ;UACnBE,QAAQ,EAAEA,QAAQ;UAAE;UACpBuD,qBAAqB,EAAE/D,mBAAmB;UAAE;UAC5CgE,uBAAuB,EAAE9D,qBAAqB;UAAE;UAChD+D,eAAe,EAAE3E,cAAc;UAC/B6E,OAAO,EAAE3E,MAAM;UACf4E,OAAO,EAAE1E,MAAM;UACf2E,OAAO,EAAEzE;QACb,CAAC;MACL,CAAC,CAAC;MAEF,MAAM4D,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAElC,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACpD,KAAK,IAAI,sBAAsB,CAAC;MACzD;MAEAwC,WAAW,CAAC,6CAA6C,EAAE,SAAS,CAAC;IACzE,CAAC,CAAC,OAAOgB,GAAG,EAAE;MACVC,OAAO,CAACzD,KAAK,CAAC,oBAAoB,EAAEwD,GAAG,CAAC;MACxChB,WAAW,CAAC,wBAAwBgB,GAAG,CAAChD,OAAO,EAAE,EAAE,OAAO,CAAC;IAC/D,CAAC,SAAS;MACNK,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;;EAED;EACAzC,SAAS,CAAC,MAAM;IACZ,MAAM+F,aAAa,GAAG,MAAAA,CAAA,KAAY;MAC9BtD,UAAU,CAAC,IAAI,CAAC;MAChB,IAAI;QACA,MAAMuD,aAAa,GAAG,MAAMvB,KAAK,CAAC,GAAGjE,YAAY,QAAQ,CAAC;QAC1D,IAAI,CAACwF,aAAa,CAACd,EAAE,EAAE;UACnB,MAAM,IAAIC,KAAK,CAAC,sCAAsCa,aAAa,CAACC,MAAM,EAAE,CAAC;QACjF;QACA,MAAMC,SAAS,GAAG,MAAMF,aAAa,CAACf,IAAI,CAAC,CAAC;QAC5CpE,WAAW,CAACqF,SAAS,CAAC;MAC1B,CAAC,CAAC,OAAOd,GAAG,EAAE;QACVC,OAAO,CAACzD,KAAK,CAAC,8BAA8B,EAAEwD,GAAG,CAAC;QAClDhB,WAAW,CAAC,gCAAgC,GAAGgB,GAAG,CAAChD,OAAO,EAAE,OAAO,CAAC;MACxE,CAAC,SAAS;QACNK,UAAU,CAAC,KAAK,CAAC;MACrB;IACJ,CAAC;IACDsD,aAAa,CAAC,CAAC;EACnB,CAAC,EAAE,CAAC3B,WAAW,CAAC,CAAC,CAAC,CAAC;;EAEnB;EACApE,SAAS,CAAC,MAAM;IACZ,MAAMmG,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MAClCtE,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;MACd,IAAI;QACA,MAAM2C,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGjE,YAAY,sBAAsB,EAAE;UAChEkE,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YAAE,cAAc,EAAE;UAAmB,CAAC;UAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACjBW,eAAe,EAAE3E,cAAc;YAC/B6E,OAAO,EAAE3E,MAAM;YACf4E,OAAO,EAAE1E,MAAM;YACf2E,OAAO,EAAEzE;UACb,CAAC;QACL,CAAC,CAAC;QACF,IAAI,CAACoD,QAAQ,CAACU,EAAE,EAAE;UACd,MAAM,IAAIC,KAAK,CAAC,uBAAuBX,QAAQ,CAACyB,MAAM,EAAE,CAAC;QAC7D;QACA,MAAMjB,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;QAClC1D,cAAc,CAACyD,IAAI,CAACoB,aAAa,CAAC;MACtC,CAAC,CAAC,OAAOhB,GAAG,EAAE;QACVvD,QAAQ,CAAC,iCAAiC,GAAGuD,GAAG,CAAChD,OAAO,CAAC;QACzDiD,OAAO,CAACzD,KAAK,CAAC,8BAA8B,EAAEwD,GAAG,CAAC;MACtD;IACJ,CAAC;IAED,IAAI,CAACiB,KAAK,CAACvF,cAAc,CAAC,IAAI,CAACuF,KAAK,CAACrF,MAAM,CAAC,IAAI,CAACqF,KAAK,CAACnF,MAAM,CAAC,IAAI,CAACmF,KAAK,CAACjF,MAAM,CAAC,EAAE;MAC9E+E,iBAAiB,CAAC,CAAC;IACvB;EACJ,CAAC,EAAE,CAACrF,cAAc,EAAEE,MAAM,EAAEE,MAAM,EAAEE,MAAM,CAAC,CAAC;;EAE5C;EACA,MAAMkF,qBAAqB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI,CAACpE,eAAe,EAAE;MAClBkC,WAAW,CAAC,8CAA8C,EAAE,OAAO,CAAC;MACpE;IACJ;IACA3B,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;IAClBI,qBAAqB,CAAC,EAAE,CAAC,CAAC,CAAC;IAC3BE,qBAAqB,CAAC,EAAE,CAAC;IACzBE,qBAAqB,CAACvB,qBAAqB,CAAC,CAAC,CAAC;;IAE9C,IAAI;MACA,MAAM8C,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGjE,YAAY,oBAAoB,EAAE;QAC9DkE,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,SAAS,EAAEjD,QAAQ;UAAEE,QAAQ,EAAEA;QAAS,CAAC,CAAC,CAAE;MACvE,CAAC,CAAC;MAEF,MAAMgD,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAElC,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACpD,KAAK,IAAI,8BAA8B,CAAC;MACjE;MAEAmB,qBAAqB,CAACiC,IAAI,CAACuB,SAAS,CAAC;MAErC,IAAIvB,IAAI,CAACwB,SAAS,IAAIxB,IAAI,CAACwB,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;QAC7C;QACA9E,wBAAwB,CAACqD,IAAI,CAAC0B,+BAA+B,IAAI,EAAE,CAAC;QACpE7D,qBAAqB,CAACmC,IAAI,CAACwB,SAAS,CAAC,CAAC,CAAC;QACvCpC,WAAW,CAAC,gBAAgBY,IAAI,CAACuB,SAAS,iBAAiBvB,IAAI,CAACwB,SAAS,CAACC,MAAM,SAAS,EAAE,SAAS,CAAC;MACzG,CAAC,MAAM;QACHrC,WAAW,CAACY,IAAI,CAAC5C,OAAO,IAAI,8CAA8C,EAAE,MAAM,CAAC;MACvF;IACJ,CAAC,CAAC,OAAOgD,GAAG,EAAE;MACVC,OAAO,CAACzD,KAAK,CAAC,6BAA6B,EAAEwD,GAAG,CAAC;MACjDhB,WAAW,CAAC,gCAAgCgB,GAAG,CAAChD,OAAO,EAAE,EAAE,OAAO,CAAC;IACvE,CAAC,SAAS;MACNK,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;;EAGD;EACA,MAAMkE,mBAAmB,GAAG1G,WAAW,CAAE2G,IAAI,IAAK;IAC9C,IAAI,CAAC1E,eAAe,EAAE;MAClBkC,WAAW,CAAC,wCAAwC,EAAE,OAAO,CAAC;MAC9D;IACJ;IACA,IAAI5C,mBAAmB,CAACiF,MAAM,IAAInF,WAAW,EAAE;MAC3C8C,WAAW,CAAC,6CAA6C,EAAE,OAAO,CAAC;MACnE;IACJ;IAEA,MAAMyC,qBAAqB,GAAGnF,qBAAqB,CAACoF,MAAM,CAACC,EAAE,IAAIA,EAAE,KAAKH,IAAI,CAACG,EAAE,CAAC,CAACN,MAAM;IACvF,MAAMO,kBAAkB,GAAGxF,mBAAmB,CAACsF,MAAM,CAACG,CAAC,IAAIA,CAAC,CAACF,EAAE,KAAKH,IAAI,CAACG,EAAE,CAAC,CAACN,MAAM;IAEnF,IAAIO,kBAAkB,IAAIH,qBAAqB,EAAE;MAC7CzC,WAAW,CAAC,8CAA8CwC,IAAI,CAACM,IAAI,qDAAqD,EAAE,OAAO,CAAC;MAClI;IACJ;IAEA,MAAMC,kBAAkB,GAAG3F,mBAAmB,CAACsF,MAAM,CAACG,CAAC,IAAIA,CAAC,CAAC1E,IAAI,KAAK,SAAS,CAAC,CAACkE,MAAM;IACvF,IAAIG,IAAI,CAACrE,IAAI,KAAK,SAAS,IAAI4E,kBAAkB,KAAK,CAAC,IAAI3F,mBAAmB,CAACiF,MAAM,KAAK,CAAC,EAAE;MACxFrC,WAAW,CAAC,mEAAmE,EAAE,OAAO,CAAC;MACzF;IACL;;IAEA;IACA3C,sBAAsB,CAAC2F,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;MACrC,GAAGR,IAAI;MACPS,WAAW,EAAElH,MAAM,CAAC,CAAC;MAAE;MACvBmH,YAAY,EAAEV,IAAI,CAACW;IACvB,CAAC,CAAC,CAAC;IACHnD,WAAW,CAAC,0BAA0B,EAAE,SAAS,CAAC;EACtD,CAAC,EAAE,CAAClC,eAAe,EAAEZ,WAAW,EAAEE,mBAAmB,EAAEE,qBAAqB,EAAE0C,WAAW,CAAC,CAAC;;EAE3F;EACA,MAAMoD,wBAAwB,GAAGvH,WAAW,CAAEoH,WAAW,IAAK;IAC1D,MAAMI,WAAW,GAAGjG,mBAAmB,CAACsF,MAAM,CAACF,IAAI,IAAIA,IAAI,CAACS,WAAW,KAAKA,WAAW,CAAC;IACxF,MAAMK,YAAY,GAAGD,WAAW,CAACX,MAAM,CAACG,CAAC,IAAIA,CAAC,CAAC1E,IAAI,KAAK,SAAS,CAAC,CAACkE,MAAM;IAEzE,IAAIiB,YAAY,KAAK,CAAC,IAAID,WAAW,CAAChB,MAAM,GAAG,CAAC,EAAE;MAC9CrC,WAAW,CAAC,8EAA8E,EAAE,OAAO,CAAC;MACpG;IACJ;IACA3C,sBAAsB,CAACgG,WAAW,CAAC;IACnCrD,WAAW,CAAC,yBAAyB,EAAE,SAAS,CAAC;EACrD,CAAC,EAAE,CAAC5C,mBAAmB,EAAE4C,WAAW,CAAC,CAAC;;EAEtC;EACA,MAAMuD,kBAAkB,GAAG1H,WAAW,CAAC,MAAOoH,WAAW,IAAK;IAC1D,MAAMO,SAAS,GAAGpG,mBAAmB,CAACqG,IAAI,CAACjB,IAAI,IAAIA,IAAI,CAACS,WAAW,KAAKA,WAAW,CAAC;IACpF,IAAI,CAACO,SAAS,EAAE;IAEhB,IAAIA,SAAS,CAACN,YAAY,GAAG,CAAC,EAAE;MAC5B7F,sBAAsB,CAAC2F,IAAI,IACvBA,IAAI,CAACU,GAAG,CAAClB,IAAI,IACTA,IAAI,CAACS,WAAW,KAAKA,WAAW,GAAG;QAAE,GAAGT,IAAI;QAAEU,YAAY,EAAEV,IAAI,CAACU,YAAY,GAAG;MAAE,CAAC,GAAGV,IAC1F,CACJ,CAAC;;MAED;MACA,IAAI;QACA,MAAMpC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGjE,YAAY,YAAY,EAAE;UACtDkE,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YAAE,cAAc,EAAE;UAAmB,CAAC;UAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACjBoC,IAAI,EAAEU,SAAS,CAACV,IAAI;YAAE;YACtB3E,IAAI,EAAEqF,SAAS,CAACrF,IAAI;YAAE;YACtBwF,YAAY,EAAEH,SAAS,CAACP;UAC5B,CAAC;QACL,CAAC,CAAC;QACF,IAAI,CAAC7C,QAAQ,CAACU,EAAE,EAAE;UACd,MAAM,IAAIC,KAAK,CAAC,uBAAuBX,QAAQ,CAACyB,MAAM,EAAE,CAAC;QAC7D;QACA,MAAMjB,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;QAClCI,OAAO,CAAC2C,GAAG,CAAC,uBAAuB,EAAEhD,IAAI,CAAC5C,OAAO,CAAC;QAClDiD,OAAO,CAAC2C,GAAG,CAAC,0CAA0C,EAAEhD,IAAI,CAACiD,SAAS,CAAC;MAC3E,CAAC,CAAC,OAAO7C,GAAG,EAAE;QACVhB,WAAW,CAAC,sDAAsD,GAAGgB,GAAG,CAAChD,OAAO,EAAE,OAAO,CAAC;QAC1FiD,OAAO,CAACzD,KAAK,CAAC,uCAAuC,EAAEwD,GAAG,CAAC;MAC/D;IACJ,CAAC,MAAM;MACHhB,WAAW,CAAC,IAAIwD,SAAS,CAACV,IAAI,2CAA2C,EAAE,OAAO,CAAC;IACvF;EACJ,CAAC,EAAE,CAAC1F,mBAAmB,EAAE4C,WAAW,CAAC,CAAC;;EAEtC;EACA,MAAM8D,mBAAmB,GAAGjI,WAAW,CAAEoH,WAAW,IAAK;IACrD5F,sBAAsB,CAAC2F,IAAI,IACvBA,IAAI,CAACU,GAAG,CAAClB,IAAI,IACTA,IAAI,CAACS,WAAW,KAAKA,WAAW,GAAG;MAAE,GAAGT,IAAI;MAAEU,YAAY,EAAEV,IAAI,CAACW;IAAsB,CAAC,GAAGX,IAC/F,CACJ,CAAC;IACDxC,WAAW,CAAC,kBAAkB,EAAE,SAAS,CAAC;EAC9C,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;;EAEjB;EACA;EACA,MAAM+D,gCAAgC,GAAGvH,QAAQ,CAC5CkG,MAAM,CAACF,IAAI,IAAIlF,qBAAqB,CAAC0G,QAAQ,CAACxB,IAAI,CAACG,EAAE,CAAC,CAAC,CAAC;EAAA,CACxDsB,MAAM,CAAC,CAACC,GAAG,EAAE1B,IAAI,KAAK;IACnB;IACA,IAAI,CAAC0B,GAAG,CAAC1B,IAAI,CAACG,EAAE,CAAC,EAAE;MACf,MAAMwB,KAAK,GAAG7G,qBAAqB,CAACoF,MAAM,CAACC,EAAE,IAAIA,EAAE,KAAKH,IAAI,CAACG,EAAE,CAAC,CAACN,MAAM;MACvE6B,GAAG,CAAC1B,IAAI,CAACG,EAAE,CAAC,GAAG;QAAE,GAAGH,IAAI;QAAE4B,YAAY,EAAED;MAAM,CAAC;IACnD;IACA,OAAOD,GAAG;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;EAEV,MAAMG,mBAAmB,GAAGC,MAAM,CAACC,MAAM,CAACR,gCAAgC,CAAC;;EAE3E;;EAEA;EACAnI,SAAS,CAAC,MAAM;IACZ,IAAIkC,eAAe,IAAIgB,QAAQ,IAAIpB,QAAQ,IAAIoC,WAAW,KAAK,aAAa,EAAE;MAC1E0E,iBAAiB,CAAC,CAAC;IACvB;EACJ,CAAC,EAAE,CAAC1G,eAAe,EAAEgB,QAAQ,EAAEpB,QAAQ,EAAEoC,WAAW,CAAC,CAAC,CAAC,CAAC;;EAExD,MAAM2E,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI,CAAC/G,QAAQ,IAAI,CAACE,QAAQ,EAAE;MACxBoC,WAAW,CAAC,4CAA4C,EAAE,OAAO,CAAC;MAClE;IACJ;IACA,IAAI,CAAChB,gBAAgB,EAAE;MACnBgB,WAAW,CAAC,2BAA2B,EAAE,OAAO,CAAC;MACjD;IACJ;IACA3B,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACA,MAAM+B,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGjE,YAAY,oBAAoB,EAAE;QAC9DkE,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,SAAS,EAAEjD,QAAQ;UAAEE,QAAQ,EAAEA,QAAQ;UAAE8G,YAAY,EAAE1F;QAAiB,CAAC;MACpG,CAAC,CAAC;MACF,MAAM4B,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAClC,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACpD,KAAK,IAAI,2BAA2B,CAAC;MAC9D;MACAwC,WAAW,CAAC,YAAYY,IAAI,CAAC8D,YAAY,wBAAwB9D,IAAI,CAAC+D,YAAY,EAAE,EAAE,SAAS,CAAC;MAChG1F,mBAAmB,CAAC,EAAE,CAAC,CAAC,CAAC;MACzBuF,iBAAiB,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,OAAOxD,GAAG,EAAE;MACVC,OAAO,CAACzD,KAAK,CAAC,yBAAyB,EAAEwD,GAAG,CAAC;MAC7ChB,WAAW,CAAC,6BAA6BgB,GAAG,CAAChD,OAAO,EAAE,EAAE,OAAO,CAAC;IACpE,CAAC,SAAS;MACNK,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAMuG,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI,CAAClH,QAAQ,IAAI,CAACE,QAAQ,EAAE;MACxBoC,WAAW,CAAC,0CAA0C,EAAE,OAAO,CAAC;MAChE;IACJ;IACA,IAAI,CAACd,gBAAgB,EAAE;MACnBc,WAAW,CAAC,2BAA2B,EAAE,OAAO,CAAC;MACjD;IACJ;IACA3B,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACA,MAAM+B,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGjE,YAAY,sBAAsB,EAAE;QAChEkE,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,SAAS,EAAEjD,QAAQ;UAAEE,QAAQ,EAAEA,QAAQ;UAAE+G,YAAY,EAAEzF;QAAiB,CAAC;MACpG,CAAC,CAAC;MACF,MAAM0B,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAClC,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACpD,KAAK,IAAI,yBAAyB,CAAC;MAC5D;MACAwC,WAAW,CAACY,IAAI,CAAC5C,OAAO,EAAE,SAAS,CAAC;MACpCmB,mBAAmB,CAAC,EAAE,CAAC,CAAC,CAAC;MACzB;IACJ,CAAC,CAAC,OAAO6B,GAAG,EAAE;MACVC,OAAO,CAACzD,KAAK,CAAC,wBAAwB,EAAEwD,GAAG,CAAC;MAC5ChB,WAAW,CAAC,2BAA2BgB,GAAG,CAAChD,OAAO,EAAE,EAAE,OAAO,CAAC;IAClE,CAAC,SAAS;MACNK,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAMmG,iBAAiB,GAAG3I,WAAW,CAAC,YAAY;IAC9C,IAAI,CAACiC,eAAe,IAAI,CAACJ,QAAQ,IAAI,CAACE,QAAQ,EAAE;IAChDS,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACA,MAAM+B,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGjE,YAAY,iBAAiB,EAAE;QAC3DkE,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,SAAS,EAAEjD,QAAQ;UAAEE,QAAQ,EAAEA;QAAS,CAAC;MACpE,CAAC,CAAC;MACF,MAAMgD,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAClC,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACpD,KAAK,IAAI,gCAAgC,CAAC;MACnE;MACA6B,aAAa,CAACuB,IAAI,CAACiE,QAAQ,IAAI,EAAE,CAAC;IACtC,CAAC,CAAC,OAAO7D,GAAG,EAAE;MACVC,OAAO,CAACzD,KAAK,CAAC,6BAA6B,EAAEwD,GAAG,CAAC;MACjDhB,WAAW,CAAC,gCAAgCgB,GAAG,CAAChD,OAAO,EAAE,EAAE,OAAO,CAAC;MACnEqB,aAAa,CAAC,EAAE,CAAC;IACrB,CAAC,SAAS;MACNhB,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC,EAAE,CAACP,eAAe,EAAEJ,QAAQ,EAAEE,QAAQ,EAAEoC,WAAW,CAAC,CAAC;EAEtD,MAAM8E,qBAAqB,GAAGjJ,WAAW,CAAC,MAAOkJ,SAAS,IAAK;IAC3D,IAAI,CAACjH,eAAe,IAAI,CAACJ,QAAQ,IAAI,CAACE,QAAQ,IAAI,CAACmH,SAAS,EAAE;IAC9D1G,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACA,MAAM+B,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGjE,YAAY,gBAAgB2I,SAAS,UAAU,EAAE;QAC7EzE,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,SAAS,EAAEjD,QAAQ;UAAEE,QAAQ,EAAEA;QAAS,CAAC;MACpE,CAAC,CAAC;MACF,MAAMgD,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAClC,IAAI,CAACT,QAAQ,CAACU,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACpD,KAAK,IAAI,2CAA2C,CAAC;MAC9E;MACAiC,6BAA6B,CAACmB,IAAI,CAACoE,OAAO,IAAI,EAAE,CAAC;IACrD,CAAC,CAAC,OAAOhE,GAAG,EAAE;MACVC,OAAO,CAACzD,KAAK,CAAC,oCAAoC,EAAEwD,GAAG,CAAC;MACxDhB,WAAW,CAAC,4BAA4BgB,GAAG,CAAChD,OAAO,EAAE,EAAE,OAAO,CAAC;MAC/DyB,6BAA6B,CAAC,EAAE,CAAC;IACrC,CAAC,SAAS;MACNpB,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC,EAAE,CAACP,eAAe,EAAEJ,QAAQ,EAAEE,QAAQ,EAAEoC,WAAW,CAAC,CAAC;EAEtD,MAAMiF,qBAAqB,GAAIC,OAAO,IAAK;IACvC3F,oBAAoB,CAAC2F,OAAO,CAAC;IAC7BJ,qBAAqB,CAACI,OAAO,CAACC,UAAU,CAAC;IACzCxF,0BAA0B,CAAC,IAAI,CAAC,CAAC,CAAC;IAClCE,uBAAuB,CAAC,IAAI,CAAC;IAC7BE,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;EACnC,CAAC;EAED,MAAMqF,qBAAqB,GAAIC,iBAAiB,IAAK;IACjD,MAAMC,MAAM,GAAG9F,0BAA0B,CAACiE,IAAI,CAAC8B,CAAC,IAAIA,CAAC,CAAC5E,SAAS,KAAK0E,iBAAiB,CAAC;IACtF,IAAIC,MAAM,EAAE;MACR3F,0BAA0B,CAAC2F,MAAM,CAAC3E,SAAS,CAAC;MAC5Cd,uBAAuB,CAACyF,MAAM,CAAC1E,IAAI,CAAC,CAAC,CAAC;MACtCb,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;IACnC,CAAC,MAAM;MACHC,WAAW,CAAC,yCAAyC,EAAE,OAAO,CAAC;IACnE;EACJ,CAAC;;EAED;EACA,MAAMwF,kBAAkB,GAAIC,MAAM,IAAK;IACnC,OAAOjJ,QAAQ,CAACiH,IAAI,CAACjB,IAAI,IAAIA,IAAI,CAACG,EAAE,KAAK8C,MAAM,CAAC;EACpD,CAAC;;EAED;EACA,oBACIxJ,OAAA,CAAAE,SAAA;IAAAuJ,QAAA,gBACIzJ,OAAA;MAAAyJ,QAAA,EAAQrJ;IAAS;MAAAsJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAC1B7J,OAAA;MAAK8J,SAAS,EAAC,KAAK;MAAAL,QAAA,gBAChBzJ,OAAA;QAAI8J,SAAS,EAAC,WAAW;QAAAL,QAAA,EAAC;MAA2B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAG1D7J,OAAA;QAAK8J,SAAS,EAAC,iBAAiB;QAAAL,QAAA,gBAC5BzJ,OAAA;UACIkC,IAAI,EAAC,MAAM;UACX6H,WAAW,EAAC,WAAW;UACvBC,KAAK,EAAEvI,QAAS;UAChBwI,QAAQ,EAAGC,CAAC,IAAKxI,WAAW,CAACwI,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UAC7CI,QAAQ,EAAEjI;QAAQ;UAAAuH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrB,CAAC,eACF7J,OAAA;UACIkC,IAAI,EAAC,UAAU;UACf6H,WAAW,EAAC,UAAU;UACtBC,KAAK,EAAErI,QAAS;UAChBsI,QAAQ,EAAGC,CAAC,IAAKtI,WAAW,CAACsI,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UAC7CI,QAAQ,EAAEjI;QAAQ;UAAAuH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrB,CAAC,eACF7J,OAAA;UAAQqK,OAAO,EAAEpF,sBAAuB;UAACmF,QAAQ,EAAEjI,OAAQ;UAAAsH,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC3E7J,OAAA;UAAQqK,OAAO,EAAEnG,mBAAoB;UAACkG,QAAQ,EAAEjI,OAAQ;UAAAsH,QAAA,EAAC;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,EAC/EhI,eAAe,iBAAI7B,OAAA;UAAQqK,OAAO,EAAE5E,cAAe;UAAC2E,QAAQ,EAAEjI,OAAQ;UAAAsH,QAAA,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzF,CAAC,eAGN7J,OAAA;QAAK8J,SAAS,EAAC,iBAAiB;QAAAL,QAAA,gBAC5BzJ,OAAA;UAAAyJ,QAAA,GAAO,SAAO,eAAAzJ,OAAA;YAAOkC,IAAI,EAAC,QAAQ;YAAC8H,KAAK,EAAEvJ,cAAe;YAACwJ,QAAQ,EAAGC,CAAC,IAAKxJ,iBAAiB,CAAC4J,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEC,QAAQ,CAACN,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,IAAI,CAAC,CAAC,CAAE;YAACS,GAAG,EAAC,GAAG;YAACF,GAAG,EAAC;UAAI;YAAAb,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACrK7J,OAAA;UAAAyJ,QAAA,GAAO,WAAS,eAAAzJ,OAAA;YAAOkC,IAAI,EAAC,QAAQ;YAAC8H,KAAK,EAAErJ,MAAO;YAACsJ,QAAQ,EAAGC,CAAC,IAAKtJ,SAAS,CAAC4J,QAAQ,CAACN,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,IAAI,CAAC;UAAE;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACzH7J,OAAA;UAAAyJ,QAAA,GAAO,WAAS,eAAAzJ,OAAA;YAAOkC,IAAI,EAAC,QAAQ;YAAC8H,KAAK,EAAEnJ,MAAO;YAACoJ,QAAQ,EAAGC,CAAC,IAAKpJ,SAAS,CAAC0J,QAAQ,CAACN,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,IAAI,CAAC;UAAE;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACzH7J,OAAA;UAAAyJ,QAAA,GAAO,WAAS,eAAAzJ,OAAA;YAAOkC,IAAI,EAAC,QAAQ;YAAC8H,KAAK,EAAEjJ,MAAO;YAACkJ,QAAQ,EAAGC,CAAC,IAAKlJ,SAAS,CAACwJ,QAAQ,CAACN,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,IAAI,CAAC;UAAE;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACzH7J,OAAA;UAAAyJ,QAAA,GAAG,iBAAe,eAAAzJ,OAAA;YAAM8J,SAAS,EAAC,WAAW;YAAAL,QAAA,EAAExI;UAAW;YAAAyI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrE,CAAC,EAGL9H,OAAO,CAACE,IAAI,iBAAIjC,OAAA;QAAK8J,SAAS,EAAE,eAAe/H,OAAO,CAACG,IAAI,EAAG;QAAAuH,QAAA,EAAE1H,OAAO,CAACE;MAAI;QAAAyH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAGpF7J,OAAA;QAAK8J,SAAS,EAAC,gBAAgB;QAAAL,QAAA,gBAC3BzJ,OAAA;UACI8J,SAAS,EAAE,YAAYzH,SAAS,KAAK,WAAW,GAAG,QAAQ,GAAG,EAAE,EAAG;UACnEgI,OAAO,EAAEA,CAAA,KAAM/H,YAAY,CAAC,WAAW,CAAE;UAAAmH,QAAA,GAC5C,oBACqB,EAACrB,mBAAmB,CAAChC,MAAM,EAAC,WAAS,EAAC/E,qBAAqB,CAAC+E,MAAM,EAAC,eACzF;QAAA;UAAAsD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACN7J,OAAA;UACI8J,SAAS,EAAE,YAAYzH,SAAS,KAAK,MAAM,GAAG,QAAQ,GAAG,EAAE,EAAG;UAC9DgI,OAAO,EAAEA,CAAA,KAAM/H,YAAY,CAAC,MAAM,CAAE;UAAAmH,QAAA,GACvC,aACc,EAACtI,mBAAmB,CAACiF,MAAM,EAAC,GAAC,EAACnF,WAAW,EAAC,GACzD;QAAA;UAAAyI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,EACJhI,eAAe,iBACb7B,OAAA;UACI8J,SAAS,EAAE,YAAYzH,SAAS,KAAK,WAAW,GAAG,QAAQ,GAAG,EAAE,EAAG;UACnEgI,OAAO,EAAEA,CAAA,KAAM;YAAE/H,YAAY,CAAC,WAAW,CAAC;YAAEgB,oBAAoB,CAAC,IAAI,CAAC;YAAEI,0BAA0B,CAAC,IAAI,CAAC;YAAEE,uBAAuB,CAAC,IAAI,CAAC;YAAEE,cAAc,CAAC,aAAa,CAAC;UAAE,CAAE;UAAA2F,QAAA,EAC7K;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CACR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eAGN7J,OAAA;QAAK8J,SAAS,EAAC,cAAc;QAAAL,QAAA,GAExBpH,SAAS,KAAK,WAAW,iBACtBrC,OAAA;UAAK8J,SAAS,EAAC,uBAAuB;UAAAL,QAAA,gBAClCzJ,OAAA;YAAI8J,SAAS,EAAC,aAAa;YAAAL,QAAA,EAAC;UAAgB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EAChD1H,OAAO,iBAAInC,OAAA;YAAG8J,SAAS,EAAC,eAAe;YAAAL,QAAA,EAAC;UAAgB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,EAC5D,CAAChI,eAAe,IAAI,CAACM,OAAO,iBACzBnC,OAAA;YAAK8J,SAAS,EAAC,mBAAmB;YAAAL,QAAA,eAC9BzJ,OAAA;cAAAyJ,QAAA,EAAI;YAAoC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5C,CACR,EACAhI,eAAe,IAAI,CAACM,OAAO,IAAIiG,mBAAmB,CAAChC,MAAM,GAAG,CAAC,iBAC1DpG,OAAA;YAAK8J,SAAS,EAAC,WAAW;YAAAL,QAAA,EACrBrB,mBAAmB,CAACX,GAAG,CAAElB,IAAI,iBAC1BvG,OAAA;cAAmB8J,SAAS,EAAC,0BAA0B;cAACO,OAAO,EAAEA,CAAA,KAAM/D,mBAAmB,CAACC,IAAI,CAAE;cAAAkD,QAAA,gBAC7FzJ,OAAA;gBACI0K,GAAG,EAAE,mDAAmDnE,IAAI,CAACM,IAAI,CAAC8D,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,EAAG;gBACtGC,GAAG,EAAEtE,IAAI,CAACM,IAAK;gBACfiD,SAAS,EAAC,YAAY;gBACtBgB,OAAO,EAAGZ,CAAC,IAAK;kBAAEA,CAAC,CAACC,MAAM,CAACY,OAAO,GAAG,IAAI;kBAAEb,CAAC,CAACC,MAAM,CAACO,GAAG,GAAG,+DAA+D;gBAAE;cAAE;gBAAAhB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChI,CAAC,EACDtD,IAAI,CAACyE,eAAe,iBACjBhL,OAAA;gBAAG8J,SAAS,EAAC,eAAe;gBAAAL,QAAA,GAAC,YAAU,EAAClD,IAAI,CAACyE,eAAe;cAAA;gBAAAtB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CACnE,eACD7J,OAAA;gBAAI8J,SAAS,EAAC,WAAW;gBAAAL,QAAA,GAAElD,IAAI,CAACM,IAAI,EAAC,IAAE,EAACN,IAAI,CAACrE,IAAI,EAAC,GAAC;cAAA;gBAAAwH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACxD7J,OAAA;gBAAG8J,SAAS,EAAC,kBAAkB;gBAAAL,QAAA,EAAElD,IAAI,CAAC0E;cAAW;gBAAAvB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,EACrDtD,IAAI,CAAC2E,MAAM,iBACRlL,OAAA;gBAAG8J,SAAS,EAAC,aAAa;gBAAAL,QAAA,GAAC,UAAQ,EAAClD,IAAI,CAAC2E,MAAM;cAAA;gBAAAxB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CACtD,eACD7J,OAAA;gBAAG8J,SAAS,EAAC,WAAW;gBAAAL,QAAA,GAAC,UAAQ,eAAAzJ,OAAA;kBAAAyJ,QAAA,EAAOlD,IAAI,CAAC4E;gBAAM;kBAAAzB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eAC/D7J,OAAA;gBAAG8J,SAAS,EAAC,WAAW;gBAAAL,QAAA,GAAC,gBAAc,eAAAzJ,OAAA;kBAAAyJ,QAAA,EAAOlD,IAAI,CAAC4B;gBAAY;kBAAAuB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eAC3E7J,OAAA;gBACIqK,OAAO,EAAGH,CAAC,IAAK;kBAAEA,CAAC,CAACkB,eAAe,CAAC,CAAC;kBAAE9E,mBAAmB,CAACC,IAAI,CAAC;gBAAE,CAAE,CAAC;gBACrE;gBAAA;gBACA6D,QAAQ,EAAEjJ,mBAAmB,CAACiF,MAAM,IAAInF,WAAW,IACvCE,mBAAmB,CAACsF,MAAM,CAACG,CAAC,IAAIA,CAAC,CAACF,EAAE,KAAKH,IAAI,CAACG,EAAE,CAAC,CAACN,MAAM,IAAIG,IAAI,CAAC4B,YAAa;gBAC1F2B,SAAS,EAAC,eAAe;gBAAAL,QAAA,EAC5B;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA,GAzBHtD,IAAI,CAACG,EAAE;cAAAgD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OA0BZ,CACR;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CACR,EAEAhI,eAAe,IAAI,CAACM,OAAO,iBACxBnC,OAAA;YAAK8J,SAAS,EAAC,sBAAsB;YAAAL,QAAA,GAChCrB,mBAAmB,CAAChC,MAAM,KAAK,CAAC,iBAC7BpG,OAAA;cAAG8J,SAAS,EAAC,eAAe;cAAAL,QAAA,EAAC;YAAoF;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CACvH,eACD7J,OAAA;cACIqK,OAAO,EAAEpE,qBAAsB;cAC/BmE,QAAQ,EAAEjI,OAAQ;cAClB2H,SAAS,EAAC,gBAAgB;cAAAL,QAAA,EAC7B;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EACRtH,kBAAkB,CAAC6D,MAAM,GAAG,CAAC,iBAC1BpG,OAAA;cAAK8J,SAAS,EAAC,mBAAmB;cAAAL,QAAA,gBAC9BzJ,OAAA;gBAAAyJ,QAAA,GAAI,4BAA0B,EAAChH,kBAAkB,EAAC,GAAC;cAAA;gBAAAiH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACxD7J,OAAA;gBAAAyJ,QAAA,EACKlH,kBAAkB,CAACkF,GAAG,CAAC,CAAClB,IAAI,EAAE8E,KAAK,kBAChCrL,OAAA;kBAAAyJ,QAAA,GAAoC,GAAC,EAChClD,IAAI,CAACM,IAAI,EAAC,IAAE,EAACN,IAAI,CAACrE,IAAI,EAAC,IAAE,EAACqE,IAAI,CAAC4E,MAAM,EAAC,GACvC,EAACxI,kBAAkB,CAACoF,QAAQ,CAACxB,IAAI,CAACG,EAAE,CAAC,iBAAI1G,OAAA;oBAAAyJ,QAAA,EAAM;kBAAY;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA,GAF7DtD,IAAI,CAACG,EAAE,GAAG,OAAO,GAAG2E,KAAK;kBAAA3B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAG9B,CACP;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACF,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CACR;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CACR,EAGAxH,SAAS,KAAK,MAAM,iBACjBrC,OAAA;UAAK8J,SAAS,EAAC,kBAAkB;UAAAL,QAAA,gBAC7BzJ,OAAA;YAAI8J,SAAS,EAAC,aAAa;YAAAL,QAAA,GAAC,aAAW,EAACtI,mBAAmB,CAACiF,MAAM,EAAC,GAAC,EAACnF,WAAW,EAAC,GAAC;UAAA;YAAAyI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACvF7J,OAAA;YAAK8J,SAAS,EAAC,WAAW;YAAAL,QAAA,EACrB5H,eAAe,GACZV,mBAAmB,CAACiF,MAAM,KAAK,CAAC,gBAC5BpG,OAAA;cAAG8J,SAAS,EAAC,eAAe;cAAAL,QAAA,EAAC;YAAgE;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,GAEjG1I,mBAAmB,CAACsG,GAAG,CAAElB,IAAI,iBACzBvG,OAAA;cAA4B8J,SAAS,EAAC,qBAAqB;cAAAL,QAAA,gBACvDzJ,OAAA;gBACI0K,GAAG,EAAE,mDAAmDnE,IAAI,CAACM,IAAI,CAAC8D,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,EAAG;gBACtGC,GAAG,EAAEtE,IAAI,CAACM,IAAK;gBACfiD,SAAS,EAAC,YAAY;gBACtBgB,OAAO,EAAGZ,CAAC,IAAK;kBAAEA,CAAC,CAACC,MAAM,CAACY,OAAO,GAAG,IAAI;kBAAEb,CAAC,CAACC,MAAM,CAACO,GAAG,GAAG,+DAA+D;gBAAE;cAAE;gBAAAhB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChI,CAAC,EACDtD,IAAI,CAACyE,eAAe,iBACjBhL,OAAA;gBAAG8J,SAAS,EAAC,eAAe;gBAAAL,QAAA,GAAC,YAAU,EAAClD,IAAI,CAACyE,eAAe;cAAA;gBAAAtB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CACnE,eACD7J,OAAA;gBAAI8J,SAAS,EAAC,WAAW;gBAAAL,QAAA,GAAElD,IAAI,CAACM,IAAI,EAAC,IAAE,EAACN,IAAI,CAACrE,IAAI,EAAC,GAAC;cAAA;gBAAAwH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACxD7J,OAAA;gBAAG8J,SAAS,EAAC,kBAAkB;gBAAAL,QAAA,EAAElD,IAAI,CAAC0E;cAAW;gBAAAvB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,EACrDtD,IAAI,CAAC2E,MAAM,iBACRlL,OAAA;gBAAG8J,SAAS,EAAC,aAAa;gBAAAL,QAAA,GAAC,UAAQ,EAAClD,IAAI,CAAC2E,MAAM;cAAA;gBAAAxB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CACtD,eACD7J,OAAA;gBAAG8J,SAAS,EAAC,WAAW;gBAAAL,QAAA,GAAC,UAAQ,eAAAzJ,OAAA;kBAAAyJ,QAAA,EAAOlD,IAAI,CAAC4E;gBAAM;kBAAAzB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eAC/D7J,OAAA;gBAAG8J,SAAS,EAAC,WAAW;gBAAAL,QAAA,GAAC,aAAW,EAAClD,IAAI,CAACU,YAAY,EAAC,GAAC,EAACV,IAAI,CAACW,qBAAqB;cAAA;gBAAAwC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACxF7J,OAAA;gBAAK8J,SAAS,EAAC,cAAc;gBAAAL,QAAA,gBACzBzJ,OAAA;kBACIqK,OAAO,EAAEA,CAAA,KAAM/C,kBAAkB,CAACf,IAAI,CAACS,WAAW,CAAE;kBACpDoD,QAAQ,EAAE7D,IAAI,CAACU,YAAY,IAAI,CAAE;kBACjC6C,SAAS,EAAC,YAAY;kBAAAL,QAAA,EACzB;gBAED;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eACT7J,OAAA;kBACIqK,OAAO,EAAEA,CAAA,KAAMxC,mBAAmB,CAACtB,IAAI,CAACS,WAAW,CAAE;kBACrD8C,SAAS,EAAC,cAAc;kBAAAL,QAAA,EAC3B;gBAED;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eACT7J,OAAA;kBACIqK,OAAO,EAAEA,CAAA,KAAMlD,wBAAwB,CAACZ,IAAI,CAACS,WAAW,CAAE;kBAC1D8C,SAAS,EAAC,eAAe;kBAAAL,QAAA,EAC5B;gBAED;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACR,CAAC;YAAA,GArCAtD,IAAI,CAACS,WAAW;cAAA0C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAsCrB,CACR,CACJ,gBAED7J,OAAA;cAAK8J,SAAS,EAAC,mBAAmB;cAAAL,QAAA,gBAC9BzJ,OAAA;gBAAAyJ,QAAA,EAAI;cAAoD;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC7D7J,OAAA;gBAAAyJ,QAAA,EAAG;cAAqD;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3D;UACR;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CACR,EAGAhI,eAAe,IAAIQ,SAAS,KAAK,WAAW,iBACzCrC,OAAA;UAAK8J,SAAS,EAAC,qBAAqB;UAAAL,QAAA,gBAChCzJ,OAAA;YAAI8J,SAAS,EAAC,aAAa;YAAAL,QAAA,EAAC;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAE1C7J,OAAA;YAAK8J,SAAS,EAAC,YAAY;YAAAL,QAAA,gBACvBzJ,OAAA;cACI8J,SAAS,EAAE,mBAAmBjG,WAAW,KAAK,gBAAgB,GAAG,QAAQ,GAAG,EAAE,EAAG;cACjFwG,OAAO,EAAEA,CAAA,KAAM;gBAAEvG,cAAc,CAAC,gBAAgB,CAAC;gBAAER,oBAAoB,CAAC,IAAI,CAAC;gBAAEI,0BAA0B,CAAC,IAAI,CAAC;cAAE,CAAE;cAAA+F,QAAA,EACtH;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACN7J,OAAA;cACI8J,SAAS,EAAE,mBAAmBjG,WAAW,KAAK,aAAa,GAAG,QAAQ,GAAG,EAAE,EAAG;cAC9EwG,OAAO,EAAEA,CAAA,KAAM;gBAAEvG,cAAc,CAAC,aAAa,CAAC;gBAAEJ,0BAA0B,CAAC,IAAI,CAAC;cAAE,CAAE;cAAA+F,QAAA,EACvF;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,EACLpG,uBAAuB,iBACpBzD,OAAA;cACI8J,SAAS,EAAE,mBAAmBjG,WAAW,KAAK,aAAa,GAAG,QAAQ,GAAG,EAAE,EAAG;cAC9EwG,OAAO,EAAEA,CAAA,KAAMvG,cAAc,CAAC,aAAa,CAAE;cAAA2F,QAAA,GAChD,WACY,EAAChG,uBAAuB;YAAA;cAAAiG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChC,CACR;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,EAGLhG,WAAW,KAAK,gBAAgB,iBAC7B7D,OAAA;YAAK8J,SAAS,EAAC,kBAAkB;YAAAL,QAAA,gBAC7BzJ,OAAA;cAAAyJ,QAAA,EAAI;YAAuB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAChC7J,OAAA;cACIkC,IAAI,EAAC,MAAM;cACX6H,WAAW,EAAC,iDAAiD;cAC7DC,KAAK,EAAEjH,gBAAiB;cACxBkH,QAAQ,EAAGC,CAAC,IAAKlH,mBAAmB,CAACkH,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;cACrDI,QAAQ,EAAEjI,OAAQ;cAClBmJ,KAAK,EAAE;gBAAEC,QAAQ,EAAE;cAAQ;YAAE;cAAA7B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChC,CAAC,eACF7J,OAAA;cAAQqK,OAAO,EAAE7B,mBAAoB;cAAC4B,QAAQ,EAAEjI,OAAQ;cAAAsH,QAAA,EAAC;YAEzD;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT7J,OAAA;cAAG8J,SAAS,EAAC,eAAe;cAAAL,QAAA,EAAC;YAE7B;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACR,EAGAhG,WAAW,KAAK,aAAa,iBAC1B7D,OAAA;YAAK8J,SAAS,EAAC,kBAAkB;YAAAL,QAAA,gBAC7BzJ,OAAA;cAAAyJ,QAAA,EAAI;YAAkB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,EAC1B1H,OAAO,gBACJnC,OAAA;cAAG8J,SAAS,EAAC,eAAe;cAAAL,QAAA,EAAC;YAAmB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,GACpD1G,UAAU,CAACiD,MAAM,KAAK,CAAC,gBACvBpG,OAAA;cAAG8J,SAAS,EAAC,eAAe;cAAAL,QAAA,EAAC;YAAqC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,gBAEtE7J,OAAA;cAAK8J,SAAS,EAAC,iBAAiB;cAAAL,QAAA,eAC5BzJ,OAAA;gBAAAyJ,QAAA,EACKtG,UAAU,CAACsE,GAAG,CAACwB,OAAO,iBACnBjJ,OAAA;kBAA6BqK,OAAO,EAAEA,CAAA,KAAMrB,qBAAqB,CAACC,OAAO,CAAE;kBAAAQ,QAAA,gBACvEzJ,OAAA;oBAAAyJ,QAAA,gBACIzJ,OAAA;sBAAAyJ,QAAA,EAASR,OAAO,CAACR;oBAAY;sBAAAiB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAS,CAAC,YAAQ,EAACZ,OAAO,CAACP,YAAY,EAAC,GACzE;kBAAA;oBAAAgB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACP7J,OAAA;oBAAAyJ,QAAA,GAAM,WAAS,EAAClG,0BAA0B,CAACkD,MAAM,CAAC6C,CAAC,IAAIA,CAAC,CAACJ,UAAU,KAAKD,OAAO,CAACC,UAAU,CAAC,CAAC9C,MAAM;kBAAA;oBAAAsD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,KAAC;gBAAA,GAJtGZ,OAAO,CAACC,UAAU;kBAAAQ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAKvB,CACP;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACF;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CACR,EAEAxG,iBAAiB,iBACdrD,OAAA,CAAAE,SAAA;cAAAuJ,QAAA,gBACIzJ,OAAA;gBAAIsL,KAAK,EAAE;kBAAEE,SAAS,EAAE;gBAAO,CAAE;gBAAA/B,QAAA,GAAC,eAAY,EAACpG,iBAAiB,CAACoF,YAAY,EAAC,IAAC;cAAA;gBAAAiB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,EACnF1H,OAAO,gBACJnC,OAAA;gBAAG8J,SAAS,EAAC,eAAe;gBAAAL,QAAA,EAAC;cAAkB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,GACnDtG,0BAA0B,CAAC6C,MAAM,KAAK,CAAC,gBACvCpG,OAAA;gBAAG8J,SAAS,EAAC,eAAe;gBAAAL,QAAA,EAAC;cAAwC;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,gBAEzE7J,OAAA;gBAAK8J,SAAS,EAAC,gBAAgB;gBAAAL,QAAA,eAC3BzJ,OAAA;kBAAAyJ,QAAA,EACKlG,0BAA0B,CAACkE,GAAG,CAAC4B,MAAM,iBAClCrJ,OAAA;oBAA2BqK,OAAO,EAAEA,CAAA,KAAMlB,qBAAqB,CAACE,MAAM,CAAC3E,SAAS,CAAE;oBAAA+E,QAAA,gBAC9EzJ,OAAA;sBAAM8J,SAAS,EAAC,cAAc;sBAAAL,QAAA,EAAEJ,MAAM,CAAC3E;oBAAS;sBAAAgF,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC,eACxD7J,OAAA;sBAAQ8J,SAAS,EAAC,eAAe;sBAAAL,QAAA,EAAC;oBAAU;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA,GAFhDR,MAAM,CAAC3E,SAAS;oBAAAgF,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAGrB,CACP;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACF;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CACR;YAAA,eACH,CACL;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CACR,EAGAhG,WAAW,KAAK,aAAa,IAAIF,oBAAoB,iBAClD3D,OAAA;YAAK8J,SAAS,EAAC,kBAAkB;YAAAL,QAAA,gBAC7BzJ,OAAA;cAAAyJ,QAAA,GAAI,kBAAgB,EAAChG,uBAAuB;YAAA;cAAAiG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAClD7J,OAAA;cAAQqK,OAAO,EAAEA,CAAA,KAAMvG,cAAc,CAAC,aAAa,CAAE;cAACgG,SAAS,EAAC,eAAe;cAACwB,KAAK,EAAE;gBAAEG,YAAY,EAAE;cAAO,CAAE;cAAAhC,QAAA,EAAC;YAEjH;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAET7J,OAAA;cAAK8J,SAAS,EAAC,wBAAwB;cAAAL,QAAA,gBACnCzJ,OAAA;gBAAK8J,SAAS,EAAC,uBAAuB;gBAAAL,QAAA,gBAClCzJ,OAAA;kBAAAyJ,QAAA,EAAI;gBAAY;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACrB7J,OAAA;kBAAAyJ,QAAA,GAAG,SAAO,eAAAzJ,OAAA;oBAAAyJ,QAAA,EAAO9F,oBAAoB,CAACyB;kBAAe;oBAAAsE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC,eACjE7J,OAAA;kBAAAyJ,QAAA,GAAG,WAAS,eAAAzJ,OAAA;oBAAAyJ,QAAA,EAAO9F,oBAAoB,CAAC2B;kBAAO;oBAAAoE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC,eAC3D7J,OAAA;kBAAAyJ,QAAA,GAAG,WAAS,eAAAzJ,OAAA;oBAAAyJ,QAAA,EAAO9F,oBAAoB,CAAC4B;kBAAO;oBAAAmE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC,eAC3D7J,OAAA;kBAAAyJ,QAAA,GAAG,WAAS,eAAAzJ,OAAA;oBAAAyJ,QAAA,EAAO9F,oBAAoB,CAAC6B;kBAAO;oBAAAkE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1D,CAAC,eAEN7J,OAAA;gBAAK8J,SAAS,EAAC,sBAAsB;gBAAAL,QAAA,gBACjCzJ,OAAA;kBAAAyJ,QAAA,GAAI,eAAa,EAAC9F,oBAAoB,CAACuB,qBAAqB,CAACkB,MAAM,EAAC,GAAC;gBAAA;kBAAAsD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC1E7J,OAAA;kBAAK8J,SAAS,EAAC,WAAW;kBAAAL,QAAA,EACrB9F,oBAAoB,CAACuB,qBAAqB,CAACkB,MAAM,KAAK,CAAC,gBACpDpG,OAAA;oBAAG8J,SAAS,EAAC,wBAAwB;oBAAAL,QAAA,EAAC;kBAAwB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC,GAElElG,oBAAoB,CAACuB,qBAAqB,CAACuC,GAAG,CAAClB,IAAI,iBAC/CvG,OAAA;oBAA4B8J,SAAS,EAAC,WAAW;oBAAAL,QAAA,gBAC5CzJ,OAAA;sBACG0K,GAAG,EAAE,mDAAmDnE,IAAI,CAACM,IAAI,CAAC8D,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,EAAG;sBACtGC,GAAG,EAAEtE,IAAI,CAACM,IAAK;sBACfiD,SAAS,EAAC,YAAY;sBACtBgB,OAAO,EAAGZ,CAAC,IAAK;wBAAEA,CAAC,CAACC,MAAM,CAACY,OAAO,GAAG,IAAI;wBAAEb,CAAC,CAACC,MAAM,CAACO,GAAG,GAAG,+DAA+D;sBAAE;oBAAE;sBAAAhB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAChI,CAAC,eACF7J,OAAA;sBAAI8J,SAAS,EAAC,WAAW;sBAAAL,QAAA,EAAElD,IAAI,CAACM;oBAAI;sBAAA6C,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAK,CAAC,eAC1C7J,OAAA;sBAAG8J,SAAS,EAAC,WAAW;sBAAAL,QAAA,GAAC,QAAM,EAAClD,IAAI,CAACU,YAAY,EAAC,GAAC,EAACV,IAAI,CAACW,qBAAqB;oBAAA;sBAAAwC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC;kBAAA,GAR7EtD,IAAI,CAACS,WAAW;oBAAA0C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OASrB,CACR;gBACJ;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACA,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC,eAEN7J,OAAA;gBAAK8J,SAAS,EAAC,sBAAsB;gBAAAL,QAAA,gBACjCzJ,OAAA;kBAAAyJ,QAAA,GAAI,oBAAkB,EAAC9F,oBAAoB,CAACwB,uBAAuB,CAACiB,MAAM,EAAC,GAAC;gBAAA;kBAAAsD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACjF7J,OAAA;kBAAK8J,SAAS,EAAC,WAAW;kBAAAL,QAAA,EACrB9F,oBAAoB,CAACwB,uBAAuB,CAACiB,MAAM,KAAK,CAAC,gBACtDpG,OAAA;oBAAG8J,SAAS,EAAC,wBAAwB;oBAAAL,QAAA,EAAC;kBAAe;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG,CAAC;kBAEzD;kBACAxB,MAAM,CAACqD,OAAO,CAAC/H,oBAAoB,CAACwB,uBAAuB,CAAC6C,MAAM,CAAC,CAACC,GAAG,EAAEuB,MAAM,KAAK;oBAChFvB,GAAG,CAACuB,MAAM,CAAC,GAAG,CAACvB,GAAG,CAACuB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;oBACpC,OAAOvB,GAAG;kBACd,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAACR,GAAG,CAAC,CAAC,CAAC+B,MAAM,EAAEtB,KAAK,CAAC,KAAK;oBAC7B,MAAMyD,QAAQ,GAAGpC,kBAAkB,CAACC,MAAM,CAAC;oBAC3C,OAAOmC,QAAQ,gBACX3L,OAAA;sBAAkB8J,SAAS,EAAC,WAAW;sBAAAL,QAAA,gBAClCzJ,OAAA;wBACG0K,GAAG,EAAE,mDAAmDiB,QAAQ,CAAC9E,IAAI,CAAC8D,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,EAAG;wBAC1GC,GAAG,EAAEc,QAAQ,CAAC9E,IAAK;wBACnBiD,SAAS,EAAC,YAAY;wBACtBgB,OAAO,EAAGZ,CAAC,IAAK;0BAAEA,CAAC,CAACC,MAAM,CAACY,OAAO,GAAG,IAAI;0BAAEb,CAAC,CAACC,MAAM,CAACO,GAAG,GAAG,+DAA+D;wBAAE;sBAAE;wBAAAhB,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAChI,CAAC,eACF7J,OAAA;wBAAI8J,SAAS,EAAC,WAAW;wBAAAL,QAAA,EAAEkC,QAAQ,CAAC9E;sBAAI;wBAAA6C,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAK,CAAC,eAC9C7J,OAAA;wBAAG8J,SAAS,EAAC,WAAW;wBAAAL,QAAA,GAAC,SAAO,EAACvB,KAAK;sBAAA;wBAAAwB,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAI,CAAC;oBAAA,GARrCL,MAAM;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OASX,CAAC,GACN,IAAI;kBACZ,CAAC;gBACJ;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACA,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CACR;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,EAGLhI,eAAe,IAAIQ,SAAS,KAAK,WAAW,iBACzCrC,OAAA;QAAK8J,SAAS,EAAC,kBAAkB;QAACwB,KAAK,EAAE;UAAEE,SAAS,EAAE;QAAO,CAAE;QAAA/B,QAAA,gBAC3DzJ,OAAA;UAAAyJ,QAAA,EAAI;QAAmB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC5B7J,OAAA;UACIkC,IAAI,EAAC,MAAM;UACX6H,WAAW,EAAC,oBAAoB;UAChCC,KAAK,EAAE/G,gBAAiB;UACxBgH,QAAQ,EAAGC,CAAC,IAAKhH,mBAAmB,CAACgH,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UACrDI,QAAQ,EAAEjI,OAAQ;UAClBmJ,KAAK,EAAE;YAAEC,QAAQ,EAAE;UAAQ;QAAE;UAAA7B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC,eACF7J,OAAA;UAAQqK,OAAO,EAAE1B,iBAAkB;UAACyB,QAAQ,EAAEjI,OAAQ;UAAAsH,QAAA,EAAC;QAEvD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CACR;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC;EAAA,eACR,CAAC;AAEX;AAACvJ,EAAA,CA53BQD,GAAG;AAAAuL,EAAA,GAAHvL,GAAG;AA83BZ,eAAeA,GAAG;AAAC,IAAAuL,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}