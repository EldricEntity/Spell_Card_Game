{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aaron\\\\DND_Spell_Cards\\\\Spell_Card_Game\\\\DND_Spell_Cards_online\\\\frontend - Copy\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// dnd-spell-cards-app/frontend/src/App.js\n\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { v4 as uuidv4 } from 'uuid'; // Import uuid for unique keys for deck card instances\n\n// IMPORTANT: Re-enter your VM's Public IP address here.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://193.122.147.91:5000/api';\nfunction App() {\n  _s();\n  // --- State Variables ---\n  const [allCards, setAllCards] = useState([]); // All cards fetched from the backend (master list)\n  const [characterLevel, setCharacterLevel] = useState(1);\n  const [wisMod, setWisMod] = useState(0);\n  const [intMod, setIntMod] = useState(0);\n  const [chaMod, setChaMod] = useState(0);\n  const [maxDeckSize, setMaxDeckSize] = useState(0);\n  const [selectedCards, setSelectedCards] = useState([]); // Cards currently in the player's deck (persistent)\n  const [loading, setLoading] = useState(true); // Loading state for initial data fetch\n\n  // New states for login/auth\n  const [playerId, setPlayerId] = useState('');\n  const [password, setPassword] = useState('');\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [message, setMessage] = useState({\n    text: '',\n    type: ''\n  });\n\n  // --- Helper function to display messages ---\n  const showMessage = (text, type) => {\n    setMessage({\n      text,\n      type\n    });\n    setTimeout(() => setMessage({\n      text: '',\n      type: ''\n    }), 3000);\n  };\n\n  // --- API Call: Create Account ---\n  const handleCreateAccount = async () => {\n    if (!playerId || !password) {\n      showMessage('Player ID and password are required to create an account.', 'error');\n      return;\n    }\n    setLoading(true);\n    console.log(`[Frontend] Attempting to create account for player: ${playerId}`);\n    try {\n      const response = await fetch(`${API_BASE_URL}/deck/create`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to create account.');\n      }\n      showMessage('Account created successfully! You can now log in.', 'success');\n      console.log('[Frontend] Account created. Now log in.');\n    } catch (err) {\n      console.error('[Frontend] Error creating account:', err);\n      showMessage(`Failed to create account: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- API Call: Login and Load Deck ---\n  const handleLoginAndLoadDeck = async () => {\n    if (!playerId || !password) {\n      showMessage('Player ID and password are required to log in.', 'error');\n      return;\n    }\n    setLoading(true);\n    console.log(`[Frontend] Attempting to login and load deck for player: ${playerId}`);\n    try {\n      const response = await fetch(`${API_BASE_URL}/deck/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Authentication failed.');\n      }\n      setSelectedCards(data.cards || []);\n      setCharacterLevel(data.character_level !== undefined ? data.character_level : 1);\n      setWisMod(data.wis_mod !== undefined ? data.wis_mod : 0);\n      setIntMod(data.int_mod !== undefined ? data.int_mod : 0);\n      setChaMod(data.cha_mod !== undefined ? data.cha_mod : 0);\n      setIsAuthenticated(true);\n      showMessage('Login successful! Deck loaded.', 'success');\n      console.log('[Frontend] Login successful. Deck data received.');\n    } catch (err) {\n      setIsAuthenticated(false);\n      console.error('[Frontend] Error logging in:', err);\n      showMessage(`Failed to load deck: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- API Call: Save Deck ---\n  const handleSaveDeck = async () => {\n    if (!isAuthenticated) {\n      showMessage('You must be logged in to save your deck.', 'error');\n      return;\n    }\n    setLoading(true);\n    console.log(`[Frontend] Attempting to save deck for player: ${playerId}`);\n    try {\n      const response = await fetch(`${API_BASE_URL}/deck/save`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password: password,\n          cards: selectedCards,\n          character_level: characterLevel,\n          wis_mod: wisMod,\n          int_mod: intMod,\n          cha_mod: chaMod\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to save deck.');\n      }\n      showMessage('Deck and stats saved successfully!', 'success');\n      console.log('[Frontend] Deck saved successfully.');\n    } catch (err) {\n      console.error('[Frontend] Error saving deck:', err);\n      showMessage(`Failed to save deck: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- Effect to Fetch All Cards on Component Mount ---\n  useEffect(() => {\n    const fetchAllCards = async () => {\n      setLoading(true);\n      console.log('[Frontend] Fetching all available cards...');\n      try {\n        const cardsResponse = await fetch(`${API_BASE_URL}/cards`);\n        if (!cardsResponse.ok) {\n          throw new Error(`HTTP error fetching cards! status: ${cardsResponse.status}`);\n        }\n        const cardsData = await cardsResponse.json();\n        setAllCards(cardsData);\n        console.log('[Frontend] Cards fetched successfully.');\n      } catch (err) {\n        console.error('[Frontend] Error fetching initial data:', err);\n        showMessage('Failed to fetch initial data: ' + err.message, 'error');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAllCards();\n  }, []);\n\n  // --- Effect to Calculate Max Deck Size when Character Stats Change ---\n  useEffect(() => {\n    const calculateDeckSize = async () => {\n      console.log('[Frontend] Calculating max deck size...');\n      try {\n        const response = await fetch(`${API_BASE_URL}/calculate_deck_size`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            character_level: characterLevel,\n            wis_mod: wisMod,\n            int_mod: intMod,\n            cha_mod: chaMod\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        setMaxDeckSize(data.max_deck_size);\n        console.log(`[Frontend] Max deck size calculated: ${data.max_deck_size}`);\n      } catch (err) {\n        console.error('[Frontend] Error calculating deck size:', err);\n        showMessage('Failed to calculate deck size: ' + err.message, 'error');\n      }\n    };\n    if (!isNaN(characterLevel) && !isNaN(wisMod) && !isNaN(intMod) && !isNaN(chaMod)) {\n      calculateDeckSize();\n    }\n  }, [characterLevel, wisMod, intMod, chaMod]);\n\n  // --- Deck Building Logic: Add Card ---\n  const handleAddCardToDeck = card => {\n    if (selectedCards.length >= maxDeckSize) {\n      showMessage('Deck is full! Remove cards to add new ones.', 'error');\n      return;\n    }\n    const newCard = {\n      ...card,\n      instance_id: uuidv4(),\n      current_uses: card.default_uses_per_rest\n    };\n    setSelectedCards(prev => [...prev, newCard]);\n    showMessage('Card added to your deck!', 'success');\n  };\n\n  // --- Deck Building Logic: Remove Card ---\n  const handleRemoveCardFromDeck = instance_id => {\n    const updatedDeck = selectedCards.filter(card => card.instance_id !== instance_id);\n    setSelectedCards(updatedDeck);\n    showMessage('Card removed from deck.', 'success');\n  };\n\n  // --- Card Usage Logic: Mark Card as Used ---\n  const handleMarkCardUsed = async instance_id => {\n    const cardToUse = selectedCards.find(card => card.instance_id === instance_id);\n    if (!cardToUse) return;\n    if (cardToUse.current_uses > 0) {\n      setSelectedCards(prev => prev.map(card => card.instance_id === instance_id ? {\n        ...card,\n        current_uses: card.current_uses - 1\n      } : card));\n\n      // Notify backend about the card usage for logging purposes.\n      try {\n        console.log(`[Frontend] Notifying backend of card usage: ${cardToUse.name}`);\n        const response = await fetch(`${API_BASE_URL}/card_used`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            card_name: cardToUse.name,\n            card_type: cardToUse.type,\n            deck_card_id: cardToUse.instance_id\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log('[Backend] System Log Entry:', data.log_entry);\n      } catch (err) {\n        console.error('[Frontend] Error sending card used notification:', err);\n      }\n    } else {\n      showMessage(`\"${cardToUse.name}\" has no uses left! It needs a long rest.`, 'error');\n    }\n  };\n\n  // --- Card Usage Logic: Reset Card Uses (Long Rest) ---\n  const handleResetCardUses = instance_id => {\n    setSelectedCards(prev => prev.map(card => card.instance_id === instance_id ? {\n      ...card,\n      current_uses: card.default_uses_per_rest\n    } : card));\n    showMessage('Card uses reset!', 'success');\n  };\n\n  // --- Main Component Render ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Player ID\",\n        value: playerId,\n        onChange: e => setPlayerId(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLoginAndLoadDeck,\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCreateAccount,\n        children: \"Create Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSaveDeck,\n        children: \"Save Deck\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }, this), message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message-box ${message.type}`,\n      children: message.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 30\n    }, this), isAuthenticated ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Available Spells\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 25\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading cards...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"all-cards-container\",\n          children: allCards.map(card => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-item\",\n            onClick: () => handleAddCardToDeck(card),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-name\",\n              children: card.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-type\",\n              children: card.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-description\",\n              children: card.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 41\n            }, this)]\n          }, card.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Your Deck\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stats-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Level: \", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: characterLevel,\n              onChange: e => setCharacterLevel(parseInt(e.target.value) || 1),\n              min: \"1\",\n              max: \"20\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 43\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"WIS Mod: \", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: wisMod,\n              onChange: e => setWisMod(parseInt(e.target.value) || 0),\n              min: \"0\",\n              max: \"6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"INT Mod: \", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: intMod,\n              onChange: e => setIntMod(parseInt(e.target.value) || 0),\n              min: \"0\",\n              max: \"6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"CHA Mod: \", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: chaMod,\n              onChange: e => setChaMod(parseInt(e.target.value) || 0),\n              min: \"0\",\n              max: \"6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Max Deck Size: \", maxDeckSize]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"deck-container\",\n          children: selectedCards.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Click on an available spell to add it to your deck.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 33\n          }, this) : selectedCards.map(card => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-item deck-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-name\",\n              children: card.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-type\",\n              children: card.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-description\",\n              children: card.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleMarkCardUsed(card.instance_id),\n                disabled: card.current_uses <= 0,\n                className: \"use-button\",\n                children: [\"Use (\", card.current_uses, \"/\", card.default_uses_per_rest, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleResetCardUses(card.instance_id),\n                className: \"reset-button\",\n                children: \"Reset Uses\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleRemoveCardFromDeck(card.instance_id),\n                className: \"remove-button\",\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 41\n            }, this)]\n          }, card.instance_id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pre-login-message\",\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Please log in to load your character and spell deck.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 269,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"xgoqLEMG1VvM/LvTAe8pCPE1mvg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","v4","uuidv4","jsxDEV","_jsxDEV","API_BASE_URL","App","_s","allCards","setAllCards","characterLevel","setCharacterLevel","wisMod","setWisMod","intMod","setIntMod","chaMod","setChaMod","maxDeckSize","setMaxDeckSize","selectedCards","setSelectedCards","loading","setLoading","playerId","setPlayerId","password","setPassword","isAuthenticated","setIsAuthenticated","message","setMessage","text","type","showMessage","setTimeout","handleCreateAccount","console","log","response","fetch","method","headers","body","JSON","stringify","player_id","data","json","ok","Error","error","err","handleLoginAndLoadDeck","cards","character_level","undefined","wis_mod","int_mod","cha_mod","handleSaveDeck","fetchAllCards","cardsResponse","status","cardsData","calculateDeckSize","max_deck_size","isNaN","handleAddCardToDeck","card","length","newCard","instance_id","current_uses","default_uses_per_rest","prev","handleRemoveCardFromDeck","updatedDeck","filter","handleMarkCardUsed","cardToUse","find","map","name","card_name","card_type","deck_card_id","log_entry","handleResetCardUses","className","children","placeholder","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","onClick","description","id","parseInt","min","max","disabled","_c","$RefreshReg$"],"sources":["C:/Users/aaron/DND_Spell_Cards/Spell_Card_Game/DND_Spell_Cards_online/frontend - Copy/src/App.js"],"sourcesContent":["// dnd-spell-cards-app/frontend/src/App.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport { v4 as uuidv4 } from 'uuid'; // Import uuid for unique keys for deck card instances\r\n\r\n// IMPORTANT: Re-enter your VM's Public IP address here.\r\nconst API_BASE_URL = 'http://193.122.147.91:5000/api';\r\n\r\nfunction App() {\r\n    // --- State Variables ---\r\n    const [allCards, setAllCards] = useState([]); // All cards fetched from the backend (master list)\r\n    const [characterLevel, setCharacterLevel] = useState(1);\r\n    const [wisMod, setWisMod] = useState(0);\r\n    const [intMod, setIntMod] = useState(0);\r\n    const [chaMod, setChaMod] = useState(0);\r\n    const [maxDeckSize, setMaxDeckSize] = useState(0);\r\n    const [selectedCards, setSelectedCards] = useState([]); // Cards currently in the player's deck (persistent)\r\n    const [loading, setLoading] = useState(true); // Loading state for initial data fetch\r\n\r\n    // New states for login/auth\r\n    const [playerId, setPlayerId] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    const [message, setMessage] = useState({ text: '', type: '' });\r\n\r\n    // --- Helper function to display messages ---\r\n    const showMessage = (text, type) => {\r\n        setMessage({ text, type });\r\n        setTimeout(() => setMessage({ text: '', type: '' }), 3000);\r\n    };\r\n\r\n    // --- API Call: Create Account ---\r\n    const handleCreateAccount = async () => {\r\n        if (!playerId || !password) {\r\n            showMessage('Player ID and password are required to create an account.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        console.log(`[Frontend] Attempting to create account for player: ${playerId}`);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/deck/create`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n            \r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to create account.');\r\n            }\r\n            \r\n            showMessage('Account created successfully! You can now log in.', 'success');\r\n            console.log('[Frontend] Account created. Now log in.');\r\n        } catch (err) {\r\n            console.error('[Frontend] Error creating account:', err);\r\n            showMessage(`Failed to create account: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- API Call: Login and Load Deck ---\r\n    const handleLoginAndLoadDeck = async () => {\r\n        if (!playerId || !password) {\r\n            showMessage('Player ID and password are required to log in.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        console.log(`[Frontend] Attempting to login and load deck for player: ${playerId}`);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/deck/login`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Authentication failed.');\r\n            }\r\n\r\n            setSelectedCards(data.cards || []);\r\n            setCharacterLevel(data.character_level !== undefined ? data.character_level : 1);\r\n            setWisMod(data.wis_mod !== undefined ? data.wis_mod : 0);\r\n            setIntMod(data.int_mod !== undefined ? data.int_mod : 0);\r\n            setChaMod(data.cha_mod !== undefined ? data.cha_mod : 0);\r\n            setIsAuthenticated(true);\r\n\r\n            showMessage('Login successful! Deck loaded.', 'success');\r\n            console.log('[Frontend] Login successful. Deck data received.');\r\n        } catch (err) {\r\n            setIsAuthenticated(false);\r\n            console.error('[Frontend] Error logging in:', err);\r\n            showMessage(`Failed to load deck: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- API Call: Save Deck ---\r\n    const handleSaveDeck = async () => {\r\n        if (!isAuthenticated) {\r\n            showMessage('You must be logged in to save your deck.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        console.log(`[Frontend] Attempting to save deck for player: ${playerId}`);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/deck/save`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    player_id: playerId,\r\n                    password: password,\r\n                    cards: selectedCards,\r\n                    character_level: characterLevel,\r\n                    wis_mod: wisMod,\r\n                    int_mod: intMod,\r\n                    cha_mod: chaMod,\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to save deck.');\r\n            }\r\n\r\n            showMessage('Deck and stats saved successfully!', 'success');\r\n            console.log('[Frontend] Deck saved successfully.');\r\n        } catch (err) {\r\n            console.error('[Frontend] Error saving deck:', err);\r\n            showMessage(`Failed to save deck: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- Effect to Fetch All Cards on Component Mount ---\r\n    useEffect(() => {\r\n        const fetchAllCards = async () => {\r\n            setLoading(true);\r\n            console.log('[Frontend] Fetching all available cards...');\r\n            try {\r\n                const cardsResponse = await fetch(`${API_BASE_URL}/cards`);\r\n                if (!cardsResponse.ok) {\r\n                    throw new Error(`HTTP error fetching cards! status: ${cardsResponse.status}`);\r\n                }\r\n                const cardsData = await cardsResponse.json();\r\n                setAllCards(cardsData);\r\n                console.log('[Frontend] Cards fetched successfully.');\r\n            } catch (err) {\r\n                console.error('[Frontend] Error fetching initial data:', err);\r\n                showMessage('Failed to fetch initial data: ' + err.message, 'error');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchAllCards();\r\n    }, []);\r\n\r\n    // --- Effect to Calculate Max Deck Size when Character Stats Change ---\r\n    useEffect(() => {\r\n        const calculateDeckSize = async () => {\r\n            console.log('[Frontend] Calculating max deck size...');\r\n            try {\r\n                const response = await fetch(`${API_BASE_URL}/calculate_deck_size`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        character_level: characterLevel,\r\n                        wis_mod: wisMod,\r\n                        int_mod: intMod,\r\n                        cha_mod: chaMod,\r\n                    }),\r\n                });\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const data = await response.json();\r\n                setMaxDeckSize(data.max_deck_size);\r\n                console.log(`[Frontend] Max deck size calculated: ${data.max_deck_size}`);\r\n            } catch (err) {\r\n                console.error('[Frontend] Error calculating deck size:', err);\r\n                showMessage('Failed to calculate deck size: ' + err.message, 'error');\r\n            }\r\n        };\r\n\r\n        if (!isNaN(characterLevel) && !isNaN(wisMod) && !isNaN(intMod) && !isNaN(chaMod)) {\r\n            calculateDeckSize();\r\n        }\r\n    }, [characterLevel, wisMod, intMod, chaMod]);\r\n\r\n    // --- Deck Building Logic: Add Card ---\r\n    const handleAddCardToDeck = (card) => {\r\n        if (selectedCards.length >= maxDeckSize) {\r\n            showMessage('Deck is full! Remove cards to add new ones.', 'error');\r\n            return;\r\n        }\r\n\r\n        const newCard = {\r\n            ...card,\r\n            instance_id: uuidv4(),\r\n            current_uses: card.default_uses_per_rest\r\n        };\r\n        setSelectedCards(prev => [...prev, newCard]);\r\n        showMessage('Card added to your deck!', 'success');\r\n    };\r\n\r\n    // --- Deck Building Logic: Remove Card ---\r\n    const handleRemoveCardFromDeck = (instance_id) => {\r\n        const updatedDeck = selectedCards.filter(card => card.instance_id !== instance_id);\r\n        setSelectedCards(updatedDeck);\r\n        showMessage('Card removed from deck.', 'success');\r\n    };\r\n\r\n    // --- Card Usage Logic: Mark Card as Used ---\r\n    const handleMarkCardUsed = async (instance_id) => {\r\n        const cardToUse = selectedCards.find(card => card.instance_id === instance_id);\r\n        if (!cardToUse) return;\r\n\r\n        if (cardToUse.current_uses > 0) {\r\n            setSelectedCards(prev =>\r\n                prev.map(card =>\r\n                    card.instance_id === instance_id ? { ...card, current_uses: card.current_uses - 1 } : card\r\n                )\r\n            );\r\n\r\n            // Notify backend about the card usage for logging purposes.\r\n            try {\r\n                console.log(`[Frontend] Notifying backend of card usage: ${cardToUse.name}`);\r\n                const response = await fetch(`${API_BASE_URL}/card_used`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        card_name: cardToUse.name,\r\n                        card_type: cardToUse.type,\r\n                        deck_card_id: cardToUse.instance_id\r\n                    }),\r\n                });\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const data = await response.json();\r\n                console.log('[Backend] System Log Entry:', data.log_entry);\r\n            } catch (err) {\r\n                console.error('[Frontend] Error sending card used notification:', err);\r\n            }\r\n        } else {\r\n            showMessage(`\"${cardToUse.name}\" has no uses left! It needs a long rest.`, 'error');\r\n        }\r\n    };\r\n\r\n    // --- Card Usage Logic: Reset Card Uses (Long Rest) ---\r\n    const handleResetCardUses = (instance_id) => {\r\n        setSelectedCards(prev =>\r\n            prev.map(card =>\r\n                card.instance_id === instance_id ? { ...card, current_uses: card.default_uses_per_rest } : card\r\n            )\r\n        );\r\n        showMessage('Card uses reset!', 'success');\r\n    };\r\n\r\n    // --- Main Component Render ---\r\n    return (\r\n        <div className=\"App\">\r\n            {/* Login/Auth Section */}\r\n            <div className=\"login-container\">\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Player ID\"\r\n                    value={playerId}\r\n                    onChange={(e) => setPlayerId(e.target.value)}\r\n                />\r\n                <input\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n                <button onClick={handleLoginAndLoadDeck}>Log In</button>\r\n                <button onClick={handleCreateAccount}>Create Account</button>\r\n                <button onClick={handleSaveDeck}>Save Deck</button>\r\n            </div>\r\n\r\n            {/* Message Box */}\r\n            {message.text && <div className={`message-box ${message.type}`}>{message.text}</div>}\r\n            \r\n            {isAuthenticated ? (\r\n                <div className=\"app-container\">\r\n                    <div className=\"left-column\">\r\n                        <h2>Available Spells</h2>\r\n                        {loading ? (\r\n                            <p>Loading cards...</p>\r\n                        ) : (\r\n                            <div className=\"all-cards-container\">\r\n                                {allCards.map((card) => (\r\n                                    <div key={card.id} className=\"card-item\" onClick={() => handleAddCardToDeck(card)}>\r\n                                        <div className=\"card-name\">{card.name}</div>\r\n                                        <div className=\"card-type\">{card.type}</div>\r\n                                        <div className=\"card-description\">{card.description}</div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"right-column\">\r\n                        <h2>Your Deck</h2>\r\n                        <div className=\"stats-container\">\r\n                            <label>Level: <input type=\"number\" value={characterLevel} onChange={e => setCharacterLevel(parseInt(e.target.value) || 1)} min=\"1\" max=\"20\" /></label>\r\n                            <label>WIS Mod: <input type=\"number\" value={wisMod} onChange={e => setWisMod(parseInt(e.target.value) || 0)} min=\"0\" max=\"6\" /></label>\r\n                            <label>INT Mod: <input type=\"number\" value={intMod} onChange={e => setIntMod(parseInt(e.target.value) || 0)} min=\"0\" max=\"6\" /></label>\r\n                            <label>CHA Mod: <input type=\"number\" value={chaMod} onChange={e => setChaMod(parseInt(e.target.value) || 0)} min=\"0\" max=\"6\" /></label>\r\n                            <p>Max Deck Size: {maxDeckSize}</p>\r\n                        </div>\r\n\r\n                        <div className=\"deck-container\">\r\n                            {selectedCards.length === 0 ? (\r\n                                <p>Click on an available spell to add it to your deck.</p>\r\n                            ) : (\r\n                                selectedCards.map((card) => (\r\n                                    <div key={card.instance_id} className=\"card-item deck-card\">\r\n                                        <div className=\"card-name\">{card.name}</div>\r\n                                        <div className=\"card-type\">{card.type}</div>\r\n                                        <div className=\"card-description\">{card.description}</div>\r\n                                        <div className=\"card-actions\">\r\n                                            <button\r\n                                                onClick={() => handleMarkCardUsed(card.instance_id)}\r\n                                                disabled={card.current_uses <= 0}\r\n                                                className=\"use-button\"\r\n                                            >\r\n                                                Use ({card.current_uses}/{card.default_uses_per_rest})\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleResetCardUses(card.instance_id)}\r\n                                                className=\"reset-button\"\r\n                                            >\r\n                                                Reset Uses\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleRemoveCardFromDeck(card.instance_id)}\r\n                                                className=\"remove-button\"\r\n                                            >\r\n                                                Remove\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"pre-login-message\">\r\n                    <h3>Please log in to load your character and spell deck.</h3>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}