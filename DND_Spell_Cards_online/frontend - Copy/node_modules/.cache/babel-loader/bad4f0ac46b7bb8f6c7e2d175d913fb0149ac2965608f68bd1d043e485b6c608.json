{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aaron\\\\DND_Spell_Cards\\\\Spell_Card_Game\\\\DND_Spell_Cards_online\\\\frontend - Copy\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// dnd-spell-cards-app/frontend/src/App.js\n\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { v4 as uuidv4 } from 'uuid'; // Import uuid for unique keys for deck card instances\n\n// IMPORTANT: Re-enter your VM's Public IP address here.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://193.122.147.91:5000/api';\nfunction App() {\n  _s();\n  // --- State Variables ---\n  const [allCards, setAllCards] = useState([]); // All cards fetched from the backend (master list)\n  const [characterLevel, setCharacterLevel] = useState(1);\n  const [wisMod, setWisMod] = useState(0);\n  const [intMod, setIntMod] = useState(0);\n  const [chaMod, setChaMod] = useState(0);\n  const [maxDeckSize, setMaxDeckSize] = useState(0);\n  const [selectedCards, setSelectedCards] = useState([]); // Cards currently in the player's deck (persistent)\n  const [loading, setLoading] = useState(true); // Loading state for initial data fetch\n\n  // New states for login/auth\n  const [playerId, setPlayerId] = useState('');\n  const [password, setPassword] = useState('');\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [message, setMessage] = useState({\n    text: '',\n    type: ''\n  });\n\n  // --- Helper function to display messages ---\n  const showMessage = (text, type) => {\n    setMessage({\n      text,\n      type\n    });\n    setTimeout(() => setMessage({\n      text: '',\n      type: ''\n    }), 3000);\n  };\n\n  // --- API Call: Create Account ---\n  const handleCreateAccount = async () => {\n    if (!playerId || !password) {\n      showMessage('Player ID and password are required to create an account.', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/deck/create`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to create account.');\n      }\n      showMessage('Account created successfully! You can now log in.', 'success');\n    } catch (err) {\n      console.error('Error creating account:', err);\n      showMessage(`Failed to create account: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- API Call: Login and Load Deck ---\n  const handleLoginAndLoadDeck = async () => {\n    if (!playerId || !password) {\n      showMessage('Player ID and password are required to log in.', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/deck/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Authentication failed.');\n      }\n      setSelectedCards(data.cards || []);\n      setCharacterLevel(data.character_level !== undefined ? data.character_level : 1);\n      setWisMod(data.wis_mod !== undefined ? data.wis_mod : 0);\n      setIntMod(data.int_mod !== undefined ? data.int_mod : 0);\n      setChaMod(data.cha_mod !== undefined ? data.cha_mod : 0);\n      setIsAuthenticated(true);\n      showMessage('Login successful! Deck loaded.', 'success');\n    } catch (err) {\n      setIsAuthenticated(false);\n      console.error('Error logging in:', err);\n      showMessage(`Failed to load deck: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- API Call: Save Deck ---\n  const handleSaveDeck = async () => {\n    if (!isAuthenticated) {\n      showMessage('You must be logged in to save your deck.', 'error');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/deck/save`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          player_id: playerId,\n          password: password,\n          cards: selectedCards,\n          character_level: characterLevel,\n          wis_mod: wisMod,\n          int_mod: intMod,\n          cha_mod: chaMod\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to save deck.');\n      }\n      showMessage('Deck and stats saved successfully!', 'success');\n    } catch (err) {\n      console.error('Error saving deck:', err);\n      showMessage(`Failed to save deck: ${err.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- Effect to Fetch All Cards on Component Mount ---\n  useEffect(() => {\n    const fetchAllCards = async () => {\n      setLoading(true);\n      try {\n        const cardsResponse = await fetch(`${API_BASE_URL}/cards`);\n        if (!cardsResponse.ok) {\n          throw new Error(`HTTP error fetching cards! status: ${cardsResponse.status}`);\n        }\n        const cardsData = await cardsResponse.json();\n        setAllCards(cardsData);\n      } catch (err) {\n        console.error('Error fetching initial data:', err);\n        showMessage('Failed to fetch initial data: ' + err.message, 'error');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAllCards();\n  }, []);\n\n  // --- Effect to Calculate Max Deck Size when Character Stats Change ---\n  useEffect(() => {\n    const calculateDeckSize = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/calculate_deck_size`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            character_level: characterLevel,\n            wis_mod: wisMod,\n            int_mod: intMod,\n            cha_mod: chaMod\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        setMaxDeckSize(data.max_deck_size);\n      } catch (err) {\n        console.error('Error calculating deck size:', err);\n        showMessage('Failed to calculate deck size: ' + err.message, 'error');\n      }\n    };\n    if (!isNaN(characterLevel) && !isNaN(wisMod) && !isNaN(intMod) && !isNaN(chaMod)) {\n      calculateDeckSize();\n    }\n  }, [characterLevel, wisMod, intMod, chaMod]);\n\n  // --- Deck Building Logic: Add Card ---\n  const handleAddCardToDeck = card => {\n    if (!isAuthenticated) {\n      showMessage(\"You must be logged in to build a deck.\", \"error\");\n      return;\n    }\n    if (selectedCards.length >= maxDeckSize) {\n      showMessage('Deck is full! Remove cards to add new ones.', 'error');\n      return;\n    }\n    const newCard = {\n      ...card,\n      instance_id: uuidv4(),\n      current_uses: card.default_uses_per_rest\n    };\n    setSelectedCards(prev => [...prev, newCard]);\n    showMessage('Card added to your deck!', 'success');\n  };\n\n  // --- Deck Building Logic: Remove Card ---\n  const handleRemoveCardFromDeck = instance_id => {\n    const updatedDeck = selectedCards.filter(card => card.instance_id !== instance_id);\n    setSelectedCards(updatedDeck);\n    showMessage('Card removed from deck.', 'success');\n  };\n\n  // --- Card Usage Logic: Mark Card as Used ---\n  const handleMarkCardUsed = async instance_id => {\n    const cardToUse = selectedCards.find(card => card.instance_id === instance_id);\n    if (!cardToUse) return;\n    if (cardToUse.current_uses > 0) {\n      setSelectedCards(prev => prev.map(card => card.instance_id === instance_id ? {\n        ...card,\n        current_uses: card.current_uses - 1\n      } : card));\n\n      // Notify backend about the card usage for logging purposes.\n      try {\n        const response = await fetch(`${API_BASE_URL}/card_used`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            card_name: cardToUse.name,\n            card_type: cardToUse.type,\n            deck_card_id: cardToUse.instance_id\n          })\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n      } catch (err) {\n        console.error('Error sending card used notification:', err);\n      }\n    } else {\n      showMessage(`\"${cardToUse.name}\" has no uses left! It needs a long rest.`, 'error');\n    }\n  };\n\n  // --- Card Usage Logic: Reset Card Uses (Long Rest) ---\n  const handleResetCardUses = instance_id => {\n    setSelectedCards(prev => prev.map(card => card.instance_id === instance_id ? {\n      ...card,\n      current_uses: card.default_uses_per_rest\n    } : card));\n    showMessage('Card uses reset!', 'success');\n  };\n\n  // --- Main Component Render ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Player ID\",\n        value: playerId,\n        onChange: e => setPlayerId(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLoginAndLoadDeck,\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCreateAccount,\n        children: \"Create Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSaveDeck,\n        children: \"Save Deck\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Level: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: characterLevel,\n          onChange: e => setCharacterLevel(parseInt(e.target.value) || 1),\n          min: \"1\",\n          max: \"20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"WIS Mod: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: wisMod,\n          onChange: e => setWisMod(parseInt(e.target.value) || 0),\n          min: \"0\",\n          max: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"INT Mod: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: intMod,\n          onChange: e => setIntMod(parseInt(e.target.value) || 0),\n          min: \"0\",\n          max: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"CHA Mod: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: chaMod,\n          onChange: e => setChaMod(parseInt(e.target.value) || 0),\n          min: \"0\",\n          max: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Max Deck Size: \", maxDeckSize]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }, this), message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message-box ${message.type}`,\n      children: message.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Available Spells\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading cards...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 25\n        }, this) : allCards.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"all-cards-container\",\n          children: allCards.map(card => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-item\",\n            onClick: () => handleAddCardToDeck(card),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-name\",\n              children: card.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-type\",\n              children: card.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-description\",\n              children: card.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 37\n            }, this)]\n          }, card.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No cards available. Please check the backend data source.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Your Deck\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"deck-container\",\n          children: isAuthenticated ? selectedCards.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Click on an available spell to add it to your deck.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 33\n          }, this) : selectedCards.map(card => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-item deck-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-name\",\n              children: card.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-type\",\n              children: card.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-description\",\n              children: card.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleMarkCardUsed(card.instance_id),\n                disabled: card.current_uses <= 0,\n                className: \"use-button\",\n                children: [\"Use (\", card.current_uses, \"/\", card.default_uses_per_rest, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleResetCardUses(card.instance_id),\n                className: \"reset-button\",\n                children: \"Reset Uses\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleRemoveCardFromDeck(card.instance_id),\n                className: \"remove-button\",\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 41\n            }, this)]\n          }, card.instance_id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 37\n          }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pre-login-message\",\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Please log in to load your character and spell deck.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 260,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"xgoqLEMG1VvM/LvTAe8pCPE1mvg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","v4","uuidv4","jsxDEV","_jsxDEV","API_BASE_URL","App","_s","allCards","setAllCards","characterLevel","setCharacterLevel","wisMod","setWisMod","intMod","setIntMod","chaMod","setChaMod","maxDeckSize","setMaxDeckSize","selectedCards","setSelectedCards","loading","setLoading","playerId","setPlayerId","password","setPassword","isAuthenticated","setIsAuthenticated","message","setMessage","text","type","showMessage","setTimeout","handleCreateAccount","response","fetch","method","headers","body","JSON","stringify","player_id","data","json","ok","Error","error","err","console","handleLoginAndLoadDeck","cards","character_level","undefined","wis_mod","int_mod","cha_mod","handleSaveDeck","fetchAllCards","cardsResponse","status","cardsData","calculateDeckSize","max_deck_size","isNaN","handleAddCardToDeck","card","length","newCard","instance_id","current_uses","default_uses_per_rest","prev","handleRemoveCardFromDeck","updatedDeck","filter","handleMarkCardUsed","cardToUse","find","map","card_name","name","card_type","deck_card_id","handleResetCardUses","className","children","placeholder","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","onClick","parseInt","min","max","description","id","disabled","_c","$RefreshReg$"],"sources":["C:/Users/aaron/DND_Spell_Cards/Spell_Card_Game/DND_Spell_Cards_online/frontend - Copy/src/App.js"],"sourcesContent":["// dnd-spell-cards-app/frontend/src/App.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport { v4 as uuidv4 } from 'uuid'; // Import uuid for unique keys for deck card instances\r\n\r\n// IMPORTANT: Re-enter your VM's Public IP address here.\r\nconst API_BASE_URL = 'http://193.122.147.91:5000/api';\r\n\r\nfunction App() {\r\n    // --- State Variables ---\r\n    const [allCards, setAllCards] = useState([]); // All cards fetched from the backend (master list)\r\n    const [characterLevel, setCharacterLevel] = useState(1);\r\n    const [wisMod, setWisMod] = useState(0);\r\n    const [intMod, setIntMod] = useState(0);\r\n    const [chaMod, setChaMod] = useState(0);\r\n    const [maxDeckSize, setMaxDeckSize] = useState(0);\r\n    const [selectedCards, setSelectedCards] = useState([]); // Cards currently in the player's deck (persistent)\r\n    const [loading, setLoading] = useState(true); // Loading state for initial data fetch\r\n\r\n    // New states for login/auth\r\n    const [playerId, setPlayerId] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    const [message, setMessage] = useState({ text: '', type: '' });\r\n\r\n    // --- Helper function to display messages ---\r\n    const showMessage = (text, type) => {\r\n        setMessage({ text, type });\r\n        setTimeout(() => setMessage({ text: '', type: '' }), 3000);\r\n    };\r\n\r\n    // --- API Call: Create Account ---\r\n    const handleCreateAccount = async () => {\r\n        if (!playerId || !password) {\r\n            showMessage('Player ID and password are required to create an account.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/deck/create`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n            \r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to create account.');\r\n            }\r\n            \r\n            showMessage('Account created successfully! You can now log in.', 'success');\r\n        } catch (err) {\r\n            console.error('Error creating account:', err);\r\n            showMessage(`Failed to create account: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- API Call: Login and Load Deck ---\r\n    const handleLoginAndLoadDeck = async () => {\r\n        if (!playerId || !password) {\r\n            showMessage('Player ID and password are required to log in.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/deck/login`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ player_id: playerId, password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Authentication failed.');\r\n            }\r\n\r\n            setSelectedCards(data.cards || []);\r\n            setCharacterLevel(data.character_level !== undefined ? data.character_level : 1);\r\n            setWisMod(data.wis_mod !== undefined ? data.wis_mod : 0);\r\n            setIntMod(data.int_mod !== undefined ? data.int_mod : 0);\r\n            setChaMod(data.cha_mod !== undefined ? data.cha_mod : 0);\r\n            setIsAuthenticated(true);\r\n\r\n            showMessage('Login successful! Deck loaded.', 'success');\r\n        } catch (err) {\r\n            setIsAuthenticated(false);\r\n            console.error('Error logging in:', err);\r\n            showMessage(`Failed to load deck: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- API Call: Save Deck ---\r\n    const handleSaveDeck = async () => {\r\n        if (!isAuthenticated) {\r\n            showMessage('You must be logged in to save your deck.', 'error');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/deck/save`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    player_id: playerId,\r\n                    password: password,\r\n                    cards: selectedCards,\r\n                    character_level: characterLevel,\r\n                    wis_mod: wisMod,\r\n                    int_mod: intMod,\r\n                    cha_mod: chaMod,\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to save deck.');\r\n            }\r\n\r\n            showMessage('Deck and stats saved successfully!', 'success');\r\n        } catch (err) {\r\n            console.error('Error saving deck:', err);\r\n            showMessage(`Failed to save deck: ${err.message}`, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- Effect to Fetch All Cards on Component Mount ---\r\n    useEffect(() => {\r\n        const fetchAllCards = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const cardsResponse = await fetch(`${API_BASE_URL}/cards`);\r\n                if (!cardsResponse.ok) {\r\n                    throw new Error(`HTTP error fetching cards! status: ${cardsResponse.status}`);\r\n                }\r\n                const cardsData = await cardsResponse.json();\r\n                setAllCards(cardsData);\r\n            } catch (err) {\r\n                console.error('Error fetching initial data:', err);\r\n                showMessage('Failed to fetch initial data: ' + err.message, 'error');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchAllCards();\r\n    }, []);\r\n\r\n    // --- Effect to Calculate Max Deck Size when Character Stats Change ---\r\n    useEffect(() => {\r\n        const calculateDeckSize = async () => {\r\n            try {\r\n                const response = await fetch(`${API_BASE_URL}/calculate_deck_size`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        character_level: characterLevel,\r\n                        wis_mod: wisMod,\r\n                        int_mod: intMod,\r\n                        cha_mod: chaMod,\r\n                    }),\r\n                });\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const data = await response.json();\r\n                setMaxDeckSize(data.max_deck_size);\r\n            } catch (err) {\r\n                console.error('Error calculating deck size:', err);\r\n                showMessage('Failed to calculate deck size: ' + err.message, 'error');\r\n            }\r\n        };\r\n\r\n        if (!isNaN(characterLevel) && !isNaN(wisMod) && !isNaN(intMod) && !isNaN(chaMod)) {\r\n            calculateDeckSize();\r\n        }\r\n    }, [characterLevel, wisMod, intMod, chaMod]);\r\n\r\n    // --- Deck Building Logic: Add Card ---\r\n    const handleAddCardToDeck = (card) => {\r\n        if (!isAuthenticated) {\r\n            showMessage(\"You must be logged in to build a deck.\", \"error\");\r\n            return;\r\n        }\r\n        if (selectedCards.length >= maxDeckSize) {\r\n            showMessage('Deck is full! Remove cards to add new ones.', 'error');\r\n            return;\r\n        }\r\n\r\n        const newCard = {\r\n            ...card,\r\n            instance_id: uuidv4(),\r\n            current_uses: card.default_uses_per_rest\r\n        };\r\n        setSelectedCards(prev => [...prev, newCard]);\r\n        showMessage('Card added to your deck!', 'success');\r\n    };\r\n\r\n    // --- Deck Building Logic: Remove Card ---\r\n    const handleRemoveCardFromDeck = (instance_id) => {\r\n        const updatedDeck = selectedCards.filter(card => card.instance_id !== instance_id);\r\n        setSelectedCards(updatedDeck);\r\n        showMessage('Card removed from deck.', 'success');\r\n    };\r\n\r\n    // --- Card Usage Logic: Mark Card as Used ---\r\n    const handleMarkCardUsed = async (instance_id) => {\r\n        const cardToUse = selectedCards.find(card => card.instance_id === instance_id);\r\n        if (!cardToUse) return;\r\n\r\n        if (cardToUse.current_uses > 0) {\r\n            setSelectedCards(prev =>\r\n                prev.map(card =>\r\n                    card.instance_id === instance_id ? { ...card, current_uses: card.current_uses - 1 } : card\r\n                )\r\n            );\r\n\r\n            // Notify backend about the card usage for logging purposes.\r\n            try {\r\n                const response = await fetch(`${API_BASE_URL}/card_used`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        card_name: cardToUse.name,\r\n                        card_type: cardToUse.type,\r\n                        deck_card_id: cardToUse.instance_id\r\n                    }),\r\n                });\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n            } catch (err) {\r\n                console.error('Error sending card used notification:', err);\r\n            }\r\n        } else {\r\n            showMessage(`\"${cardToUse.name}\" has no uses left! It needs a long rest.`, 'error');\r\n        }\r\n    };\r\n\r\n    // --- Card Usage Logic: Reset Card Uses (Long Rest) ---\r\n    const handleResetCardUses = (instance_id) => {\r\n        setSelectedCards(prev =>\r\n            prev.map(card =>\r\n                card.instance_id === instance_id ? { ...card, current_uses: card.default_uses_per_rest } : card\r\n            )\r\n        );\r\n        showMessage('Card uses reset!', 'success');\r\n    };\r\n\r\n    // --- Main Component Render ---\r\n    return (\r\n        <div className=\"App\">\r\n            {/* Login/Auth Section */}\r\n            <div className=\"login-container\">\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Player ID\"\r\n                    value={playerId}\r\n                    onChange={(e) => setPlayerId(e.target.value)}\r\n                />\r\n                <input\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n                <button onClick={handleLoginAndLoadDeck}>Log In</button>\r\n                <button onClick={handleCreateAccount}>Create Account</button>\r\n                <button onClick={handleSaveDeck}>Save Deck</button>\r\n            </div>\r\n\r\n            {/* Character Stats section - Moved to be always visible */}\r\n            <div className=\"stats-container\">\r\n                <label>Level: <input type=\"number\" value={characterLevel} onChange={e => setCharacterLevel(parseInt(e.target.value) || 1)} min=\"1\" max=\"20\" /></label>\r\n                <label>WIS Mod: <input type=\"number\" value={wisMod} onChange={e => setWisMod(parseInt(e.target.value) || 0)} min=\"0\" max=\"6\" /></label>\r\n                <label>INT Mod: <input type=\"number\" value={intMod} onChange={e => setIntMod(parseInt(e.target.value) || 0)} min=\"0\" max=\"6\" /></label>\r\n                <label>CHA Mod: <input type=\"number\" value={chaMod} onChange={e => setChaMod(parseInt(e.target.value) || 0)} min=\"0\" max=\"6\" /></label>\r\n                <p>Max Deck Size: {maxDeckSize}</p>\r\n            </div>\r\n\r\n            {/* Message Box */}\r\n            {message.text && <div className={`message-box ${message.type}`}>{message.text}</div>}\r\n\r\n            <div className=\"app-container\">\r\n                <div className=\"left-column\">\r\n                    <h2>Available Spells</h2>\r\n                    {loading ? (\r\n                        <p>Loading cards...</p>\r\n                    ) : allCards.length > 0 ? (\r\n                        <div className=\"all-cards-container\">\r\n                            {allCards.map((card) => (\r\n                                <div key={card.id} className=\"card-item\" onClick={() => handleAddCardToDeck(card)}>\r\n                                    <div className=\"card-name\">{card.name}</div>\r\n                                    <div className=\"card-type\">{card.type}</div>\r\n                                    <div className=\"card-description\">{card.description}</div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <p>No cards available. Please check the backend data source.</p>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"right-column\">\r\n                    <h2>Your Deck</h2>\r\n                    <div className=\"deck-container\">\r\n                        {isAuthenticated ? (\r\n                            selectedCards.length === 0 ? (\r\n                                <p>Click on an available spell to add it to your deck.</p>\r\n                            ) : (\r\n                                selectedCards.map((card) => (\r\n                                    <div key={card.instance_id} className=\"card-item deck-card\">\r\n                                        <div className=\"card-name\">{card.name}</div>\r\n                                        <div className=\"card-type\">{card.type}</div>\r\n                                        <div className=\"card-description\">{card.description}</div>\r\n                                        <div className=\"card-actions\">\r\n                                            <button\r\n                                                onClick={() => handleMarkCardUsed(card.instance_id)}\r\n                                                disabled={card.current_uses <= 0}\r\n                                                className=\"use-button\"\r\n                                            >\r\n                                                Use ({card.current_uses}/{card.default_uses_per_rest})\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleResetCardUses(card.instance_id)}\r\n                                                className=\"reset-button\"\r\n                                            >\r\n                                                Reset Uses\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleRemoveCardFromDeck(card.instance_id)}\r\n                                                className=\"remove-button\"\r\n                                            >\r\n                                                Remove\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            )\r\n                        ) : (\r\n                            <div className=\"pre-login-message\">\r\n                                <h3>Please log in to load your character and spell deck.</h3>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}